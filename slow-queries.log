/usr/libexec/mysqld, Version: 5.5.68-MariaDB (MariaDB Server). started with:
Tcp port: 0  Unix socket: /var/lib/mysql/mysql.sock
Time                 Id Command    Argument
/usr/libexec/mysqld, Version: 5.5.68-MariaDB (MariaDB Server). started with:
Tcp port: 0  Unix socket: /var/lib/mysql/mysql.sock
Time                 Id Command    Argument
# Time: 210827  0:05:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 27  Schema: my_database  QC_hit: No
# Query_time: 1.585409  Lock_time: 0.000386  Rows_sent: 3  Rows_examined: 406722
use my_database;
SET timestamp=1630011913;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17749' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17749' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:05:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 35  Schema: my_database  QC_hit: No
# Query_time: 2.216923  Lock_time: 0.000293  Rows_sent: 3  Rows_examined: 764086
SET timestamp=1630011933;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18499' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18499' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:05:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 37  Schema: my_database  QC_hit: No
# Query_time: 3.500734  Lock_time: 0.000236  Rows_sent: 3  Rows_examined: 1180827
SET timestamp=1630011940;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14423' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14423' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:05:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 43  Schema: my_database  QC_hit: No
# Query_time: 1.435082  Lock_time: 0.000312  Rows_sent: 3  Rows_examined: 217450
SET timestamp=1630011943;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18635' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18635' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:06:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 69  Schema: my_database  QC_hit: No
# Query_time: 2.464836  Lock_time: 0.000395  Rows_sent: 3  Rows_examined: 752522
SET timestamp=1630011969;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2723' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2723' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:06:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 73  Schema: my_database  QC_hit: No
# Query_time: 1.093139  Lock_time: 0.000243  Rows_sent: 3  Rows_examined: 441260
SET timestamp=1630011975;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19816' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19816' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:06:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 77  Schema: my_database  QC_hit: No
# Query_time: 1.113850  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 447871
SET timestamp=1630011979;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5800' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5800' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:06:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 79  Schema: my_database  QC_hit: No
# Query_time: 1.286028  Lock_time: 0.000285  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630011983;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19821' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19821' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:06:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 81  Schema: my_database  QC_hit: No
# Query_time: 2.524087  Lock_time: 0.000266  Rows_sent: 3  Rows_examined: 830900
SET timestamp=1630011988;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1696' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1696' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:08:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 103  Schema: my_database  QC_hit: No
# Query_time: 2.539299  Lock_time: 0.000339  Rows_sent: 3  Rows_examined: 620281
SET timestamp=1630012084;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10224' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10224' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:08:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 127  Schema: my_database  QC_hit: No
# Query_time: 1.252628  Lock_time: 0.000267  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630012132;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19772' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19772' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:09:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 135  Schema: my_database  QC_hit: No
# Query_time: 1.105219  Lock_time: 0.000226  Rows_sent: 3  Rows_examined: 394229
SET timestamp=1630012149;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22413' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22413' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:09:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 143  Schema: my_database  QC_hit: No
# Query_time: 1.253386  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630012172;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19813' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19813' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:09:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 149  Schema: my_database  QC_hit: No
# Query_time: 1.013476  Lock_time: 0.000269  Rows_sent: 3  Rows_examined: 381285
SET timestamp=1630012185;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22241' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22241' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:10:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 157  Schema: my_database  QC_hit: No
# Query_time: 2.697756  Lock_time: 0.000209  Rows_sent: 3  Rows_examined: 1029261
SET timestamp=1630012218;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18766' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18766' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:10:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 159  Schema: my_database  QC_hit: No
# Query_time: 1.062072  Lock_time: 0.000200  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630012221;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19799' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19799' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:10:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 163  Schema: my_database  QC_hit: No
# Query_time: 1.618318  Lock_time: 0.000330  Rows_sent: 3  Rows_examined: 597671
SET timestamp=1630012230;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14707' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14707' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:10:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 167  Schema: my_database  QC_hit: No
# Query_time: 1.056150  Lock_time: 0.000241  Rows_sent: 3  Rows_examined: 470913
SET timestamp=1630012254;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6812' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6812' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:12:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 195  Schema: my_database  QC_hit: No
# Query_time: 3.470329  Lock_time: 0.000222  Rows_sent: 3  Rows_examined: 1051744
SET timestamp=1630012322;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18017' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18017' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:12:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 199  Schema: my_database  QC_hit: No
# Query_time: 3.125190  Lock_time: 0.000388  Rows_sent: 3  Rows_examined: 603118
SET timestamp=1630012326;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15926' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15926' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:12:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 197  Schema: my_database  QC_hit: No
# Query_time: 7.550858  Lock_time: 2.435201  Rows_sent: 3  Rows_examined: 1051744
SET timestamp=1630012327;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18017' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18017' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:12:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 205  Schema: my_database  QC_hit: No
# Query_time: 2.086043  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 566899
SET timestamp=1630012330;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18838' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18838' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:12:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 211  Schema: my_database  QC_hit: No
# Query_time: 1.703747  Lock_time: 0.000297  Rows_sent: 3  Rows_examined: 480067
SET timestamp=1630012335;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20018' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20018' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:12:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 215  Schema: my_database  QC_hit: No
# Query_time: 1.828764  Lock_time: 0.000265  Rows_sent: 3  Rows_examined: 539456
SET timestamp=1630012338;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10018' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10018' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:13:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 267  Schema: my_database  QC_hit: No
# Query_time: 1.642635  Lock_time: 0.000304  Rows_sent: 3  Rows_examined: 469306
SET timestamp=1630012390;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17224' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17224' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:13:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 275  Schema: my_database  QC_hit: No
# Query_time: 4.088271  Lock_time: 0.000215  Rows_sent: 3  Rows_examined: 1181527
SET timestamp=1630012400;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21471' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21471' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:16:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 377  Schema: my_database  QC_hit: No
# Query_time: 1.661327  Lock_time: 0.000516  Rows_sent: 3  Rows_examined: 500568
SET timestamp=1630012587;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14466' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14466' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:16:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 399  Schema: my_database  QC_hit: No
# Query_time: 1.153288  Lock_time: 0.000288  Rows_sent: 3  Rows_examined: 279487
SET timestamp=1630012608;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2229' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2229' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:16:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 407  Schema: my_database  QC_hit: No
# Query_time: 1.068815  Lock_time: 0.000164  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012617;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:17:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 411  Schema: my_database  QC_hit: No
# Query_time: 1.183663  Lock_time: 0.000257  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012623;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:17:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 423  Schema: my_database  QC_hit: No
# Query_time: 1.059196  Lock_time: 0.000217  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012634;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:17:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 435  Schema: my_database  QC_hit: No
# Query_time: 2.019429  Lock_time: 0.000206  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012647;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:17:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 437  Schema: my_database  QC_hit: No
# Query_time: 1.280914  Lock_time: 0.000455  Rows_sent: 3  Rows_examined: 148932
SET timestamp=1630012648;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21769' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21769' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:17:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 445  Schema: my_database  QC_hit: No
# Query_time: 1.056568  Lock_time: 0.000316  Rows_sent: 15  Rows_examined: 71167
SET timestamp=1630012651;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '249' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  0:17:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 441  Schema: my_database  QC_hit: No
# Query_time: 3.689982  Lock_time: 0.000320  Rows_sent: 3  Rows_examined: 510997
SET timestamp=1630012653;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1043' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1043' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:17:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 447  Schema: my_database  QC_hit: No
# Query_time: 1.174109  Lock_time: 0.000140  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012660;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 451  Schema: my_database  QC_hit: No
# Query_time: 3.137262  Lock_time: 0.000182  Rows_sent: 3  Rows_examined: 499128
SET timestamp=1630012660;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14471' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14471' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:17:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 463  Schema: my_database  QC_hit: No
# Query_time: 1.947929  Lock_time: 0.000427  Rows_sent: 3  Rows_examined: 591710
SET timestamp=1630012672;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17700' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17700' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:17:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 469  Schema: my_database  QC_hit: No
# Query_time: 1.047625  Lock_time: 0.000142  Rows_sent: 15  Rows_examined: 71155
SET timestamp=1630012676;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1898' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 467  Schema: my_database  QC_hit: No
# Query_time: 1.018204  Lock_time: 0.000274  Rows_sent: 0  Rows_examined: 71088
SET timestamp=1630012676;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '210' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  0:17:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 465  Schema: my_database  QC_hit: No
# Query_time: 3.243273  Lock_time: 0.000342  Rows_sent: 3  Rows_examined: 433726
SET timestamp=1630012677;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16487' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16487' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:18:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 481  Schema: my_database  QC_hit: No
# Query_time: 1.315500  Lock_time: 0.000231  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012690;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:18:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 489  Schema: my_database  QC_hit: No
# Query_time: 1.248259  Lock_time: 0.000162  Rows_sent: 15  Rows_examined: 73869
SET timestamp=1630012692;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '541' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 483  Schema: my_database  QC_hit: No
# Query_time: 1.773146  Lock_time: 0.000150  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012692;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:18:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 489  Schema: my_database  QC_hit: No
# Query_time: 1.009374  Lock_time: 0.000141  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012696;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:18:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 517  Schema: my_database  QC_hit: No
# Query_time: 2.083810  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 404164
SET timestamp=1630012713;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17742' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17742' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:18:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 521  Schema: my_database  QC_hit: No
# Query_time: 1.154781  Lock_time: 0.000142  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012721;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:18:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 529  Schema: my_database  QC_hit: No
# Query_time: 1.189880  Lock_time: 0.000196  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012726;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:18:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 539  Schema: my_database  QC_hit: No
# Query_time: 1.396207  Lock_time: 0.000191  Rows_sent: 15  Rows_examined: 71139
SET timestamp=1630012732;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '539' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 549  Schema: my_database  QC_hit: No
# Query_time: 1.014431  Lock_time: 0.000107  Rows_sent: 1  Rows_examined: 71289
SET timestamp=1630012732;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '227';
# Time: 210827  0:18:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 549  Schema: my_database  QC_hit: No
# Query_time: 1.387437  Lock_time: 0.000191  Rows_sent: 15  Rows_examined: 71542
SET timestamp=1630012733;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '227' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 545  Schema: my_database  QC_hit: No
# Query_time: 1.100986  Lock_time: 0.000116  Rows_sent: 1  Rows_examined: 71107
SET timestamp=1630012733;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '350';
# Time: 210827  0:18:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 543  Schema: my_database  QC_hit: No
# Query_time: 3.463939  Lock_time: 0.000243  Rows_sent: 3  Rows_examined: 343598
SET timestamp=1630012735;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7117' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7117' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 545  Schema: my_database  QC_hit: No
# Query_time: 1.392610  Lock_time: 0.000193  Rows_sent: 15  Rows_examined: 71141
SET timestamp=1630012735;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '350' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 535  Schema: my_database  QC_hit: No
# Query_time: 2.088024  Lock_time: 0.000218  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012735;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:18:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 549  Schema: my_database  QC_hit: No
# Query_time: 1.323701  Lock_time: 0.000176  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012738;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:19:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 559  Schema: my_database  QC_hit: No
# Query_time: 1.037690  Lock_time: 0.000253  Rows_sent: 15  Rows_examined: 71155
SET timestamp=1630012747;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '624' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  0:19:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 557  Schema: my_database  QC_hit: No
# Query_time: 5.984440  Lock_time: 0.000228  Rows_sent: 3  Rows_examined: 826812
SET timestamp=1630012749;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14501' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14501' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:19:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 561  Schema: my_database  QC_hit: No
# Query_time: 1.796043  Lock_time: 0.000214  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012751;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:19:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 559  Schema: my_database  QC_hit: No
# Query_time: 1.722289  Lock_time: 0.000245  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012752;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:19:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 563  Schema: my_database  QC_hit: No
# Query_time: 1.186682  Lock_time: 0.000216  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012757;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:19:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 565  Schema: my_database  QC_hit: No
# Query_time: 1.052087  Lock_time: 0.000187  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012758;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:19:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 579  Schema: my_database  QC_hit: No
# Query_time: 1.024503  Lock_time: 0.000145  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012766;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:19:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 587  Schema: my_database  QC_hit: No
# Query_time: 1.381913  Lock_time: 0.000217  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012773;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:19:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 601  Schema: my_database  QC_hit: No
# Query_time: 2.861240  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 358293
SET timestamp=1630012785;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22197' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22197' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:19:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 609  Schema: my_database  QC_hit: No
# Query_time: 1.150236  Lock_time: 0.000169  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012787;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:19:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 613  Schema: my_database  QC_hit: No
# Query_time: 1.457687  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 356837
SET timestamp=1630012790;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21658' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21658' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:19:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 619  Schema: my_database  QC_hit: No
# Query_time: 1.454804  Lock_time: 0.000227  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012796;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:20:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 623  Schema: my_database  QC_hit: No
# Query_time: 1.264248  Lock_time: 0.000198  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012800;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:20:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 647  Schema: my_database  QC_hit: No
# Query_time: 1.213649  Lock_time: 0.000193  Rows_sent: 3  Rows_examined: 71097
SET timestamp=1630012808;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '121' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  0:20:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 653  Schema: my_database  QC_hit: No
# Query_time: 1.498231  Lock_time: 0.000217  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012809;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:20:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 643  Schema: my_database  QC_hit: No
# Query_time: 5.642674  Lock_time: 0.000288  Rows_sent: 3  Rows_examined: 577639
SET timestamp=1630012810;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22527' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22527' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:20:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 683  Schema: my_database  QC_hit: No
# Query_time: 1.373204  Lock_time: 0.000216  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630012832;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:21:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 747  Schema: my_database  QC_hit: No
# Query_time: 1.109648  Lock_time: 0.000189  Rows_sent: 3  Rows_examined: 368078
SET timestamp=1630012871;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22039' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22039' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
/usr/libexec/mysqld, Version: 5.5.68-MariaDB (MariaDB Server). started with:
Tcp port: 0  Unix socket: /var/lib/mysql/mysql.sock
Time                 Id Command    Argument
# Time: 210827  0:23:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3  Schema: my_database  QC_hit: No
# Query_time: 1.106559  Lock_time: 0.000590  Rows_sent: 3  Rows_examined: 441796
use my_database;
SET timestamp=1630013033;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20666' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20666' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:25:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 28  Schema: my_database  QC_hit: No
# Query_time: 1.369431  Lock_time: 0.000459  Rows_sent: 3  Rows_examined: 385845
SET timestamp=1630013101;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23089' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23089' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:25:57
# User@Host: root[root] @ localhost []
# Thread_id: 45  Schema:   QC_hit: No
# Query_time: 1.065021  Lock_time: 0.000025  Rows_sent: 109987  Rows_examined: 109987
SET timestamp=1630013157;
SELECT * FROM `my_database`.`my_filt_option_value_to_product`;
# Time: 210827  0:25:58
# User@Host: root[root] @ localhost []
# Thread_id: 45  Schema:   QC_hit: No
# Query_time: 1.121456  Lock_time: 0.000027  Rows_sent: 15717  Rows_examined: 15717
SET timestamp=1630013158;
SELECT * FROM `my_database`.`my_table`;
# Time: 210827  0:25:59
# User@Host: root[root] @ localhost []
# Thread_id: 45  Schema:   QC_hit: No
# Query_time: 1.218310  Lock_time: 0.000024  Rows_sent: 109987  Rows_examined: 109987
SET timestamp=1630013159;
SELECT * FROM `my_database`.`my_table_attribute`;
# Time: 210827  0:26:01
# User@Host: root[root] @ localhost []
# Thread_id: 45  Schema:   QC_hit: No
# Query_time: 1.161797  Lock_time: 0.000041  Rows_sent: 15717  Rows_examined: 15717
SET timestamp=1630013161;
SELECT * FROM `my_database`.`my_table_description`;
# Time: 210827  0:26:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 53  Schema: my_database  QC_hit: No
# Query_time: 1.354776  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 484429
SET timestamp=1630013181;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1019' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1019' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:26:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 57  Schema: my_database  QC_hit: No
# Query_time: 1.397627  Lock_time: 0.000249  Rows_sent: 3  Rows_examined: 360229
SET timestamp=1630013189;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10290' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10290' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:26:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 59  Schema: my_database  QC_hit: No
# Query_time: 1.459941  Lock_time: 0.000688  Rows_sent: 3  Rows_examined: 373745
SET timestamp=1630013190;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14956' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14956' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:27:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 75  Schema: my_database  QC_hit: No
# Query_time: 1.619801  Lock_time: 0.000190  Rows_sent: 3  Rows_examined: 599286
SET timestamp=1630013241;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22393' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22393' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:28:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 83  Schema: my_database  QC_hit: No
# Query_time: 1.514521  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 604634
SET timestamp=1630013304;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6267' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6267' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:28:44
# User@Host: root[root] @ localhost []
# Thread_id: 93  Schema: my_database  QC_hit: No
# Query_time: 1.102478  Lock_time: 0.000362  Rows_sent: 3  Rows_examined: 406722
SET timestamp=1630013324;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17749' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17749' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:28:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 129  Schema: my_database  QC_hit: No
# Query_time: 2.045230  Lock_time: 0.000307  Rows_sent: 3  Rows_examined: 604634
SET timestamp=1630013339;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6267' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6267' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:29:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 131  Schema: my_database  QC_hit: No
# Query_time: 1.060577  Lock_time: 0.000240  Rows_sent: 3  Rows_examined: 451371
SET timestamp=1630013341;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20990' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20990' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:29:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 139  Schema: my_database  QC_hit: No
# Query_time: 2.221684  Lock_time: 0.000239  Rows_sent: 3  Rows_examined: 764976
SET timestamp=1630013349;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '170' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '170' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:29:26
# User@Host: root[root] @ localhost []
# Thread_id: 149  Schema: my_database  QC_hit: No
# Query_time: 1.218275  Lock_time: 0.000282  Rows_sent: 3  Rows_examined: 406722
SET timestamp=1630013366;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17749' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17749' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:31:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 195  Schema: my_database  QC_hit: No
# Query_time: 1.395215  Lock_time: 0.000307  Rows_sent: 3  Rows_examined: 469306
SET timestamp=1630013476;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17224' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17224' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:31:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 199  Schema: my_database  QC_hit: No
# Query_time: 1.847369  Lock_time: 0.000331  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630013491;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21164' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21164' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:32:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 227  Schema: my_database  QC_hit: No
# Query_time: 1.032128  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 375205
SET timestamp=1630013559;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14136' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14136' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:33:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 233  Schema: my_database  QC_hit: No
# Query_time: 7.044620  Lock_time: 0.000289  Rows_sent: 3  Rows_examined: 1974503
SET timestamp=1630013605;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21540' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21540' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:33:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 249  Schema: my_database  QC_hit: No
# Query_time: 1.098916  Lock_time: 0.000280  Rows_sent: 3  Rows_examined: 438958
SET timestamp=1630013614;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8697' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8697' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:33:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 253  Schema: my_database  QC_hit: No
# Query_time: 5.135444  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 1974503
SET timestamp=1630013635;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21540' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21540' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:34:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 263  Schema: my_database  QC_hit: No
# Query_time: 5.057987  Lock_time: 0.000280  Rows_sent: 3  Rows_examined: 1974503
SET timestamp=1630013651;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21540' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21540' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:36:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 317  Schema: my_database  QC_hit: No
# Query_time: 2.666824  Lock_time: 0.000316  Rows_sent: 3  Rows_examined: 890365
SET timestamp=1630013780;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20268' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20268' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:37:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 354  Schema: my_database  QC_hit: No
# Query_time: 2.613725  Lock_time: 0.000463  Rows_sent: 3  Rows_examined: 836090
SET timestamp=1630013829;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13120' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13120' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:37:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 380  Schema: my_database  QC_hit: No
# Query_time: 2.045992  Lock_time: 0.000327  Rows_sent: 3  Rows_examined: 613666
SET timestamp=1630013841;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8982' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8982' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:37:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 400  Schema: my_database  QC_hit: No
# Query_time: 1.519606  Lock_time: 0.000415  Rows_sent: 3  Rows_examined: 583537
SET timestamp=1630013878;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19759' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19759' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:38:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 408  Schema: my_database  QC_hit: No
# Query_time: 2.035613  Lock_time: 0.000286  Rows_sent: 3  Rows_examined: 510266
SET timestamp=1630013905;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20112' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20112' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:38:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 410  Schema: my_database  QC_hit: No
# Query_time: 2.749938  Lock_time: 0.000339  Rows_sent: 3  Rows_examined: 910737
SET timestamp=1630013908;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13677' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13677' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:39:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 449  Schema: my_database  QC_hit: No
# Query_time: 4.131769  Lock_time: 0.000228  Rows_sent: 3  Rows_examined: 1531447
SET timestamp=1630013978;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6179' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6179' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:40:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 463  Schema: my_database  QC_hit: No
# Query_time: 2.602410  Lock_time: 0.000365  Rows_sent: 3  Rows_examined: 613666
SET timestamp=1630014007;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8982' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8982' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:41:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 489  Schema: my_database  QC_hit: No
# Query_time: 1.424350  Lock_time: 0.000255  Rows_sent: 3  Rows_examined: 509080
SET timestamp=1630014112;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3052' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3052' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:42:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 501  Schema: my_database  QC_hit: No
# Query_time: 3.075524  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 891213
SET timestamp=1630014131;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20211' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20211' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:43:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 553  Schema: my_database  QC_hit: No
# Query_time: 2.202487  Lock_time: 0.000299  Rows_sent: 3  Rows_examined: 840895
SET timestamp=1630014201;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1432' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1432' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:44:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 589  Schema: my_database  QC_hit: No
# Query_time: 1.290946  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 678116
SET timestamp=1630014260;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21570' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21570' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:44:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 598  Schema: my_database  QC_hit: No
# Query_time: 1.294367  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 500559
SET timestamp=1630014274;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14348' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14348' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:44:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 605  Schema: my_database  QC_hit: No
# Query_time: 1.431035  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 480547
SET timestamp=1630014284;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3539' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3539' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:45:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 615  Schema: my_database  QC_hit: No
# Query_time: 1.425413  Lock_time: 0.000225  Rows_sent: 3  Rows_examined: 554763
SET timestamp=1630014312;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22096' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22096' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:45:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 627  Schema: my_database  QC_hit: No
# Query_time: 2.490383  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 397704
SET timestamp=1630014348;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18143' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18143' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:46:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 643  Schema: my_database  QC_hit: No
# Query_time: 1.605999  Lock_time: 0.000323  Rows_sent: 3  Rows_examined: 583452
SET timestamp=1630014376;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19703' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19703' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:46:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 663  Schema: my_database  QC_hit: No
# Query_time: 1.143532  Lock_time: 0.000316  Rows_sent: 3  Rows_examined: 375211
SET timestamp=1630014400;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14036' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14036' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:47:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 681  Schema: my_database  QC_hit: No
# Query_time: 1.202653  Lock_time: 0.000249  Rows_sent: 3  Rows_examined: 451371
SET timestamp=1630014444;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21073' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21073' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:47:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 683  Schema: my_database  QC_hit: No
# Query_time: 1.731211  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 480128
SET timestamp=1630014451;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20471' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20471' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:47:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 691  Schema: my_database  QC_hit: No
# Query_time: 2.953331  Lock_time: 0.000304  Rows_sent: 3  Rows_examined: 1140216
SET timestamp=1630014479;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18989' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18989' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:48:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 699  Schema: my_database  QC_hit: No
# Query_time: 1.013734  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 369719
SET timestamp=1630014496;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10079' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10079' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:49:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 727  Schema: my_database  QC_hit: No
# Query_time: 4.630832  Lock_time: 0.000415  Rows_sent: 3  Rows_examined: 1531434
SET timestamp=1630014556;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17598' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17598' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:49:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 729  Schema: my_database  QC_hit: No
# Query_time: 2.194725  Lock_time: 0.000249  Rows_sent: 3  Rows_examined: 764964
SET timestamp=1630014559;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1419' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1419' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:50:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 755  Schema: my_database  QC_hit: No
# Query_time: 1.578387  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 620148
SET timestamp=1630014634;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10229' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10229' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:50:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 763  Schema: my_database  QC_hit: No
# Query_time: 3.682725  Lock_time: 0.000202  Rows_sent: 3  Rows_examined: 1147996
SET timestamp=1630014654;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17463' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17463' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:51:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 774  Schema: my_database  QC_hit: No
# Query_time: 1.344145  Lock_time: 0.000434  Rows_sent: 3  Rows_examined: 484429
SET timestamp=1630014665;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '987' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '987' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:52:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 804  Schema: my_database  QC_hit: No
# Query_time: 1.228373  Lock_time: 0.000354  Rows_sent: 3  Rows_examined: 365150
SET timestamp=1630014723;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21621' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21621' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:53:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 837  Schema: my_database  QC_hit: No
# Query_time: 2.813181  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 910997
SET timestamp=1630014787;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13464' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13464' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:53:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 855  Schema: my_database  QC_hit: No
# Query_time: 2.365314  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 718053
SET timestamp=1630014802;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1473' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1473' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:53:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 857  Schema: my_database  QC_hit: No
# Query_time: 1.048860  Lock_time: 0.000143  Rows_sent: 1  Rows_examined: 73221
SET timestamp=1630014803;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '20';
# Time: 210827  0:53:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 870  Schema: my_database  QC_hit: No
# Query_time: 1.220608  Lock_time: 0.000084  Rows_sent: 0  Rows_examined: 47960
SET timestamp=1630014804;
SELECT oov2p.value_id, oov2p.option_id, COUNT(DISTINCT p.product_id) AS total FROM my_filt_option_value_to_product oov2p LEFT JOIN my_table_to_category p2c ON (oov2p.product_id = p2c.product_id) LEFT JOIN my_table p ON (oov2p.product_id = p.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND oov2p.value_id > '0' AND cp.path_id = '1881' GROUP BY oov2p.option_id, oov2p.value_id;
# Time: 210827  0:53:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 876  Schema: my_database  QC_hit: No
# Query_time: 1.961229  Lock_time: 0.000123  Rows_sent: 1  Rows_examined: 74360
SET timestamp=1630014805;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '17';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 857  Schema: my_database  QC_hit: No
# Query_time: 2.364236  Lock_time: 0.000211  Rows_sent: 15  Rows_examined: 74494
SET timestamp=1630014805;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '20' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  0:53:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 885  Schema: my_database  QC_hit: No
# Query_time: 2.377982  Lock_time: 0.000302  Rows_sent: 1  Rows_examined: 72697
SET timestamp=1630014806;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '5';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 857  Schema: my_database  QC_hit: No
# Query_time: 1.278586  Lock_time: 0.000128  Rows_sent: 1  Rows_examined: 31631
SET timestamp=1630014806;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND ( pd.tag LIKE '%%');
# Time: 210827  0:53:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 896  Schema: my_database  QC_hit: No
# Query_time: 1.922180  Lock_time: 0.000079  Rows_sent: 1  Rows_examined: 47966
SET timestamp=1630014807;
SELECT p.manufacturer_id AS value_id, 'm' AS option_id, COUNT(DISTINCT p.product_id) AS total FROM my_table p LEFT JOIN my_table_to_category p2c ON (p.product_id = p2c.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND cp.path_id = '2206' GROUP BY p.manufacturer_id;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 870  Schema: my_database  QC_hit: No
# Query_time: 2.274976  Lock_time: 0.000185  Rows_sent: 1  Rows_examined: 55336
SET timestamp=1630014807;
SELECT MIN(p.price) AS `min`, MAX(p.price) AS `max` FROM my_table p LEFT JOIN my_table_to_category p2c ON (p.product_id = p2c.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND p.price > '0' AND p2s.store_id = '0' AND p.date_available <= '2021-08-27' AND cp.path_id = '1881';
# Time: 210827  0:53:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 857  Schema: my_database  QC_hit: No
# Query_time: 1.368375  Lock_time: 0.000289  Rows_sent: 15  Rows_examined: 31861
SET timestamp=1630014808;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND ( pd.tag LIKE '%%') GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  0:53:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 896  Schema: my_database  QC_hit: No
# Query_time: 1.821036  Lock_time: 0.000086  Rows_sent: 1  Rows_examined: 47966
SET timestamp=1630014809;
SELECT IF(p.quantity > '0', 'in', 'out') AS value_id, 's' AS option_id, COUNT(DISTINCT p.product_id) AS total FROM my_table p LEFT JOIN my_table_to_category p2c ON (p.product_id = p2c.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND cp.path_id = '2206' GROUP BY value_id;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 876  Schema: my_database  QC_hit: No
# Query_time: 4.676900  Lock_time: 0.154272  Rows_sent: 15  Rows_examined: 76690
SET timestamp=1630014809;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '17' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  0:53:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 870  Schema: my_database  QC_hit: No
# Query_time: 2.486430  Lock_time: 0.000180  Rows_sent: 1  Rows_examined: 71191
SET timestamp=1630014810;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '582';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 885  Schema: my_database  QC_hit: No
# Query_time: 3.931882  Lock_time: 0.000231  Rows_sent: 15  Rows_examined: 74042
SET timestamp=1630014810;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '5' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 896  Schema: my_database  QC_hit: No
# Query_time: 1.567667  Lock_time: 0.000085  Rows_sent: 10  Rows_examined: 48013
SET timestamp=1630014810;
SELECT oov2p.value_id, oov2p.option_id, COUNT(DISTINCT p.product_id) AS total FROM my_filt_option_value_to_product oov2p LEFT JOIN my_table_to_category p2c ON (oov2p.product_id = p2c.product_id) LEFT JOIN my_table p ON (oov2p.product_id = p.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND oov2p.value_id > '0' AND cp.path_id = '2206' GROUP BY oov2p.option_id, oov2p.value_id;
# Time: 210827  0:53:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 876  Schema: my_database  QC_hit: No
# Query_time: 1.066793  Lock_time: 0.000063  Rows_sent: 1  Rows_examined: 31495
SET timestamp=1630014811;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND ( pd.tag LIKE '%%' AND pd.tag LIKE '%%');
# Time: 210827  0:53:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 896  Schema: my_database  QC_hit: No
# Query_time: 1.995354  Lock_time: 0.000082  Rows_sent: 1  Rows_examined: 55338
SET timestamp=1630014812;
SELECT MIN(p.price) AS `min`, MAX(p.price) AS `max` FROM my_table p LEFT JOIN my_table_to_category p2c ON (p.product_id = p2c.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND p.price > '0' AND p2s.store_id = '0' AND p.date_available <= '2021-08-27' AND cp.path_id = '2206';
# Time: 210827  0:53:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 870  Schema: my_database  QC_hit: No
# Query_time: 2.687452  Lock_time: 0.000242  Rows_sent: 15  Rows_examined: 71501
SET timestamp=1630014813;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '582' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  0:53:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 857  Schema: my_database  QC_hit: No
# Query_time: 1.055949  Lock_time: 0.000194  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630014815;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:53:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 885  Schema: my_database  QC_hit: No
# Query_time: 1.077895  Lock_time: 0.000215  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630014816;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  0:53:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 870  Schema: my_database  QC_hit: No
# Query_time: 1.124067  Lock_time: 0.000185  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630014817;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 896  Schema: my_database  QC_hit: No
# Query_time: 2.099683  Lock_time: 0.000207  Rows_sent: 3  Rows_examined: 436983
SET timestamp=1630014817;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21352' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21352' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:54:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 954  Schema: my_database  QC_hit: No
# Query_time: 1.214059  Lock_time: 0.000291  Rows_sent: 3  Rows_examined: 463875
SET timestamp=1630014880;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4213' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4213' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:55:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 976  Schema: my_database  QC_hit: No
# Query_time: 1.022643  Lock_time: 0.000375  Rows_sent: 3  Rows_examined: 346728
SET timestamp=1630014925;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19975' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19975' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:55:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 982  Schema: my_database  QC_hit: No
# Query_time: 3.520629  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 1180949
SET timestamp=1630014932;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7782' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7782' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:55:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 986  Schema: my_database  QC_hit: No
# Query_time: 1.379591  Lock_time: 0.000345  Rows_sent: 3  Rows_examined: 479319
SET timestamp=1630014936;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20374' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20374' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:55:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 996  Schema: my_database  QC_hit: No
# Query_time: 1.338337  Lock_time: 0.000347  Rows_sent: 3  Rows_examined: 461440
SET timestamp=1630014958;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23108' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23108' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:56:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 998  Schema: my_database  QC_hit: No
# Query_time: 1.632788  Lock_time: 0.000199  Rows_sent: 3  Rows_examined: 446228
SET timestamp=1630014962;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6715' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6715' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:56:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1006  Schema: my_database  QC_hit: No
# Query_time: 1.450768  Lock_time: 0.000239  Rows_sent: 3  Rows_examined: 461440
SET timestamp=1630014964;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23108' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23108' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:56:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1030  Schema: my_database  QC_hit: No
# Query_time: 1.150783  Lock_time: 0.000219  Rows_sent: 3  Rows_examined: 479149
SET timestamp=1630015014;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16970' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16970' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  0:57:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1059  Schema: my_database  QC_hit: No
# Query_time: 2.412958  Lock_time: 0.000313  Rows_sent: 3  Rows_examined: 765668
SET timestamp=1630015071;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4730' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4730' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:00:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1114  Schema: my_database  QC_hit: No
# Query_time: 3.096669  Lock_time: 0.000207  Rows_sent: 3  Rows_examined: 370157
SET timestamp=1630015203;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '46' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '46' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:00:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1116  Schema: my_database  QC_hit: No
# Query_time: 3.729028  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 480054
SET timestamp=1630015204;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21205' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21205' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:00:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1124  Schema: my_database  QC_hit: No
# Query_time: 1.216783  Lock_time: 0.000225  Rows_sent: 3  Rows_examined: 491070
SET timestamp=1630015210;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1850' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1850' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:01:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1139  Schema: my_database  QC_hit: No
# Query_time: 1.325226  Lock_time: 0.000201  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630015275;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11522' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11522' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:02:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1176  Schema: my_database  QC_hit: No
# Query_time: 1.176140  Lock_time: 0.000330  Rows_sent: 3  Rows_examined: 492040
SET timestamp=1630015353;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13152' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13152' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:02:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1182  Schema: my_database  QC_hit: No
# Query_time: 2.955108  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 1029232
SET timestamp=1630015366;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18114' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18114' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:03:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1190  Schema: my_database  QC_hit: No
# Query_time: 3.086849  Lock_time: 0.000191  Rows_sent: 3  Rows_examined: 1180834
SET timestamp=1630015399;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20905' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20905' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:03:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1198  Schema: my_database  QC_hit: No
# Query_time: 2.211823  Lock_time: 0.000198  Rows_sent: 3  Rows_examined: 479398
SET timestamp=1630015402;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19346' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19346' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1196  Schema: my_database  QC_hit: No
# Query_time: 2.597078  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 575588
SET timestamp=1630015402;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23176' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23176' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:03:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1200  Schema: my_database  QC_hit: No
# Query_time: 1.288771  Lock_time: 0.000337  Rows_sent: 3  Rows_examined: 509080
SET timestamp=1630015413;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3053' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3053' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:04:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1218  Schema: my_database  QC_hit: No
# Query_time: 2.909027  Lock_time: 0.000208  Rows_sent: 3  Rows_examined: 1082430
SET timestamp=1630015440;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7334' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7334' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:04:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1246  Schema: my_database  QC_hit: No
# Query_time: 1.356873  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 479418
SET timestamp=1630015488;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20738' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20738' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:06:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1308  Schema: my_database  QC_hit: No
# Query_time: 1.173521  Lock_time: 0.000290  Rows_sent: 3  Rows_examined: 436500
SET timestamp=1630015575;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19106' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19106' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:06:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1314  Schema: my_database  QC_hit: No
# Query_time: 2.248033  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 940154
SET timestamp=1630015603;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4584' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4584' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:07:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1324  Schema: my_database  QC_hit: No
# Query_time: 1.727598  Lock_time: 0.000470  Rows_sent: 3  Rows_examined: 377036
SET timestamp=1630015628;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23040' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23040' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1322  Schema: my_database  QC_hit: No
# Query_time: 1.882573  Lock_time: 0.000378  Rows_sent: 3  Rows_examined: 369346
SET timestamp=1630015628;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22137' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22137' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:08:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1368  Schema: my_database  QC_hit: No
# Query_time: 3.629226  Lock_time: 0.000289  Rows_sent: 3  Rows_examined: 830844
SET timestamp=1630015727;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19519' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19519' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:09:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1400  Schema: my_database  QC_hit: No
# Query_time: 1.428334  Lock_time: 0.000198  Rows_sent: 3  Rows_examined: 530673
SET timestamp=1630015774;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12958' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12958' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:11:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1432  Schema: my_database  QC_hit: No
# Query_time: 2.527745  Lock_time: 0.000399  Rows_sent: 3  Rows_examined: 890417
SET timestamp=1630015870;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20266' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20266' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:11:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1434  Schema: my_database  QC_hit: No
# Query_time: 1.043044  Lock_time: 0.000343  Rows_sent: 3  Rows_examined: 343839
SET timestamp=1630015874;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17033' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17033' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:11:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1438  Schema: my_database  QC_hit: No
# Query_time: 2.384644  Lock_time: 0.000230  Rows_sent: 3  Rows_examined: 858701
SET timestamp=1630015909;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13577' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13577' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:12:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1448  Schema: my_database  QC_hit: No
# Query_time: 1.235353  Lock_time: 0.000364  Rows_sent: 3  Rows_examined: 478494
SET timestamp=1630015920;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22602' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22602' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:12:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1454  Schema: my_database  QC_hit: No
# Query_time: 1.208925  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 503073
SET timestamp=1630015932;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22551' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22551' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:12:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1466  Schema: my_database  QC_hit: No
# Query_time: 1.286463  Lock_time: 0.000289  Rows_sent: 3  Rows_examined: 480067
SET timestamp=1630015962;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21266' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21266' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:13:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1482  Schema: my_database  QC_hit: No
# Query_time: 1.143524  Lock_time: 0.000225  Rows_sent: 3  Rows_examined: 483627
SET timestamp=1630015990;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1000' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1000' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:14:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1499  Schema: my_database  QC_hit: No
# Query_time: 1.081595  Lock_time: 0.000276  Rows_sent: 3  Rows_examined: 441801
SET timestamp=1630016053;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17922' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17922' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:15:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1535  Schema: my_database  QC_hit: No
# Query_time: 1.602945  Lock_time: 0.000301  Rows_sent: 3  Rows_examined: 585489
SET timestamp=1630016118;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19676' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19676' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:15:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1537  Schema: my_database  QC_hit: No
# Query_time: 1.006177  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 373633
SET timestamp=1630016120;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7993' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7993' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:15:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1547  Schema: my_database  QC_hit: No
# Query_time: 1.396224  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 500559
SET timestamp=1630016138;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14456' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14456' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:17:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1569  Schema: my_database  QC_hit: No
# Query_time: 1.423771  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 530666
SET timestamp=1630016224;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11430' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11430' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:18:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1599  Schema: my_database  QC_hit: No
# Query_time: 1.063379  Lock_time: 0.000347  Rows_sent: 3  Rows_examined: 531564
SET timestamp=1630016282;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21106' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21106' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:18:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1601  Schema: my_database  QC_hit: No
# Query_time: 1.368620  Lock_time: 0.000230  Rows_sent: 3  Rows_examined: 533804
SET timestamp=1630016289;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9983' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9983' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:18:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1603  Schema: my_database  QC_hit: No
# Query_time: 3.518876  Lock_time: 0.000280  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630016299;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21483' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21483' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:19:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1667  Schema: my_database  QC_hit: No
# Query_time: 1.341040  Lock_time: 0.000366  Rows_sent: 3  Rows_examined: 362914
SET timestamp=1630016365;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6357' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6357' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:20:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1722  Schema: my_database  QC_hit: No
# Query_time: 1.228600  Lock_time: 0.000427  Rows_sent: 3  Rows_examined: 678071
SET timestamp=1630016413;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21568' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21568' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:20:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1726  Schema: my_database  QC_hit: No
# Query_time: 3.295103  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 1273514
SET timestamp=1630016420;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20073' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20073' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:20:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1740  Schema: my_database  QC_hit: No
# Query_time: 1.646397  Lock_time: 0.000336  Rows_sent: 3  Rows_examined: 556071
SET timestamp=1630016433;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23137' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23137' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:20:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1744  Schema: my_database  QC_hit: No
# Query_time: 2.135933  Lock_time: 0.000240  Rows_sent: 3  Rows_examined: 886307
SET timestamp=1630016437;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16976' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16976' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:21:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1756  Schema: my_database  QC_hit: No
# Query_time: 2.075259  Lock_time: 0.000255  Rows_sent: 3  Rows_examined: 752522
SET timestamp=1630016465;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2723' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2723' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:21:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1760  Schema: my_database  QC_hit: No
# Query_time: 2.763793  Lock_time: 0.000312  Rows_sent: 3  Rows_examined: 1092139
SET timestamp=1630016468;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '818' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '818' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:21:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1778  Schema: my_database  QC_hit: No
# Query_time: 1.088808  Lock_time: 0.000306  Rows_sent: 3  Rows_examined: 371666
SET timestamp=1630016497;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23009' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23009' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:22:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1812  Schema: my_database  QC_hit: No
# Query_time: 1.439346  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 594981
SET timestamp=1630016570;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17695' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17695' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:23:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1836  Schema: my_database  QC_hit: No
# Query_time: 2.075658  Lock_time: 0.000249  Rows_sent: 3  Rows_examined: 764996
SET timestamp=1630016623;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '463' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '463' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:27:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1897  Schema: my_database  QC_hit: No
# Query_time: 1.207076  Lock_time: 0.000346  Rows_sent: 3  Rows_examined: 492174
SET timestamp=1630016823;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19542' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19542' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:27:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1907  Schema: my_database  QC_hit: No
# Query_time: 1.358117  Lock_time: 0.000345  Rows_sent: 3  Rows_examined: 500722
SET timestamp=1630016840;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14259' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14259' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:30:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1955  Schema: my_database  QC_hit: No
# Query_time: 1.097301  Lock_time: 0.000317  Rows_sent: 3  Rows_examined: 447977
SET timestamp=1630017013;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5767' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5767' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:30:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1963  Schema: my_database  QC_hit: No
# Query_time: 1.647535  Lock_time: 0.000208  Rows_sent: 3  Rows_examined: 440573
SET timestamp=1630017040;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7626' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7626' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:32:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 1989  Schema: my_database  QC_hit: No
# Query_time: 2.173509  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 836090
SET timestamp=1630017120;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1893' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1893' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:32:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2009  Schema: my_database  QC_hit: No
# Query_time: 1.349461  Lock_time: 0.000240  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630017170;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11746' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11746' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:33:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2015  Schema: my_database  QC_hit: No
# Query_time: 1.095346  Lock_time: 0.000202  Rows_sent: 3  Rows_examined: 421961
SET timestamp=1630017208;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21507' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21507' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:35:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2060  Schema: my_database  QC_hit: No
# Query_time: 1.093805  Lock_time: 0.000288  Rows_sent: 3  Rows_examined: 375311
SET timestamp=1630017318;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14193' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14193' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:35:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2088  Schema: my_database  QC_hit: No
# Query_time: 3.275798  Lock_time: 0.000210  Rows_sent: 3  Rows_examined: 1282028
SET timestamp=1630017352;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15336' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15336' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:36:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2140  Schema: my_database  QC_hit: No
# Query_time: 1.813729  Lock_time: 0.000427  Rows_sent: 3  Rows_examined: 683919
SET timestamp=1630017411;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19457' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19457' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:37:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2154  Schema: my_database  QC_hit: No
# Query_time: 4.957053  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630017429;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21468' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21468' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:37:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2159  Schema: my_database  QC_hit: No
# Query_time: 1.069213  Lock_time: 0.000292  Rows_sent: 3  Rows_examined: 439774
SET timestamp=1630017435;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13933' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13933' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:37:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2181  Schema: my_database  QC_hit: No
# Query_time: 1.299536  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 530903
SET timestamp=1630017449;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21095' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21095' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:37:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2189  Schema: my_database  QC_hit: No
# Query_time: 1.719764  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 718178
SET timestamp=1630017456;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '519' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '519' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:38:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2215  Schema: my_database  QC_hit: No
# Query_time: 1.021707  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630017490;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14090' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14090' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:38:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2221  Schema: my_database  QC_hit: No
# Query_time: 1.955122  Lock_time: 0.000223  Rows_sent: 3  Rows_examined: 474435
SET timestamp=1630017498;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23209' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23209' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:38:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2241  Schema: my_database  QC_hit: No
# Query_time: 1.512195  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 584103
SET timestamp=1630017513;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19765' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19765' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:38:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2253  Schema: my_database  QC_hit: No
# Query_time: 3.800137  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 1181634
SET timestamp=1630017525;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21418' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21418' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:38:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2256  Schema: my_database  QC_hit: No
# Query_time: 1.061201  Lock_time: 0.000293  Rows_sent: 3  Rows_examined: 325070
SET timestamp=1630017527;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8645' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8645' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:39:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2269  Schema: my_database  QC_hit: No
# Query_time: 1.399453  Lock_time: 0.000287  Rows_sent: 3  Rows_examined: 570914
SET timestamp=1630017540;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16597' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16597' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:39:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2282  Schema: my_database  QC_hit: No
# Query_time: 1.193021  Lock_time: 0.000280  Rows_sent: 3  Rows_examined: 675502
SET timestamp=1630017549;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21555' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21555' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:39:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2314  Schema: my_database  QC_hit: No
# Query_time: 4.190793  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 1666067
SET timestamp=1630017584;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21512' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21512' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:40:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2387  Schema: my_database  QC_hit: No
# Query_time: 1.705130  Lock_time: 0.000200  Rows_sent: 3  Rows_examined: 717232
SET timestamp=1630017645;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3862' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3862' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:40:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2395  Schema: my_database  QC_hit: No
# Query_time: 1.763617  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 677364
SET timestamp=1630017655;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21552' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21552' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:41:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2402  Schema: my_database  QC_hit: No
# Query_time: 1.269967  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 439774
SET timestamp=1630017663;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13938' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13938' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:41:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2414  Schema: my_database  QC_hit: No
# Query_time: 2.427485  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 783044
SET timestamp=1630017685;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '880' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '880' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:41:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2416  Schema: my_database  QC_hit: No
# Query_time: 2.362405  Lock_time: 0.000271  Rows_sent: 3  Rows_examined: 929814
SET timestamp=1630017688;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22744' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22744' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:41:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2425  Schema: my_database  QC_hit: No
# Query_time: 2.285800  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 849861
SET timestamp=1630017696;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16978' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16978' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:41:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2448  Schema: my_database  QC_hit: No
# Query_time: 1.404059  Lock_time: 0.000279  Rows_sent: 3  Rows_examined: 383235
SET timestamp=1630017717;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5163' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5163' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:41:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2450  Schema: my_database  QC_hit: No
# Query_time: 1.213787  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 362653
SET timestamp=1630017718;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23092' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23092' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:42:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2462  Schema: my_database  QC_hit: No
# Query_time: 1.206184  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 677364
SET timestamp=1630017727;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21537' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21537' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:42:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2471  Schema: my_database  QC_hit: No
# Query_time: 1.158585  Lock_time: 0.000266  Rows_sent: 3  Rows_examined: 676616
SET timestamp=1630017744;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21554' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21554' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:42:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2474  Schema: my_database  QC_hit: No
# Query_time: 3.199443  Lock_time: 0.000243  Rows_sent: 3  Rows_examined: 1181527
SET timestamp=1630017756;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16005' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16005' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:43:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2492  Schema: my_database  QC_hit: No
# Query_time: 1.483166  Lock_time: 0.000312  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630017787;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12141' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12141' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:43:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2495  Schema: my_database  QC_hit: No
# Query_time: 1.168825  Lock_time: 0.000221  Rows_sent: 3  Rows_examined: 432234
SET timestamp=1630017795;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13967' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13967' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:43:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2503  Schema: my_database  QC_hit: No
# Query_time: 2.538127  Lock_time: 0.000345  Rows_sent: 3  Rows_examined: 830080
SET timestamp=1630017805;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17720' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17720' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:43:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2523  Schema: my_database  QC_hit: No
# Query_time: 3.605307  Lock_time: 0.000286  Rows_sent: 3  Rows_examined: 1271432
SET timestamp=1630017827;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20053' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20053' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:44:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2534  Schema: my_database  QC_hit: No
# Query_time: 3.955615  Lock_time: 0.000334  Rows_sent: 3  Rows_examined: 1181527
SET timestamp=1630017841;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14400' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14400' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:44:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2541  Schema: my_database  QC_hit: No
# Query_time: 1.528740  Lock_time: 0.000241  Rows_sent: 3  Rows_examined: 362653
SET timestamp=1630017844;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23092' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23092' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:44:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2543  Schema: my_database  QC_hit: No
# Query_time: 3.096036  Lock_time: 0.000321  Rows_sent: 3  Rows_examined: 890411
SET timestamp=1630017848;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20106' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20106' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:44:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2564  Schema: my_database  QC_hit: No
# Query_time: 1.159613  Lock_time: 0.000313  Rows_sent: 3  Rows_examined: 441260
SET timestamp=1630017870;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19788' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19788' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:44:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2567  Schema: my_database  QC_hit: No
# Query_time: 2.131979  Lock_time: 0.000445  Rows_sent: 3  Rows_examined: 765658
SET timestamp=1630017876;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4874' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4874' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:44:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2574  Schema: my_database  QC_hit: No
# Query_time: 1.088659  Lock_time: 0.000292  Rows_sent: 3  Rows_examined: 447977
SET timestamp=1630017881;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5751' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5751' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:44:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2583  Schema: my_database  QC_hit: No
# Query_time: 1.303236  Lock_time: 0.000186  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630017899;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19811' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19811' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:47:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2707  Schema: my_database  QC_hit: No
# Query_time: 1.459979  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 479540
SET timestamp=1630018072;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20402' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20402' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:48:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2752  Schema: my_database  QC_hit: No
# Query_time: 1.337967  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 480034
SET timestamp=1630018139;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17817' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17817' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:49:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2786  Schema: my_database  QC_hit: No
# Query_time: 3.010267  Lock_time: 0.000210  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630018192;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21397' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21397' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:50:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2816  Schema: my_database  QC_hit: No
# Query_time: 2.832268  Lock_time: 0.000198  Rows_sent: 3  Rows_examined: 1051635
SET timestamp=1630018235;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18013' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18013' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:51:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2837  Schema: my_database  QC_hit: No
# Query_time: 2.053130  Lock_time: 0.000324  Rows_sent: 3  Rows_examined: 683919
SET timestamp=1630018266;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19460' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19460' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:51:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2856  Schema: my_database  QC_hit: No
# Query_time: 1.327502  Lock_time: 0.000344  Rows_sent: 3  Rows_examined: 373672
SET timestamp=1630018285;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5356' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5356' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:52:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2883  Schema: my_database  QC_hit: No
# Query_time: 1.982487  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 717482
SET timestamp=1630018349;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '516' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '516' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:53:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2908  Schema: my_database  QC_hit: No
# Query_time: 1.149423  Lock_time: 0.000219  Rows_sent: 3  Rows_examined: 447132
SET timestamp=1630018405;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6198' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6198' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:54:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2934  Schema: my_database  QC_hit: No
# Query_time: 1.959494  Lock_time: 0.000228  Rows_sent: 3  Rows_examined: 528227
SET timestamp=1630018456;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3115' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3115' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:56:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2997  Schema: my_database  QC_hit: No
# Query_time: 1.317626  Lock_time: 0.000235  Rows_sent: 3  Rows_examined: 500735
SET timestamp=1630018567;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14342' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14342' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:56:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 2999  Schema: my_database  QC_hit: No
# Query_time: 2.553220  Lock_time: 0.000212  Rows_sent: 3  Rows_examined: 1029232
SET timestamp=1630018570;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18106' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18106' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:56:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3011  Schema: my_database  QC_hit: No
# Query_time: 2.674676  Lock_time: 0.000217  Rows_sent: 3  Rows_examined: 1029235
SET timestamp=1630018592;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23168' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23168' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:56:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3016  Schema: my_database  QC_hit: No
# Query_time: 1.964797  Lock_time: 0.000452  Rows_sent: 3  Rows_examined: 441858
SET timestamp=1630018595;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22970' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22970' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3013  Schema: my_database  QC_hit: No
# Query_time: 2.420618  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 583483
SET timestamp=1630018595;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19761' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19761' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:56:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3027  Schema: my_database  QC_hit: No
# Query_time: 1.586529  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 597715
SET timestamp=1630018603;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14707' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14707' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:56:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3030  Schema: my_database  QC_hit: No
# Query_time: 1.816190  Lock_time: 0.000195  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630018611;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13030' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13030' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:57:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3051  Schema: my_database  QC_hit: No
# Query_time: 2.288653  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 751699
SET timestamp=1630018639;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7621' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7621' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:57:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3064  Schema: my_database  QC_hit: No
# Query_time: 1.043157  Lock_time: 0.000394  Rows_sent: 3  Rows_examined: 515671
SET timestamp=1630018666;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15568' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15568' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:58:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3099  Schema: my_database  QC_hit: No
# Query_time: 1.285721  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 366063
SET timestamp=1630018725;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18888' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18888' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  1:59:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3117  Schema: my_database  QC_hit: No
# Query_time: 1.280081  Lock_time: 0.000335  Rows_sent: 3  Rows_examined: 489533
SET timestamp=1630018750;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2316' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2316' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:00:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3141  Schema: my_database  QC_hit: No
# Query_time: 4.634719  Lock_time: 0.000362  Rows_sent: 3  Rows_examined: 1531475
SET timestamp=1630018808;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17603' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17603' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:00:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3147  Schema: my_database  QC_hit: No
# Query_time: 1.492945  Lock_time: 0.000326  Rows_sent: 3  Rows_examined: 479993
SET timestamp=1630018823;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17818' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17818' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:02:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3185  Schema: my_database  QC_hit: No
# Query_time: 1.225825  Lock_time: 0.000310  Rows_sent: 3  Rows_examined: 434199
SET timestamp=1630018929;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22221' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22221' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:02:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3189  Schema: my_database  QC_hit: No
# Query_time: 1.161538  Lock_time: 0.000357  Rows_sent: 3  Rows_examined: 317040
SET timestamp=1630018932;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17861' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17861' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:02:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3193  Schema: my_database  QC_hit: No
# Query_time: 2.466686  Lock_time: 0.000197  Rows_sent: 3  Rows_examined: 873155
SET timestamp=1630018939;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3101' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3101' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:02:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3203  Schema: my_database  QC_hit: No
# Query_time: 3.352872  Lock_time: 0.000241  Rows_sent: 3  Rows_examined: 1180785
SET timestamp=1630018947;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21475' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21475' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:03:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3227  Schema: my_database  QC_hit: No
# Query_time: 1.862021  Lock_time: 0.000223  Rows_sent: 3  Rows_examined: 765615
SET timestamp=1630019021;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5137' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5137' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:04:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3245  Schema: my_database  QC_hit: No
# Query_time: 1.693858  Lock_time: 0.000253  Rows_sent: 3  Rows_examined: 601518
SET timestamp=1630019074;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14709' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14709' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:05:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3257  Schema: my_database  QC_hit: No
# Query_time: 1.088779  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 427646
SET timestamp=1630019100;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13450' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13450' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:05:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3261  Schema: my_database  QC_hit: No
# Query_time: 1.404474  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 479385
SET timestamp=1630019118;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20376' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20376' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:05:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3271  Schema: my_database  QC_hit: No
# Query_time: 1.349549  Lock_time: 0.000242  Rows_sent: 3  Rows_examined: 325070
SET timestamp=1630019149;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8647' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8647' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3273  Schema: my_database  QC_hit: No
# Query_time: 1.367748  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 343610
SET timestamp=1630019149;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2196' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2196' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:06:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3291  Schema: my_database  QC_hit: No
# Query_time: 2.297199  Lock_time: 0.000221  Rows_sent: 3  Rows_examined: 891239
SET timestamp=1630019219;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20118' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20118' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:07:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3341  Schema: my_database  QC_hit: No
# Query_time: 2.979776  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 826802
SET timestamp=1630019277;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14646' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14646' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:08:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3389  Schema: my_database  QC_hit: No
# Query_time: 1.065139  Lock_time: 0.000318  Rows_sent: 3  Rows_examined: 358187
SET timestamp=1630019325;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23036' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23036' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:09:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3413  Schema: my_database  QC_hit: No
# Query_time: 1.633067  Lock_time: 0.000268  Rows_sent: 3  Rows_examined: 675011
SET timestamp=1630019345;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9845' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9845' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:09:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3425  Schema: my_database  QC_hit: No
# Query_time: 1.130860  Lock_time: 0.000268  Rows_sent: 3  Rows_examined: 436599
SET timestamp=1630019355;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19097' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19097' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:09:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3429  Schema: my_database  QC_hit: No
# Query_time: 1.279339  Lock_time: 0.000195  Rows_sent: 3  Rows_examined: 530626
SET timestamp=1630019365;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12235' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12235' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:10:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3447  Schema: my_database  QC_hit: No
# Query_time: 3.088618  Lock_time: 0.000403  Rows_sent: 3  Rows_examined: 1040238
SET timestamp=1630019407;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14601' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14601' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:10:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3457  Schema: my_database  QC_hit: No
# Query_time: 1.108214  Lock_time: 0.000441  Rows_sent: 3  Rows_examined: 395370
SET timestamp=1630019445;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7661' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7661' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:10:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3459  Schema: my_database  QC_hit: No
# Query_time: 2.739808  Lock_time: 0.000208  Rows_sent: 3  Rows_examined: 1082420
SET timestamp=1630019452;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7335' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7335' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:11:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3473  Schema: my_database  QC_hit: No
# Query_time: 1.285305  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 484582
SET timestamp=1630019500;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1023' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1023' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:12:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3485  Schema: my_database  QC_hit: No
# Query_time: 3.595265  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 1051802
SET timestamp=1630019523;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18015' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18015' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:13:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3511  Schema: my_database  QC_hit: No
# Query_time: 1.208301  Lock_time: 0.000287  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630019588;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19826' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19826' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:13:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3517  Schema: my_database  QC_hit: No
# Query_time: 1.503247  Lock_time: 0.000347  Rows_sent: 3  Rows_examined: 479355
SET timestamp=1630019610;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20363' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20363' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:15:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3551  Schema: my_database  QC_hit: No
# Query_time: 1.438166  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 500729
SET timestamp=1630019738;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14332' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14332' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:16:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3567  Schema: my_database  QC_hit: No
# Query_time: 1.099578  Lock_time: 0.000199  Rows_sent: 3  Rows_examined: 478529
SET timestamp=1630019786;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3062' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3062' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:17:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3593  Schema: my_database  QC_hit: No
# Query_time: 3.613387  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 1272099
SET timestamp=1630019877;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20027' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20027' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:21:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3659  Schema: my_database  QC_hit: No
# Query_time: 1.309857  Lock_time: 0.000346  Rows_sent: 3  Rows_examined: 479404
SET timestamp=1630020071;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7878' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7878' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:21:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3669  Schema: my_database  QC_hit: No
# Query_time: 1.551892  Lock_time: 0.000198  Rows_sent: 3  Rows_examined: 619504
SET timestamp=1630020079;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10234' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10234' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:22:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3689  Schema: my_database  QC_hit: No
# Query_time: 1.166321  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 373263
SET timestamp=1630020152;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22153' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22153' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:22:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3695  Schema: my_database  QC_hit: No
# Query_time: 2.810177  Lock_time: 0.000358  Rows_sent: 3  Rows_examined: 806897
SET timestamp=1630020159;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18844' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18844' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:23:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3737  Schema: my_database  QC_hit: No
# Query_time: 1.606905  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 436224
SET timestamp=1630020222;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21309' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21309' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:23:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3739  Schema: my_database  QC_hit: No
# Query_time: 1.013951  Lock_time: 0.000238  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630020225;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  2:23:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3743  Schema: my_database  QC_hit: No
# Query_time: 2.947324  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 891213
SET timestamp=1630020227;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20121' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20121' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:24:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3757  Schema: my_database  QC_hit: No
# Query_time: 1.741727  Lock_time: 0.000215  Rows_sent: 3  Rows_examined: 479515
SET timestamp=1630020242;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20853' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20853' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:24:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3761  Schema: my_database  QC_hit: No
# Query_time: 1.013673  Lock_time: 0.000348  Rows_sent: 3  Rows_examined: 320615
SET timestamp=1630020244;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18853' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18853' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:24:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3771  Schema: my_database  QC_hit: No
# Query_time: 1.035238  Lock_time: 0.000250  Rows_sent: 3  Rows_examined: 351947
SET timestamp=1630020254;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23041' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23041' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:24:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3783  Schema: my_database  QC_hit: No
# Query_time: 1.261034  Lock_time: 0.000477  Rows_sent: 3  Rows_examined: 483627
SET timestamp=1630020263;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1021' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1021' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:24:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3789  Schema: my_database  QC_hit: No
# Query_time: 2.609532  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 1067687
SET timestamp=1630020274;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4587' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4587' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:24:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3793  Schema: my_database  QC_hit: No
# Query_time: 2.503647  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 836090
SET timestamp=1630020280;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '901' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '901' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:25:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3835  Schema: my_database  QC_hit: No
# Query_time: 1.531204  Lock_time: 0.000318  Rows_sent: 3  Rows_examined: 500722
SET timestamp=1630020324;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14341' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14341' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:25:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3843  Schema: my_database  QC_hit: No
# Query_time: 3.066263  Lock_time: 0.000188  Rows_sent: 3  Rows_examined: 891213
SET timestamp=1630020336;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20279' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20279' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:25:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3887  Schema: my_database  QC_hit: No
# Query_time: 1.756871  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 626444
SET timestamp=1630020359;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8833' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8833' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3893  Schema: my_database  QC_hit: No
# Query_time: 1.164473  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 355062
SET timestamp=1630020361;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15081' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15081' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3899  Schema: my_database  QC_hit: No
# Query_time: 4.051488  Lock_time: 0.000276  Rows_sent: 3  Rows_examined: 1029235
SET timestamp=1630020366;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23167' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23167' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3905  Schema: my_database  QC_hit: No
# Query_time: 1.976061  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 627042
SET timestamp=1630020370;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8830' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8830' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3909  Schema: my_database  QC_hit: No
# Query_time: 1.098717  Lock_time: 0.000248  Rows_sent: 3  Rows_examined: 362180
SET timestamp=1630020371;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15002' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15002' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3911  Schema: my_database  QC_hit: No
# Query_time: 1.827210  Lock_time: 0.000361  Rows_sent: 3  Rows_examined: 626446
SET timestamp=1630020374;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8836' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8836' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3915  Schema: my_database  QC_hit: No
# Query_time: 2.241859  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 626452
SET timestamp=1630020377;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8835' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8835' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3921  Schema: my_database  QC_hit: No
# Query_time: 2.745139  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 1029235
SET timestamp=1630020381;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23168' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23168' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3925  Schema: my_database  QC_hit: No
# Query_time: 2.978036  Lock_time: 0.000377  Rows_sent: 3  Rows_examined: 1029235
SET timestamp=1630020385;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19493' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19493' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3929  Schema: my_database  QC_hit: No
# Query_time: 1.353506  Lock_time: 0.000302  Rows_sent: 3  Rows_examined: 375208
SET timestamp=1630020387;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13955' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13955' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3933  Schema: my_database  QC_hit: No
# Query_time: 1.058056  Lock_time: 0.000217  Rows_sent: 3  Rows_examined: 216654
SET timestamp=1630020391;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14044' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14044' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3935  Schema: my_database  QC_hit: No
# Query_time: 2.730104  Lock_time: 0.000305  Rows_sent: 3  Rows_examined: 626446
SET timestamp=1630020392;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8837' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8837' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3939  Schema: my_database  QC_hit: No
# Query_time: 3.065237  Lock_time: 0.000200  Rows_sent: 3  Rows_examined: 763233
SET timestamp=1630020396;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18028' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18028' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3941  Schema: my_database  QC_hit: No
# Query_time: 2.712945  Lock_time: 0.000235  Rows_sent: 3  Rows_examined: 626446
SET timestamp=1630020396;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8837' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8837' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3943  Schema: my_database  QC_hit: No
# Query_time: 1.004789  Lock_time: 0.000204  Rows_sent: 3  Rows_examined: 334914
SET timestamp=1630020398;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22978' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22978' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3945  Schema: my_database  QC_hit: No
# Query_time: 1.718195  Lock_time: 0.000291  Rows_sent: 3  Rows_examined: 613105
SET timestamp=1630020399;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9963' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9963' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:26:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3965  Schema: my_database  QC_hit: No
# Query_time: 1.030186  Lock_time: 0.000296  Rows_sent: 3  Rows_examined: 376809
SET timestamp=1630020414;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14024' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14024' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:27:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3979  Schema: my_database  QC_hit: No
# Query_time: 1.028613  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 371215
SET timestamp=1630020429;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18927' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18927' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:27:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3991  Schema: my_database  QC_hit: No
# Query_time: 1.920227  Lock_time: 0.000291  Rows_sent: 3  Rows_examined: 764121
SET timestamp=1630020439;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10002' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10002' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:27:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3993  Schema: my_database  QC_hit: No
# Query_time: 1.041458  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 441917
SET timestamp=1630020442;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15031' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15031' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:27:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 3995  Schema: my_database  QC_hit: No
# Query_time: 1.418169  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 480067
SET timestamp=1630020446;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20619' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20619' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:27:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4007  Schema: my_database  QC_hit: No
# Query_time: 2.026119  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 826879
SET timestamp=1630020461;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14614' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14614' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:27:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4011  Schema: my_database  QC_hit: No
# Query_time: 2.760176  Lock_time: 0.000320  Rows_sent: 3  Rows_examined: 752500
SET timestamp=1630020475;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8873' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8873' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:27:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4015  Schema: my_database  QC_hit: No
# Query_time: 1.504519  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 553993
SET timestamp=1630020477;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '176' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '176' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:28:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4019  Schema: my_database  QC_hit: No
# Query_time: 2.688017  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 651221
SET timestamp=1630020509;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8834' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8834' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:28:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4023  Schema: my_database  QC_hit: No
# Query_time: 2.348351  Lock_time: 0.000321  Rows_sent: 3  Rows_examined: 860653
SET timestamp=1630020513;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13361' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13361' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:28:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4027  Schema: my_database  QC_hit: No
# Query_time: 2.457262  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 860641
SET timestamp=1630020516;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13367' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13367' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:28:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4031  Schema: my_database  QC_hit: No
# Query_time: 1.655959  Lock_time: 0.000328  Rows_sent: 3  Rows_examined: 567091
SET timestamp=1630020519;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23054' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23054' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:28:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4037  Schema: my_database  QC_hit: No
# Query_time: 1.525029  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 586604
SET timestamp=1630020522;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4886' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4886' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:28:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4039  Schema: my_database  QC_hit: No
# Query_time: 1.587199  Lock_time: 0.000225  Rows_sent: 3  Rows_examined: 650918
SET timestamp=1630020529;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13362' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13362' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:28:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4045  Schema: my_database  QC_hit: No
# Query_time: 1.774258  Lock_time: 0.000258  Rows_sent: 3  Rows_examined: 627226
SET timestamp=1630020539;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8829' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8829' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:30:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4077  Schema: my_database  QC_hit: No
# Query_time: 1.097875  Lock_time: 0.000288  Rows_sent: 3  Rows_examined: 406473
SET timestamp=1630020623;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16797' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16797' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:31:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4119  Schema: my_database  QC_hit: No
# Query_time: 1.753189  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 610583
SET timestamp=1630020677;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9858' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9858' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:31:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4127  Schema: my_database  QC_hit: No
# Query_time: 1.224242  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 480067
SET timestamp=1630020686;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20018' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20018' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:31:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4129  Schema: my_database  QC_hit: No
# Query_time: 1.028092  Lock_time: 0.000285  Rows_sent: 3  Rows_examined: 412717
SET timestamp=1630020697;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22974' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22974' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:31:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4131  Schema: my_database  QC_hit: No
# Query_time: 1.111165  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 363706
SET timestamp=1630020700;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15464' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15464' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:31:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4137  Schema: my_database  QC_hit: No
# Query_time: 2.176180  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 500559
SET timestamp=1630020705;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14449' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14449' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4139  Schema: my_database  QC_hit: No
# Query_time: 2.726837  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 584595
SET timestamp=1630020705;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18108' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18108' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:31:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4141  Schema: my_database  QC_hit: No
# Query_time: 2.508282  Lock_time: 0.000226  Rows_sent: 3  Rows_examined: 1029229
SET timestamp=1630020709;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23162' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23162' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:31:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4149  Schema: my_database  QC_hit: No
# Query_time: 2.855856  Lock_time: 0.000198  Rows_sent: 3  Rows_examined: 1029220
SET timestamp=1630020716;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18107' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18107' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:31:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4151  Schema: my_database  QC_hit: No
# Query_time: 1.715559  Lock_time: 0.000193  Rows_sent: 3  Rows_examined: 375211
SET timestamp=1630020719;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14112' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14112' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:32:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4155  Schema: my_database  QC_hit: No
# Query_time: 3.496612  Lock_time: 0.000250  Rows_sent: 3  Rows_examined: 1029235
SET timestamp=1630020721;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23163' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23163' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:32:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4157  Schema: my_database  QC_hit: No
# Query_time: 2.896441  Lock_time: 0.000322  Rows_sent: 3  Rows_examined: 978136
SET timestamp=1630020725;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1961' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1961' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:32:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4165  Schema: my_database  QC_hit: No
# Query_time: 4.381542  Lock_time: 0.000192  Rows_sent: 3  Rows_examined: 849803
SET timestamp=1630020737;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16973' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16973' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4167  Schema: my_database  QC_hit: No
# Query_time: 4.426633  Lock_time: 0.000213  Rows_sent: 3  Rows_examined: 860647
SET timestamp=1630020737;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13364' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13364' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:32:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4169  Schema: my_database  QC_hit: No
# Query_time: 2.985680  Lock_time: 0.000319  Rows_sent: 3  Rows_examined: 977787
SET timestamp=1630020741;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1955' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1955' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:32:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4175  Schema: my_database  QC_hit: No
# Query_time: 1.841632  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 588174
SET timestamp=1630020747;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21614' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21614' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:33:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4189  Schema: my_database  QC_hit: No
# Query_time: 1.148607  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 429061
SET timestamp=1630020781;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18335' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18335' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:33:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4197  Schema: my_database  QC_hit: No
# Query_time: 1.483245  Lock_time: 0.000220  Rows_sent: 3  Rows_examined: 585515
SET timestamp=1630020817;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22973' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22973' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:33:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4199  Schema: my_database  QC_hit: No
# Query_time: 1.339246  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630020819;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7952' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7952' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:33:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4203  Schema: my_database  QC_hit: No
# Query_time: 2.478951  Lock_time: 0.000276  Rows_sent: 3  Rows_examined: 860658
SET timestamp=1630020825;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13359' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13359' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4217  Schema: my_database  QC_hit: No
# Query_time: 3.083631  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 860652
SET timestamp=1630020843;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13368' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13368' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4219  Schema: my_database  QC_hit: No
# Query_time: 1.683714  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630020845;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13997' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13997' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4221  Schema: my_database  QC_hit: No
# Query_time: 3.022282  Lock_time: 0.000343  Rows_sent: 3  Rows_examined: 860659
SET timestamp=1630020847;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13358' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13358' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4223  Schema: my_database  QC_hit: No
# Query_time: 1.737533  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 583483
SET timestamp=1630020850;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4884' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4884' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4227  Schema: my_database  QC_hit: No
# Query_time: 1.109535  Lock_time: 0.000253  Rows_sent: 3  Rows_examined: 431173
SET timestamp=1630020852;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22456' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22456' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4229  Schema: my_database  QC_hit: No
# Query_time: 1.355494  Lock_time: 0.000194  Rows_sent: 3  Rows_examined: 569946
SET timestamp=1630020856;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4054' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4054' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4235  Schema: my_database  QC_hit: No
# Query_time: 1.773630  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 650953
SET timestamp=1630020863;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4887' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4887' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4237  Schema: my_database  QC_hit: No
# Query_time: 1.070538  Lock_time: 0.000421  Rows_sent: 3  Rows_examined: 421010
SET timestamp=1630020866;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21719' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21719' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:34:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4247  Schema: my_database  QC_hit: No
# Query_time: 1.870357  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 637229
SET timestamp=1630020877;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22031' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22031' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:35:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4257  Schema: my_database  QC_hit: No
# Query_time: 1.646769  Lock_time: 0.000196  Rows_sent: 3  Rows_examined: 637241
SET timestamp=1630020900;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22030' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22030' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:36:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4277  Schema: my_database  QC_hit: No
# Query_time: 2.134422  Lock_time: 0.000202  Rows_sent: 3  Rows_examined: 858700
SET timestamp=1630021002;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13572' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13572' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:36:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4281  Schema: my_database  QC_hit: No
# Query_time: 3.165674  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 1029241
SET timestamp=1630021013;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23164' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23164' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:36:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4287  Schema: my_database  QC_hit: No
# Query_time: 2.369117  Lock_time: 0.000240  Rows_sent: 3  Rows_examined: 447870
SET timestamp=1630021016;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5920' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5920' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:36:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4285  Schema: my_database  QC_hit: No
# Query_time: 3.904180  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 1029235
SET timestamp=1630021018;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23165' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23165' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4289  Schema: my_database  QC_hit: No
# Query_time: 1.443783  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 584661
SET timestamp=1630021020;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18111' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18111' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4291  Schema: my_database  QC_hit: No
# Query_time: 1.574699  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 586557
SET timestamp=1630021024;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23166' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23166' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4299  Schema: my_database  QC_hit: No
# Query_time: 2.867555  Lock_time: 0.000430  Rows_sent: 3  Rows_examined: 1029229
SET timestamp=1630021031;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23169' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23169' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4301  Schema: my_database  QC_hit: No
# Query_time: 2.234005  Lock_time: 0.000301  Rows_sent: 3  Rows_examined: 598689
SET timestamp=1630021035;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8838' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8838' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4307  Schema: my_database  QC_hit: No
# Query_time: 1.776512  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 599797
SET timestamp=1630021038;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21720' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21720' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4311  Schema: my_database  QC_hit: No
# Query_time: 1.450824  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 602989
SET timestamp=1630021042;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19004' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19004' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4313  Schema: my_database  QC_hit: No
# Query_time: 1.512616  Lock_time: 0.000196  Rows_sent: 3  Rows_examined: 584289
SET timestamp=1630021044;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23050' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23050' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4321  Schema: my_database  QC_hit: No
# Query_time: 2.154428  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 530666
SET timestamp=1630021053;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11455' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11455' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4343  Schema: my_database  QC_hit: No
# Query_time: 1.969915  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 365257
SET timestamp=1630021070;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19750' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19750' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:37:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4345  Schema: my_database  QC_hit: No
# Query_time: 4.103671  Lock_time: 0.000194  Rows_sent: 3  Rows_examined: 1029594
SET timestamp=1630021071;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18116' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18116' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:38:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4375  Schema: my_database  QC_hit: No
# Query_time: 1.475473  Lock_time: 0.000220  Rows_sent: 3  Rows_examined: 585334
SET timestamp=1630021131;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22039' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22039' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:39:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4381  Schema: my_database  QC_hit: No
# Query_time: 3.421204  Lock_time: 0.000228  Rows_sent: 3  Rows_examined: 859530
SET timestamp=1630021143;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3690' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3690' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:39:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4385  Schema: my_database  QC_hit: No
# Query_time: 1.772747  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 601727
SET timestamp=1630021146;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19050' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19050' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:39:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4387  Schema: my_database  QC_hit: No
# Query_time: 1.676823  Lock_time: 0.000343  Rows_sent: 3  Rows_examined: 577450
SET timestamp=1630021149;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13273' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13273' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:39:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4389  Schema: my_database  QC_hit: No
# Query_time: 1.243167  Lock_time: 0.000195  Rows_sent: 3  Rows_examined: 529854
SET timestamp=1630021152;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1994' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1994' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:39:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4403  Schema: my_database  QC_hit: No
# Query_time: 2.546687  Lock_time: 0.000288  Rows_sent: 3  Rows_examined: 836090
SET timestamp=1630021170;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3651' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3651' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:39:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4405  Schema: my_database  QC_hit: No
# Query_time: 1.427150  Lock_time: 0.000292  Rows_sent: 3  Rows_examined: 366300
SET timestamp=1630021172;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2457' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2457' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:39:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4417  Schema: my_database  QC_hit: No
# Query_time: 1.007283  Lock_time: 0.000314  Rows_sent: 3  Rows_examined: 343615
SET timestamp=1630021180;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2199' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2199' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:39:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4423  Schema: my_database  QC_hit: No
# Query_time: 1.196852  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 415127
SET timestamp=1630021190;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1645' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1645' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4429  Schema: my_database  QC_hit: No
# Query_time: 1.161748  Lock_time: 0.000308  Rows_sent: 3  Rows_examined: 365150
SET timestamp=1630021205;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21621' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21621' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4437  Schema: my_database  QC_hit: No
# Query_time: 4.622592  Lock_time: 0.000255  Rows_sent: 3  Rows_examined: 1531567
SET timestamp=1630021222;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17616' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17616' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4441  Schema: my_database  QC_hit: No
# Query_time: 2.266083  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 840883
SET timestamp=1630021225;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4063' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4063' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4443  Schema: my_database  QC_hit: No
# Query_time: 1.897335  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 585334
SET timestamp=1630021235;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22039' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22039' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4453  Schema: my_database  QC_hit: No
# Query_time: 2.583269  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 1029232
SET timestamp=1630021242;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18110' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18110' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4459  Schema: my_database  QC_hit: No
# Query_time: 1.806960  Lock_time: 0.000406  Rows_sent: 3  Rows_examined: 578515
SET timestamp=1630021248;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13272' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13272' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4463  Schema: my_database  QC_hit: No
# Query_time: 2.985394  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 1029220
SET timestamp=1630021253;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18109' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18109' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4465  Schema: my_database  QC_hit: No
# Query_time: 1.656505  Lock_time: 0.000307  Rows_sent: 3  Rows_examined: 577432
SET timestamp=1630021255;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13271' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13271' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:40:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4469  Schema: my_database  QC_hit: No
# Query_time: 1.639822  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 584669
SET timestamp=1630021259;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18124' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18124' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:41:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4471  Schema: my_database  QC_hit: No
# Query_time: 1.832621  Lock_time: 0.000226  Rows_sent: 3  Rows_examined: 564581
SET timestamp=1630021263;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13270' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13270' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:41:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4473  Schema: my_database  QC_hit: No
# Query_time: 1.000703  Lock_time: 0.000223  Rows_sent: 3  Rows_examined: 366986
SET timestamp=1630021264;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9514' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9514' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:41:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4479  Schema: my_database  QC_hit: No
# Query_time: 1.738796  Lock_time: 0.000289  Rows_sent: 3  Rows_examined: 584705
SET timestamp=1630021269;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23052' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23052' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:41:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4491  Schema: my_database  QC_hit: No
# Query_time: 1.443513  Lock_time: 0.000221  Rows_sent: 3  Rows_examined: 583876
SET timestamp=1630021286;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7002' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7002' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:41:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4505  Schema: my_database  QC_hit: No
# Query_time: 2.505806  Lock_time: 0.000239  Rows_sent: 3  Rows_examined: 830174
SET timestamp=1630021310;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7638' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7638' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:42:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4511  Schema: my_database  QC_hit: No
# Query_time: 1.025909  Lock_time: 0.000252  Rows_sent: 3  Rows_examined: 365150
SET timestamp=1630021320;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21621' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21621' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:43:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4533  Schema: my_database  QC_hit: No
# Query_time: 3.120525  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 919894
SET timestamp=1630021382;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23047' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23047' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:43:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4537  Schema: my_database  QC_hit: No
# Query_time: 2.083474  Lock_time: 0.000345  Rows_sent: 3  Rows_examined: 578134
SET timestamp=1630021385;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13275' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13275' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:43:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4541  Schema: my_database  QC_hit: No
# Query_time: 1.019845  Lock_time: 0.000160  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630021389;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  2:43:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4547  Schema: my_database  QC_hit: No
# Query_time: 1.551936  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 586371
SET timestamp=1630021392;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4885' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4885' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:43:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4549  Schema: my_database  QC_hit: No
# Query_time: 1.511546  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 586469
SET timestamp=1630021395;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4881' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4881' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:43:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4559  Schema: my_database  QC_hit: No
# Query_time: 1.498607  Lock_time: 0.000185  Rows_sent: 3  Rows_examined: 586604
SET timestamp=1630021416;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4886' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4886' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:43:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4573  Schema: my_database  QC_hit: No
# Query_time: 2.212798  Lock_time: 0.000333  Rows_sent: 3  Rows_examined: 626444
SET timestamp=1630021433;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8833' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8833' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:44:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4583  Schema: my_database  QC_hit: No
# Query_time: 2.538555  Lock_time: 0.000364  Rows_sent: 3  Rows_examined: 627042
SET timestamp=1630021444;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8830' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8830' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:44:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4585  Schema: my_database  QC_hit: No
# Query_time: 2.486068  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 626446
SET timestamp=1630021447;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8837' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8837' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:44:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4591  Schema: my_database  QC_hit: No
# Query_time: 1.461120  Lock_time: 0.000266  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630021452;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5342' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5342' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:44:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4593  Schema: my_database  QC_hit: No
# Query_time: 2.647829  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 977793
SET timestamp=1630021455;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1958' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1958' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:44:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4605  Schema: my_database  QC_hit: No
# Query_time: 1.852141  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 599272
SET timestamp=1630021471;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22371' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22371' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:44:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4625  Schema: my_database  QC_hit: No
# Query_time: 1.192469  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 427649
SET timestamp=1630021488;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20944' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20944' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:44:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4635  Schema: my_database  QC_hit: No
# Query_time: 1.601763  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 590334
SET timestamp=1630021498;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22730' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22730' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4637  Schema: my_database  QC_hit: No
# Query_time: 2.010112  Lock_time: 0.000198  Rows_sent: 3  Rows_examined: 590674
SET timestamp=1630021502;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22733' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22733' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4641  Schema: my_database  QC_hit: No
# Query_time: 1.966016  Lock_time: 0.000276  Rows_sent: 3  Rows_examined: 599038
SET timestamp=1630021509;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22368' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22368' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4643  Schema: my_database  QC_hit: No
# Query_time: 3.058915  Lock_time: 0.000268  Rows_sent: 3  Rows_examined: 1029206
SET timestamp=1630021513;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18766' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18766' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4645  Schema: my_database  QC_hit: No
# Query_time: 1.015239  Lock_time: 0.000286  Rows_sent: 3  Rows_examined: 408981
SET timestamp=1630021515;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22734' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22734' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4647  Schema: my_database  QC_hit: No
# Query_time: 1.047596  Lock_time: 0.000290  Rows_sent: 3  Rows_examined: 464515
SET timestamp=1630021518;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4927' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4927' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4653  Schema: my_database  QC_hit: No
# Query_time: 3.731496  Lock_time: 0.000200  Rows_sent: 3  Rows_examined: 1180961
SET timestamp=1630021528;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1709' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1709' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4655  Schema: my_database  QC_hit: No
# Query_time: 3.939815  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 1271434
SET timestamp=1630021533;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20057' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20057' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4671  Schema: my_database  QC_hit: No
# Query_time: 4.247132  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 1029232
SET timestamp=1630021551;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18106' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18106' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4675  Schema: my_database  QC_hit: No
# Query_time: 1.499872  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 284922
SET timestamp=1630021553;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8681' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8681' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4677  Schema: my_database  QC_hit: No
# Query_time: 3.698759  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 1029232
SET timestamp=1630021556;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18114' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18114' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4681  Schema: my_database  QC_hit: No
# Query_time: 1.486350  Lock_time: 0.000223  Rows_sent: 3  Rows_examined: 515671
SET timestamp=1630021558;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15568' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15568' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:45:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4683  Schema: my_database  QC_hit: No
# Query_time: 2.297192  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 627812
SET timestamp=1630021559;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8831' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8831' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:46:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4685  Schema: my_database  QC_hit: No
# Query_time: 1.915750  Lock_time: 0.000269  Rows_sent: 3  Rows_examined: 627628
SET timestamp=1630021562;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8832' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8832' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:46:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4687  Schema: my_database  QC_hit: No
# Query_time: 1.727921  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 608802
SET timestamp=1630021569;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4970' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4970' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:46:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4689  Schema: my_database  QC_hit: No
# Query_time: 3.823964  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 704494
SET timestamp=1630021575;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8754' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8754' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4691  Schema: my_database  QC_hit: No
# Query_time: 4.691215  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 1029594
SET timestamp=1630021575;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18121' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18121' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:46:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4693  Schema: my_database  QC_hit: No
# Query_time: 1.043274  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 341923
SET timestamp=1630021577;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17563' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17563' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:46:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4695  Schema: my_database  QC_hit: No
# Query_time: 1.826345  Lock_time: 0.000306  Rows_sent: 3  Rows_examined: 478601
SET timestamp=1630021580;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20533' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20533' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:46:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4701  Schema: my_database  QC_hit: No
# Query_time: 2.318026  Lock_time: 0.000210  Rows_sent: 3  Rows_examined: 977727
SET timestamp=1630021585;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1960' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1960' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:46:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4705  Schema: my_database  QC_hit: No
# Query_time: 1.672089  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 583977
SET timestamp=1630021592;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6916' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6916' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:46:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4725  Schema: my_database  QC_hit: No
# Query_time: 3.798341  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 1181527
SET timestamp=1630021619;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14413' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14413' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:47:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4733  Schema: my_database  QC_hit: No
# Query_time: 3.507840  Lock_time: 0.000350  Rows_sent: 3  Rows_examined: 987350
SET timestamp=1630021623;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22376' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22376' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:47:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4741  Schema: my_database  QC_hit: No
# Query_time: 1.134077  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 406473
SET timestamp=1630021636;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16797' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16797' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:47:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4745  Schema: my_database  QC_hit: No
# Query_time: 1.123969  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 370951
SET timestamp=1630021639;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4064' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4064' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:47:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4755  Schema: my_database  QC_hit: No
# Query_time: 1.138092  Lock_time: 0.000196  Rows_sent: 3  Rows_examined: 468791
SET timestamp=1630021652;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2048' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2048' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:47:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4767  Schema: my_database  QC_hit: No
# Query_time: 1.870055  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630021667;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14099' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14099' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:47:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4777  Schema: my_database  QC_hit: No
# Query_time: 1.007536  Lock_time: 0.000188  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630021673;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14099' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14099' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:49:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4807  Schema: my_database  QC_hit: No
# Query_time: 1.080947  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 352056
SET timestamp=1630021740;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22731' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22731' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:49:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4815  Schema: my_database  QC_hit: No
# Query_time: 1.204805  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 352056
SET timestamp=1630021750;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22731' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22731' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:49:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4819  Schema: my_database  QC_hit: No
# Query_time: 1.235968  Lock_time: 0.000222  Rows_sent: 3  Rows_examined: 441858
SET timestamp=1630021754;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22937' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22937' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:50:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4841  Schema: my_database  QC_hit: No
# Query_time: 1.412855  Lock_time: 0.000228  Rows_sent: 3  Rows_examined: 554166
SET timestamp=1630021800;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22141' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22141' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:50:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4843  Schema: my_database  QC_hit: No
# Query_time: 3.213807  Lock_time: 0.000332  Rows_sent: 3  Rows_examined: 890411
SET timestamp=1630021808;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20231' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20231' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:50:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4853  Schema: my_database  QC_hit: No
# Query_time: 1.377072  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 366233
SET timestamp=1630021832;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7974' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7974' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:50:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4857  Schema: my_database  QC_hit: No
# Query_time: 1.565237  Lock_time: 0.000216  Rows_sent: 3  Rows_examined: 478519
SET timestamp=1630021835;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2371' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2371' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:50:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4867  Schema: my_database  QC_hit: No
# Query_time: 2.082260  Lock_time: 0.000374  Rows_sent: 3  Rows_examined: 376224
SET timestamp=1630021848;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8945' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8945' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:50:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4875  Schema: my_database  QC_hit: No
# Query_time: 2.982286  Lock_time: 0.000230  Rows_sent: 3  Rows_examined: 913247
SET timestamp=1630021854;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3552' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3552' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:51:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4901  Schema: my_database  QC_hit: No
# Query_time: 3.787093  Lock_time: 0.000205  Rows_sent: 3  Rows_examined: 1181616
SET timestamp=1630021880;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21396' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21396' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:51:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4907  Schema: my_database  QC_hit: No
# Query_time: 1.421159  Lock_time: 0.000213  Rows_sent: 3  Rows_examined: 474364
SET timestamp=1630021886;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22795' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22795' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:51:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4917  Schema: my_database  QC_hit: No
# Query_time: 1.155551  Lock_time: 0.000199  Rows_sent: 3  Rows_examined: 479554
SET timestamp=1630021905;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20754' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20754' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:51:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4931  Schema: my_database  QC_hit: No
# Query_time: 2.819018  Lock_time: 0.000335  Rows_sent: 3  Rows_examined: 1019965
SET timestamp=1630021917;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19791' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19791' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:52:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4941  Schema: my_database  QC_hit: No
# Query_time: 1.141128  Lock_time: 0.000266  Rows_sent: 3  Rows_examined: 427638
SET timestamp=1630021957;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21031' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21031' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:52:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4943  Schema: my_database  QC_hit: No
# Query_time: 3.153989  Lock_time: 0.000210  Rows_sent: 3  Rows_examined: 1271300
SET timestamp=1630021964;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20052' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20052' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:52:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4947  Schema: my_database  QC_hit: No
# Query_time: 1.331349  Lock_time: 0.000366  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630021976;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19811' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19811' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:52:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4949  Schema: my_database  QC_hit: No
# Query_time: 1.365464  Lock_time: 0.000382  Rows_sent: 3  Rows_examined: 479398
SET timestamp=1630021978;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7923' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7923' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:53:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4951  Schema: my_database  QC_hit: No
# Query_time: 1.174006  Lock_time: 0.000207  Rows_sent: 3  Rows_examined: 441265
SET timestamp=1630021987;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19786' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19786' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:53:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4959  Schema: my_database  QC_hit: No
# Query_time: 1.186716  Lock_time: 0.000219  Rows_sent: 3  Rows_examined: 376812
SET timestamp=1630022009;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14196' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14196' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:53:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 4969  Schema: my_database  QC_hit: No
# Query_time: 1.779217  Lock_time: 0.000235  Rows_sent: 3  Rows_examined: 607244
SET timestamp=1630022035;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2156' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2156' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:54:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5001  Schema: my_database  QC_hit: No
# Query_time: 4.794312  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 1181527
SET timestamp=1630022080;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14425' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14425' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:54:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5015  Schema: my_database  QC_hit: No
# Query_time: 3.580247  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 764976
SET timestamp=1630022085;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1422' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1422' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:54:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5017  Schema: my_database  QC_hit: No
# Query_time: 2.273683  Lock_time: 0.000184  Rows_sent: 3  Rows_examined: 582146
SET timestamp=1630022088;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19204' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19204' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5021  Schema: my_database  QC_hit: No
# Query_time: 1.818267  Lock_time: 0.000214  Rows_sent: 3  Rows_examined: 455367
SET timestamp=1630022088;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6795' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6795' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:55:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5053  Schema: my_database  QC_hit: No
# Query_time: 1.717676  Lock_time: 0.000206  Rows_sent: 3  Rows_examined: 717390
SET timestamp=1630022113;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3877' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3877' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:56:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5075  Schema: my_database  QC_hit: No
# Query_time: 1.307888  Lock_time: 0.000292  Rows_sent: 3  Rows_examined: 475309
SET timestamp=1630022169;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17042' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17042' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:56:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5083  Schema: my_database  QC_hit: No
# Query_time: 1.772416  Lock_time: 0.000214  Rows_sent: 3  Rows_examined: 475309
SET timestamp=1630022180;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17040' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17040' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:56:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5085  Schema: my_database  QC_hit: No
# Query_time: 1.295844  Lock_time: 0.000359  Rows_sent: 3  Rows_examined: 446236
SET timestamp=1630022182;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6719' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6719' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:56:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5087  Schema: my_database  QC_hit: No
# Query_time: 1.356868  Lock_time: 0.000303  Rows_sent: 3  Rows_examined: 475555
SET timestamp=1630022184;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17039' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17039' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:56:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5107  Schema: my_database  QC_hit: No
# Query_time: 1.319533  Lock_time: 0.000351  Rows_sent: 3  Rows_examined: 475555
SET timestamp=1630022213;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17045' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17045' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:56:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5109  Schema: my_database  QC_hit: No
# Query_time: 1.226023  Lock_time: 0.000213  Rows_sent: 3  Rows_examined: 474072
SET timestamp=1630022216;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17041' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17041' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:57:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5113  Schema: my_database  QC_hit: No
# Query_time: 2.031138  Lock_time: 0.000187  Rows_sent: 3  Rows_examined: 804113
SET timestamp=1630022220;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13193' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13193' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:57:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5123  Schema: my_database  QC_hit: No
# Query_time: 2.181487  Lock_time: 0.000252  Rows_sent: 3  Rows_examined: 804086
SET timestamp=1630022230;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13194' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13194' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:57:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5121  Schema: my_database  QC_hit: No
# Query_time: 1.437429  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 434121
SET timestamp=1630022233;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22275' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22275' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:57:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5131  Schema: my_database  QC_hit: No
# Query_time: 2.163523  Lock_time: 0.000188  Rows_sent: 3  Rows_examined: 858689
SET timestamp=1630022240;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13549' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13549' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:57:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5135  Schema: my_database  QC_hit: No
# Query_time: 2.118102  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 732735
SET timestamp=1630022250;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18007' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18007' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:57:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5145  Schema: my_database  QC_hit: No
# Query_time: 1.757981  Lock_time: 0.000223  Rows_sent: 3  Rows_examined: 441773
SET timestamp=1630022264;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17214' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17214' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5147  Schema: my_database  QC_hit: No
# Query_time: 1.905972  Lock_time: 0.000218  Rows_sent: 3  Rows_examined: 479515
SET timestamp=1630022264;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5344' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5344' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5151  Schema: my_database  QC_hit: No
# Query_time: 1.061817  Lock_time: 0.000240  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630022295;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14097' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14097' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5155  Schema: my_database  QC_hit: No
# Query_time: 1.226893  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 441773
SET timestamp=1630022307;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17222' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17222' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5159  Schema: my_database  QC_hit: No
# Query_time: 1.922856  Lock_time: 0.000267  Rows_sent: 3  Rows_examined: 441773
SET timestamp=1630022311;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17226' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17226' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5167  Schema: my_database  QC_hit: No
# Query_time: 1.359322  Lock_time: 0.000383  Rows_sent: 3  Rows_examined: 441773
SET timestamp=1630022314;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17223' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17223' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5169  Schema: my_database  QC_hit: No
# Query_time: 3.538329  Lock_time: 0.000301  Rows_sent: 3  Rows_examined: 1181527
SET timestamp=1630022318;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21398' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21398' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5173  Schema: my_database  QC_hit: No
# Query_time: 1.154894  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 441883
SET timestamp=1630022320;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17216' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17216' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5183  Schema: my_database  QC_hit: No
# Query_time: 1.606504  Lock_time: 0.000216  Rows_sent: 3  Rows_examined: 634811
SET timestamp=1630022326;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16376' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16376' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5185  Schema: my_database  QC_hit: No
# Query_time: 1.746546  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 602409
SET timestamp=1630022330;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19013' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19013' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5187  Schema: my_database  QC_hit: No
# Query_time: 1.641401  Lock_time: 0.000288  Rows_sent: 3  Rows_examined: 608987
SET timestamp=1630022333;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9028' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9028' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:58:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5189  Schema: my_database  QC_hit: No
# Query_time: 1.962196  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 687576
SET timestamp=1630022336;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16367' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16367' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5193  Schema: my_database  QC_hit: No
# Query_time: 1.311983  Lock_time: 0.000235  Rows_sent: 3  Rows_examined: 482062
SET timestamp=1630022343;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16371' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16371' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5199  Schema: my_database  QC_hit: No
# Query_time: 1.725481  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 603169
SET timestamp=1630022350;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19015' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19015' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5209  Schema: my_database  QC_hit: No
# Query_time: 1.537280  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 475445
SET timestamp=1630022353;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17054' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17054' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5211  Schema: my_database  QC_hit: No
# Query_time: 1.669581  Lock_time: 0.000399  Rows_sent: 3  Rows_examined: 599055
SET timestamp=1630022356;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19054' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19054' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5213  Schema: my_database  QC_hit: No
# Query_time: 2.589035  Lock_time: 0.000319  Rows_sent: 3  Rows_examined: 858706
SET timestamp=1630022361;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13528' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13528' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5217  Schema: my_database  QC_hit: No
# Query_time: 2.444002  Lock_time: 0.000218  Rows_sent: 3  Rows_examined: 910133
SET timestamp=1630022364;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3672' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3672' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5219  Schema: my_database  QC_hit: No
# Query_time: 1.482523  Lock_time: 0.000197  Rows_sent: 3  Rows_examined: 602206
SET timestamp=1630022366;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19060' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19060' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5221  Schema: my_database  QC_hit: No
# Query_time: 2.312346  Lock_time: 0.000228  Rows_sent: 3  Rows_examined: 860940
SET timestamp=1630022371;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3678' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3678' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5225  Schema: my_database  QC_hit: No
# Query_time: 2.666244  Lock_time: 0.000302  Rows_sent: 3  Rows_examined: 911009
SET timestamp=1630022378;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3694' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3694' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  2:59:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5229  Schema: my_database  QC_hit: No
# Query_time: 1.548492  Lock_time: 0.000327  Rows_sent: 3  Rows_examined: 595435
SET timestamp=1630022380;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5476' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5476' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:00:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5249  Schema: my_database  QC_hit: No
# Query_time: 1.936517  Lock_time: 0.000387  Rows_sent: 3  Rows_examined: 556071
SET timestamp=1630022443;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23137' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23137' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:00:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5257  Schema: my_database  QC_hit: No
# Query_time: 1.828005  Lock_time: 0.000321  Rows_sent: 3  Rows_examined: 601607
SET timestamp=1630022454;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19058' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19058' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:00:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5261  Schema: my_database  QC_hit: No
# Query_time: 2.695850  Lock_time: 0.000331  Rows_sent: 3  Rows_examined: 859587
SET timestamp=1630022459;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3691' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3691' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5265  Schema: my_database  QC_hit: No
# Query_time: 2.130923  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 376806
SET timestamp=1630022462;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14254' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14254' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5267  Schema: my_database  QC_hit: No
# Query_time: 4.354261  Lock_time: 0.000363  Rows_sent: 3  Rows_examined: 911014
SET timestamp=1630022465;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3695' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3695' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5273  Schema: my_database  QC_hit: No
# Query_time: 1.645817  Lock_time: 0.000267  Rows_sent: 3  Rows_examined: 441773
SET timestamp=1630022467;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17219' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17219' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5277  Schema: my_database  QC_hit: No
# Query_time: 1.260444  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 475555
SET timestamp=1630022474;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17046' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17046' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5279  Schema: my_database  QC_hit: No
# Query_time: 1.135715  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 355092
SET timestamp=1630022477;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17037' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17037' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5281  Schema: my_database  QC_hit: No
# Query_time: 1.939893  Lock_time: 0.000279  Rows_sent: 3  Rows_examined: 578124
SET timestamp=1630022481;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13598' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13598' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5283  Schema: my_database  QC_hit: No
# Query_time: 1.166723  Lock_time: 0.000229  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630022485;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5285  Schema: my_database  QC_hit: No
# Query_time: 2.726013  Lock_time: 0.000429  Rows_sent: 3  Rows_examined: 441637
SET timestamp=1630022485;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17221' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17221' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5293  Schema: my_database  QC_hit: No
# Query_time: 1.674169  Lock_time: 0.000366  Rows_sent: 3  Rows_examined: 475309
SET timestamp=1630022488;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17044' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17044' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5295  Schema: my_database  QC_hit: No
# Query_time: 1.471950  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 602801
SET timestamp=1630022491;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19056' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19056' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5303  Schema: my_database  QC_hit: No
# Query_time: 3.374935  Lock_time: 0.000376  Rows_sent: 3  Rows_examined: 858701
SET timestamp=1630022500;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13578' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13578' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:01:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5317  Schema: my_database  QC_hit: No
# Query_time: 1.353937  Lock_time: 0.000314  Rows_sent: 3  Rows_examined: 445643
SET timestamp=1630022516;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23055' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23055' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5331  Schema: my_database  QC_hit: No
# Query_time: 1.790858  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 349341
SET timestamp=1630022525;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14670' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14670' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5329  Schema: my_database  QC_hit: No
# Query_time: 3.787112  Lock_time: 0.000337  Rows_sent: 3  Rows_examined: 910133
SET timestamp=1630022527;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3702' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3702' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5337  Schema: my_database  QC_hit: No
# Query_time: 1.651193  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 474072
SET timestamp=1630022530;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23063' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23063' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5347  Schema: my_database  QC_hit: No
# Query_time: 2.999439  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 910128
SET timestamp=1630022534;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5477' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5477' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5353  Schema: my_database  QC_hit: No
# Query_time: 1.301488  Lock_time: 0.000183  Rows_sent: 3  Rows_examined: 356441
SET timestamp=1630022537;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15841' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15841' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5361  Schema: my_database  QC_hit: No
# Query_time: 2.811022  Lock_time: 0.000242  Rows_sent: 3  Rows_examined: 910122
SET timestamp=1630022539;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21609' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21609' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5367  Schema: my_database  QC_hit: No
# Query_time: 2.597025  Lock_time: 0.000302  Rows_sent: 3  Rows_examined: 765486
SET timestamp=1630022546;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7303' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7303' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5373  Schema: my_database  QC_hit: No
# Query_time: 1.250445  Lock_time: 0.000382  Rows_sent: 3  Rows_examined: 399299
SET timestamp=1630022555;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18089' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18089' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5377  Schema: my_database  QC_hit: No
# Query_time: 1.805948  Lock_time: 0.000317  Rows_sent: 3  Rows_examined: 579356
SET timestamp=1630022576;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13600' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13600' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:02:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5379  Schema: my_database  QC_hit: No
# Query_time: 1.760953  Lock_time: 0.000194  Rows_sent: 3  Rows_examined: 366147
SET timestamp=1630022579;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5289' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5289' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5381  Schema: my_database  QC_hit: No
# Query_time: 2.317939  Lock_time: 0.000314  Rows_sent: 3  Rows_examined: 577698
SET timestamp=1630022580;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5479' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5479' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5383  Schema: my_database  QC_hit: No
# Query_time: 3.154391  Lock_time: 0.000476  Rows_sent: 3  Rows_examined: 910128
SET timestamp=1630022584;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3701' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3701' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5387  Schema: my_database  QC_hit: No
# Query_time: 2.434267  Lock_time: 0.000214  Rows_sent: 3  Rows_examined: 687576
SET timestamp=1630022591;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16375' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16375' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5393  Schema: my_database  QC_hit: No
# Query_time: 2.075175  Lock_time: 0.000383  Rows_sent: 3  Rows_examined: 679219
SET timestamp=1630022594;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21534' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21534' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5391  Schema: my_database  QC_hit: No
# Query_time: 3.659201  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 910133
SET timestamp=1630022596;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3679' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3679' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5399  Schema: my_database  QC_hit: No
# Query_time: 2.531311  Lock_time: 0.000374  Rows_sent: 3  Rows_examined: 910069
SET timestamp=1630022603;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3675' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3675' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5401  Schema: my_database  QC_hit: No
# Query_time: 2.424162  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 910145
SET timestamp=1630022606;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3685' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3685' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5405  Schema: my_database  QC_hit: No
# Query_time: 2.731336  Lock_time: 0.000352  Rows_sent: 3  Rows_examined: 910087
SET timestamp=1630022610;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3683' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3683' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5409  Schema: my_database  QC_hit: No
# Query_time: 2.228776  Lock_time: 0.000417  Rows_sent: 3  Rows_examined: 480093
SET timestamp=1630022613;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7769' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7769' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5411  Schema: my_database  QC_hit: No
# Query_time: 2.601734  Lock_time: 0.000380  Rows_sent: 3  Rows_examined: 601607
SET timestamp=1630022613;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19044' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19044' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5413  Schema: my_database  QC_hit: No
# Query_time: 1.247368  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 441637
SET timestamp=1630022616;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17244' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17244' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5415  Schema: my_database  QC_hit: No
# Query_time: 3.269562  Lock_time: 0.000316  Rows_sent: 3  Rows_examined: 911014
SET timestamp=1630022621;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3677' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3677' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5417  Schema: my_database  QC_hit: No
# Query_time: 1.550481  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 602989
SET timestamp=1630022624;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19048' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19048' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5421  Schema: my_database  QC_hit: No
# Query_time: 2.506644  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 911009
SET timestamp=1630022628;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3676' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3676' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:03:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5425  Schema: my_database  QC_hit: No
# Query_time: 1.386988  Lock_time: 0.000201  Rows_sent: 3  Rows_examined: 440578
SET timestamp=1630022631;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10195' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10195' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5441  Schema: my_database  QC_hit: No
# Query_time: 2.294511  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 860940
SET timestamp=1630022648;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3669' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3669' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5443  Schema: my_database  QC_hit: No
# Query_time: 1.483685  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 594440
SET timestamp=1630022650;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7451' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7451' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5447  Schema: my_database  QC_hit: No
# Query_time: 2.676221  Lock_time: 0.000330  Rows_sent: 3  Rows_examined: 860939
SET timestamp=1630022655;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3667' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3667' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5449  Schema: my_database  QC_hit: No
# Query_time: 1.838056  Lock_time: 0.000301  Rows_sent: 3  Rows_examined: 578246
SET timestamp=1630022658;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13617' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13617' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5451  Schema: my_database  QC_hit: No
# Query_time: 2.418318  Lock_time: 0.000309  Rows_sent: 3  Rows_examined: 577191
SET timestamp=1630022662;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13294' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13294' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5457  Schema: my_database  QC_hit: No
# Query_time: 2.036215  Lock_time: 0.000295  Rows_sent: 3  Rows_examined: 600283
SET timestamp=1630022665;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19040' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19040' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5461  Schema: my_database  QC_hit: No
# Query_time: 1.651766  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 602845
SET timestamp=1630022668;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19046' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19046' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5463  Schema: my_database  QC_hit: No
# Query_time: 3.261536  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 970345
SET timestamp=1630022673;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3684' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3684' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5471  Schema: my_database  QC_hit: No
# Query_time: 1.045492  Lock_time: 0.000224  Rows_sent: 7  Rows_examined: 71123
SET timestamp=1630022677;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '120' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  3:04:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5467  Schema: my_database  QC_hit: No
# Query_time: 3.661679  Lock_time: 0.000350  Rows_sent: 3  Rows_examined: 427645
SET timestamp=1630022678;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18346' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18346' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5469  Schema: my_database  QC_hit: No
# Query_time: 4.061493  Lock_time: 0.000293  Rows_sent: 3  Rows_examined: 577654
SET timestamp=1630022679;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3668' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3668' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5475  Schema: my_database  QC_hit: No
# Query_time: 1.803414  Lock_time: 0.000330  Rows_sent: 3  Rows_examined: 575572
SET timestamp=1630022681;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13527' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13527' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5479  Schema: my_database  QC_hit: No
# Query_time: 1.079908  Lock_time: 0.000330  Rows_sent: 3  Rows_examined: 441637
SET timestamp=1630022687;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17220' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17220' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5481  Schema: my_database  QC_hit: No
# Query_time: 1.529687  Lock_time: 0.000470  Rows_sent: 3  Rows_examined: 577630
SET timestamp=1630022694;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13603' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13603' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:04:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5483  Schema: my_database  QC_hit: No
# Query_time: 2.020954  Lock_time: 0.000337  Rows_sent: 3  Rows_examined: 578388
SET timestamp=1630022698;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13332' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13332' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:05:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5489  Schema: my_database  QC_hit: No
# Query_time: 3.819750  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 910146
SET timestamp=1630022704;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13478' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13478' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:05:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5503  Schema: my_database  QC_hit: No
# Query_time: 1.474478  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 577782
SET timestamp=1630022730;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13476' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13476' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:05:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5507  Schema: my_database  QC_hit: No
# Query_time: 1.431536  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 577830
SET timestamp=1630022733;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13295' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13295' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:05:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5509  Schema: my_database  QC_hit: No
# Query_time: 1.815208  Lock_time: 0.000420  Rows_sent: 3  Rows_examined: 575649
SET timestamp=1630022737;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13536' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13536' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:05:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5513  Schema: my_database  QC_hit: No
# Query_time: 1.418288  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 443434
SET timestamp=1630022743;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18801' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18801' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:05:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5521  Schema: my_database  QC_hit: No
# Query_time: 1.451136  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 593003
SET timestamp=1630022750;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13330' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13330' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:05:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5527  Schema: my_database  QC_hit: No
# Query_time: 1.067682  Lock_time: 0.000255  Rows_sent: 3  Rows_examined: 336604
SET timestamp=1630022755;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16009' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16009' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:05:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5529  Schema: my_database  QC_hit: No
# Query_time: 1.374481  Lock_time: 0.000375  Rows_sent: 3  Rows_examined: 360646
SET timestamp=1630022758;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15213' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15213' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5535  Schema: my_database  QC_hit: No
# Query_time: 2.857818  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 826275
SET timestamp=1630022763;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14649' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14649' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5537  Schema: my_database  QC_hit: No
# Query_time: 3.287903  Lock_time: 0.000296  Rows_sent: 3  Rows_examined: 1029441
SET timestamp=1630022767;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19062' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19062' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5541  Schema: my_database  QC_hit: No
# Query_time: 1.245088  Lock_time: 0.000314  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630022769;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16808' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16808' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5543  Schema: my_database  QC_hit: No
# Query_time: 2.452777  Lock_time: 0.000337  Rows_sent: 3  Rows_examined: 860940
SET timestamp=1630022774;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5474' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5474' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5545  Schema: my_database  QC_hit: No
# Query_time: 4.564025  Lock_time: 0.000293  Rows_sent: 3  Rows_examined: 1180834
SET timestamp=1630022781;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20907' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20907' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5551  Schema: my_database  QC_hit: No
# Query_time: 1.153274  Lock_time: 0.000305  Rows_sent: 3  Rows_examined: 406660
SET timestamp=1630022783;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16782' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16782' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5553  Schema: my_database  QC_hit: No
# Query_time: 1.850480  Lock_time: 0.000295  Rows_sent: 3  Rows_examined: 577593
SET timestamp=1630022785;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13599' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13599' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5561  Schema: my_database  QC_hit: No
# Query_time: 1.378124  Lock_time: 0.000194  Rows_sent: 3  Rows_examined: 480123
SET timestamp=1630022794;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22663' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22663' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5565  Schema: my_database  QC_hit: No
# Query_time: 1.072775  Lock_time: 0.000310  Rows_sent: 3  Rows_examined: 373380
SET timestamp=1630022796;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13784' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13784' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5567  Schema: my_database  QC_hit: No
# Query_time: 1.142267  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 398503
SET timestamp=1630022798;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18088' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18088' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5569  Schema: my_database  QC_hit: No
# Query_time: 1.326116  Lock_time: 0.000366  Rows_sent: 3  Rows_examined: 474072
SET timestamp=1630022802;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23069' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23069' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5573  Schema: my_database  QC_hit: No
# Query_time: 2.682824  Lock_time: 0.000265  Rows_sent: 3  Rows_examined: 911009
SET timestamp=1630022810;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3682' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3682' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:06:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5585  Schema: my_database  QC_hit: No
# Query_time: 1.523059  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 577432
SET timestamp=1630022816;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13271' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13271' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:07:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5595  Schema: my_database  QC_hit: No
# Query_time: 2.285146  Lock_time: 0.000382  Rows_sent: 3  Rows_examined: 600090
SET timestamp=1630022823;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22388' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22388' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:07:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5605  Schema: my_database  QC_hit: No
# Query_time: 1.627374  Lock_time: 0.000296  Rows_sent: 3  Rows_examined: 564581
SET timestamp=1630022829;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13270' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13270' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:07:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5607  Schema: my_database  QC_hit: No
# Query_time: 1.477271  Lock_time: 0.000337  Rows_sent: 3  Rows_examined: 564581
SET timestamp=1630022832;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13270' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13270' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:07:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5617  Schema: my_database  QC_hit: No
# Query_time: 2.170120  Lock_time: 0.000346  Rows_sent: 3  Rows_examined: 717449
SET timestamp=1630022862;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16290' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16290' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:07:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5619  Schema: my_database  QC_hit: No
# Query_time: 1.037669  Lock_time: 0.000340  Rows_sent: 3  Rows_examined: 375095
SET timestamp=1630022864;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3948' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3948' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:07:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5621  Schema: my_database  QC_hit: No
# Query_time: 1.008482  Lock_time: 0.000301  Rows_sent: 3  Rows_examined: 375095
SET timestamp=1630022866;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3948' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3948' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:07:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5629  Schema: my_database  QC_hit: No
# Query_time: 1.197645  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630022878;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19398' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19398' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:08:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5631  Schema: my_database  QC_hit: No
# Query_time: 1.783043  Lock_time: 0.000281  Rows_sent: 3  Rows_examined: 577450
SET timestamp=1630022880;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13273' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13273' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:08:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5671  Schema: my_database  QC_hit: No
# Query_time: 1.141766  Lock_time: 0.000344  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630022931;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14011' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14011' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:09:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5689  Schema: my_database  QC_hit: No
# Query_time: 1.021056  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 434199
SET timestamp=1630022980;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22221' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22221' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:09:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5691  Schema: my_database  QC_hit: No
# Query_time: 1.108127  Lock_time: 0.000369  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630022988;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14320' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14320' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:10:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5719  Schema: my_database  QC_hit: No
# Query_time: 1.438236  Lock_time: 0.000340  Rows_sent: 3  Rows_examined: 376809
SET timestamp=1630023029;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14104' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14104' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:10:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5727  Schema: my_database  QC_hit: No
# Query_time: 1.609799  Lock_time: 0.000241  Rows_sent: 3  Rows_examined: 409833
SET timestamp=1630023037;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16387' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16387' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:10:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5729  Schema: my_database  QC_hit: No
# Query_time: 2.014604  Lock_time: 0.000248  Rows_sent: 3  Rows_examined: 517038
SET timestamp=1630023040;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16599' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16599' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:10:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5739  Schema: my_database  QC_hit: No
# Query_time: 1.851036  Lock_time: 0.000243  Rows_sent: 3  Rows_examined: 587069
SET timestamp=1630023047;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22190' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22190' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:10:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5745  Schema: my_database  QC_hit: No
# Query_time: 1.036321  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 361102
SET timestamp=1630023052;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6522' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6522' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5749  Schema: my_database  QC_hit: No
# Query_time: 2.125629  Lock_time: 0.000271  Rows_sent: 3  Rows_examined: 764984
SET timestamp=1630023060;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2742' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2742' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5757  Schema: my_database  QC_hit: No
# Query_time: 1.525470  Lock_time: 0.049512  Rows_sent: 3  Rows_examined: 441260
SET timestamp=1630023069;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19827' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19827' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5759  Schema: my_database  QC_hit: No
# Query_time: 1.136154  Lock_time: 0.000346  Rows_sent: 3  Rows_examined: 419565
SET timestamp=1630023069;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16428' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16428' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5765  Schema: my_database  QC_hit: No
# Query_time: 1.635214  Lock_time: 0.000317  Rows_sent: 3  Rows_examined: 608671
SET timestamp=1630023076;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5593' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5593' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5781  Schema: my_database  QC_hit: No
# Query_time: 1.974497  Lock_time: 0.000390  Rows_sent: 3  Rows_examined: 312504
SET timestamp=1630023106;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3932' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3932' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5783  Schema: my_database  QC_hit: No
# Query_time: 1.986790  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 441773
SET timestamp=1630023107;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17230' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17230' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5785  Schema: my_database  QC_hit: No
# Query_time: 1.620448  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 679219
SET timestamp=1630023109;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21531' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21531' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5787  Schema: my_database  QC_hit: No
# Query_time: 1.404041  Lock_time: 0.000302  Rows_sent: 3  Rows_examined: 373217
SET timestamp=1630023109;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17946' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17946' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5789  Schema: my_database  QC_hit: No
# Query_time: 1.895800  Lock_time: 0.000236  Rows_sent: 3  Rows_examined: 373217
SET timestamp=1630023113;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17946' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17946' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5791  Schema: my_database  QC_hit: No
# Query_time: 2.512758  Lock_time: 0.000323  Rows_sent: 3  Rows_examined: 581443
SET timestamp=1630023114;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18851' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18851' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:11:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5801  Schema: my_database  QC_hit: No
# Query_time: 1.545101  Lock_time: 0.000352  Rows_sent: 3  Rows_examined: 584252
SET timestamp=1630023119;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8692' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8692' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5805  Schema: my_database  QC_hit: No
# Query_time: 2.508366  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 601181
SET timestamp=1630023124;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19030' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19030' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5809  Schema: my_database  QC_hit: No
# Query_time: 1.366476  Lock_time: 0.000305  Rows_sent: 3  Rows_examined: 441773
SET timestamp=1630023127;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17229' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17229' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5815  Schema: my_database  QC_hit: No
# Query_time: 1.561176  Lock_time: 0.000384  Rows_sent: 3  Rows_examined: 441637
SET timestamp=1630023130;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17241' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17241' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5817  Schema: my_database  QC_hit: No
# Query_time: 1.346878  Lock_time: 0.000427  Rows_sent: 3  Rows_examined: 469187
SET timestamp=1630023133;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17239' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17239' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5819  Schema: my_database  QC_hit: No
# Query_time: 3.483529  Lock_time: 0.000299  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630023138;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21375' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21375' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5823  Schema: my_database  QC_hit: No
# Query_time: 1.363051  Lock_time: 0.000276  Rows_sent: 3  Rows_examined: 469402
SET timestamp=1630023141;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17240' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17240' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5825  Schema: my_database  QC_hit: No
# Query_time: 1.140429  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 469187
SET timestamp=1630023143;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17234' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17234' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5827  Schema: my_database  QC_hit: No
# Query_time: 1.491850  Lock_time: 0.000344  Rows_sent: 3  Rows_examined: 469187
SET timestamp=1630023147;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17234' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17234' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5829  Schema: my_database  QC_hit: No
# Query_time: 1.773630  Lock_time: 0.000266  Rows_sent: 3  Rows_examined: 417762
SET timestamp=1630023149;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5194' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5194' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5833  Schema: my_database  QC_hit: No
# Query_time: 1.287993  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 441883
SET timestamp=1630023151;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17242' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17242' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5839  Schema: my_database  QC_hit: No
# Query_time: 1.272896  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 441883
SET timestamp=1630023154;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17243' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17243' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5853  Schema: my_database  QC_hit: No
# Query_time: 1.299284  Lock_time: 0.000289  Rows_sent: 3  Rows_examined: 469402
SET timestamp=1630023163;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17238' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17238' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5857  Schema: my_database  QC_hit: No
# Query_time: 2.286982  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 603169
SET timestamp=1630023168;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19032' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19032' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5859  Schema: my_database  QC_hit: No
# Query_time: 2.189064  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 353610
SET timestamp=1630023172;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19960' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19960' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5863  Schema: my_database  QC_hit: No
# Query_time: 3.041725  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 601795
SET timestamp=1630023172;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19034' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19034' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:12:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5865  Schema: my_database  QC_hit: No
# Query_time: 1.901329  Lock_time: 0.000335  Rows_sent: 3  Rows_examined: 608729
SET timestamp=1630023175;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1550' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1550' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5871  Schema: my_database  QC_hit: No
# Query_time: 2.117277  Lock_time: 0.000215  Rows_sent: 3  Rows_examined: 577549
SET timestamp=1630023182;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13633' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13633' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5881  Schema: my_database  QC_hit: No
# Query_time: 2.545135  Lock_time: 0.000306  Rows_sent: 3  Rows_examined: 441883
SET timestamp=1630023190;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17218' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17218' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5879  Schema: my_database  QC_hit: No
# Query_time: 4.988227  Lock_time: 0.000430  Rows_sent: 3  Rows_examined: 1181527
SET timestamp=1630023192;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14407' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14407' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5885  Schema: my_database  QC_hit: No
# Query_time: 1.287169  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 441883
SET timestamp=1630023194;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17218' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17218' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5891  Schema: my_database  QC_hit: No
# Query_time: 1.770874  Lock_time: 0.000372  Rows_sent: 3  Rows_examined: 412368
SET timestamp=1630023198;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16379' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16379' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5890  Schema: my_database  QC_hit: No
# Query_time: 2.525417  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 577870
SET timestamp=1630023199;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13468' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13468' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5909  Schema: my_database  QC_hit: No
# Query_time: 2.096167  Lock_time: 0.000309  Rows_sent: 3  Rows_examined: 651221
SET timestamp=1630023219;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8834' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8834' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5913  Schema: my_database  QC_hit: No
# Query_time: 1.583924  Lock_time: 0.000302  Rows_sent: 3  Rows_examined: 469402
SET timestamp=1630023224;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17236' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17236' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5917  Schema: my_database  QC_hit: No
# Query_time: 1.570708  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 599049
SET timestamp=1630023227;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19042' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19042' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5923  Schema: my_database  QC_hit: No
# Query_time: 1.719349  Lock_time: 0.000285  Rows_sent: 3  Rows_examined: 599049
SET timestamp=1630023231;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19042' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19042' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:13:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5929  Schema: my_database  QC_hit: No
# Query_time: 1.505855  Lock_time: 0.000305  Rows_sent: 3  Rows_examined: 461094
SET timestamp=1630023238;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2332' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2332' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5949  Schema: my_database  QC_hit: No
# Query_time: 1.755281  Lock_time: 0.000358  Rows_sent: 3  Rows_examined: 554194
SET timestamp=1630023255;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23074' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23074' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5951  Schema: my_database  QC_hit: No
# Query_time: 1.584914  Lock_time: 0.000374  Rows_sent: 3  Rows_examined: 530614
SET timestamp=1630023257;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11549' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11549' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5965  Schema: my_database  QC_hit: No
# Query_time: 1.281111  Lock_time: 0.000534  Rows_sent: 3  Rows_examined: 469187
SET timestamp=1630023268;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17235' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17235' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5969  Schema: my_database  QC_hit: No
# Query_time: 1.712899  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 376812
SET timestamp=1630023272;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14172' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14172' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5967  Schema: my_database  QC_hit: No
# Query_time: 2.381903  Lock_time: 0.000243  Rows_sent: 3  Rows_examined: 606853
SET timestamp=1630023272;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19023' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19023' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5973  Schema: my_database  QC_hit: No
# Query_time: 1.569162  Lock_time: 0.000234  Rows_sent: 3  Rows_examined: 366349
SET timestamp=1630023278;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18127' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18127' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5975  Schema: my_database  QC_hit: No
# Query_time: 2.826051  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 711843
SET timestamp=1630023280;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9967' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9967' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5977  Schema: my_database  QC_hit: No
# Query_time: 2.085071  Lock_time: 0.000323  Rows_sent: 3  Rows_examined: 590399
SET timestamp=1630023283;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15299' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15299' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5981  Schema: my_database  QC_hit: No
# Query_time: 3.331191  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 1180791
SET timestamp=1630023290;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21497' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21497' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:14:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5983  Schema: my_database  QC_hit: No
# Query_time: 3.276978  Lock_time: 0.000236  Rows_sent: 3  Rows_examined: 1029235
SET timestamp=1630023294;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23163' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23163' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:15:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5993  Schema: my_database  QC_hit: No
# Query_time: 3.410469  Lock_time: 0.000526  Rows_sent: 3  Rows_examined: 1029229
SET timestamp=1630023307;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23162' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23162' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:15:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5995  Schema: my_database  QC_hit: No
# Query_time: 1.736378  Lock_time: 0.000343  Rows_sent: 3  Rows_examined: 584595
SET timestamp=1630023310;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18108' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18108' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:15:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 5999  Schema: my_database  QC_hit: No
# Query_time: 3.163628  Lock_time: 0.000243  Rows_sent: 3  Rows_examined: 1029220
SET timestamp=1630023314;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18107' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18107' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:15:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6001  Schema: my_database  QC_hit: No
# Query_time: 1.555611  Lock_time: 0.000417  Rows_sent: 3  Rows_examined: 678116
SET timestamp=1630023317;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21571' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21571' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:15:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6015  Schema: my_database  QC_hit: No
# Query_time: 3.924462  Lock_time: 0.000236  Rows_sent: 3  Rows_examined: 1272130
SET timestamp=1630023337;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20047' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20047' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:15:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6019  Schema: my_database  QC_hit: No
# Query_time: 1.901019  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 589377
SET timestamp=1630023340;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22789' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22789' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:15:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6023  Schema: my_database  QC_hit: No
# Query_time: 1.411076  Lock_time: 0.000338  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630023342;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14128' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14128' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:15:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6027  Schema: my_database  QC_hit: No
# Query_time: 1.047005  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 364440
SET timestamp=1630023345;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17471' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17471' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6042  Schema: my_database  QC_hit: No
# Query_time: 2.969326  Lock_time: 0.000516  Rows_sent: 3  Rows_examined: 361528
SET timestamp=1630023365;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9376' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9376' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6045  Schema: my_database  QC_hit: No
# Query_time: 1.025112  Lock_time: 0.000248  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630023367;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  3:16:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6043  Schema: my_database  QC_hit: No
# Query_time: 7.196669  Lock_time: 0.000391  Rows_sent: 3  Rows_examined: 1181527
SET timestamp=1630023369;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21478' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21478' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6065  Schema: my_database  QC_hit: No
# Query_time: 2.261146  Lock_time: 0.000445  Rows_sent: 3  Rows_examined: 469306
SET timestamp=1630023384;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17237' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17237' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6069  Schema: my_database  QC_hit: No
# Query_time: 1.662628  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 469402
SET timestamp=1630023387;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17233' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17233' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6071  Schema: my_database  QC_hit: No
# Query_time: 1.801799  Lock_time: 0.000470  Rows_sent: 3  Rows_examined: 584027
SET timestamp=1630023390;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6938' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6938' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6077  Schema: my_database  QC_hit: No
# Query_time: 2.784658  Lock_time: 0.000348  Rows_sent: 3  Rows_examined: 479414
SET timestamp=1630023405;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18909' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18909' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6079  Schema: my_database  QC_hit: No
# Query_time: 1.131368  Lock_time: 0.000244  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630023406;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  3:16:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6083  Schema: my_database  QC_hit: No
# Query_time: 1.499420  Lock_time: 0.000296  Rows_sent: 3  Rows_examined: 509075
SET timestamp=1630023408;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3058' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3058' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6085  Schema: my_database  QC_hit: No
# Query_time: 1.763635  Lock_time: 0.000282  Rows_sent: 3  Rows_examined: 365865
SET timestamp=1630023410;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2302' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2302' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:16:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6089  Schema: my_database  QC_hit: No
# Query_time: 1.451121  Lock_time: 0.000308  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630023413;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5301' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5301' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:17:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6115  Schema: my_database  QC_hit: No
# Query_time: 2.104776  Lock_time: 0.000333  Rows_sent: 3  Rows_examined: 489545
SET timestamp=1630023443;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '172' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '172' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:17:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6135  Schema: my_database  QC_hit: No
# Query_time: 1.457865  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 679219
SET timestamp=1630023457;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21534' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21534' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:17:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6143  Schema: my_database  QC_hit: No
# Query_time: 1.976346  Lock_time: 0.000267  Rows_sent: 3  Rows_examined: 441773
SET timestamp=1630023468;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17228' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17228' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:17:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6145  Schema: my_database  QC_hit: No
# Query_time: 4.230309  Lock_time: 0.000410  Rows_sent: 3  Rows_examined: 752396
SET timestamp=1630023471;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8406' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8406' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:17:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6153  Schema: my_database  QC_hit: No
# Query_time: 1.636575  Lock_time: 0.000236  Rows_sent: 3  Rows_examined: 467905
SET timestamp=1630023477;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15611' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15611' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6159  Schema: my_database  QC_hit: No
# Query_time: 2.680774  Lock_time: 0.000481  Rows_sent: 3  Rows_examined: 577788
SET timestamp=1630023483;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13515' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13515' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6175  Schema: my_database  QC_hit: No
# Query_time: 2.615387  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 910128
SET timestamp=1630023500;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13350' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13350' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6183  Schema: my_database  QC_hit: No
# Query_time: 1.656573  Lock_time: 0.000307  Rows_sent: 3  Rows_examined: 578268
SET timestamp=1630023504;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13354' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13354' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6185  Schema: my_database  QC_hit: No
# Query_time: 1.661656  Lock_time: 0.000429  Rows_sent: 3  Rows_examined: 677364
SET timestamp=1630023506;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21547' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21547' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6191  Schema: my_database  QC_hit: No
# Query_time: 3.062214  Lock_time: 0.000410  Rows_sent: 3  Rows_examined: 910140
SET timestamp=1630023511;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13349' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13349' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6193  Schema: my_database  QC_hit: No
# Query_time: 1.114423  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 343607
SET timestamp=1630023513;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2201' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2201' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6205  Schema: my_database  QC_hit: No
# Query_time: 3.624778  Lock_time: 0.000346  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630023527;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21358' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21358' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6207  Schema: my_database  QC_hit: No
# Query_time: 1.610544  Lock_time: 0.000236  Rows_sent: 3  Rows_examined: 428625
SET timestamp=1630023531;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22444' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22444' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6209  Schema: my_database  QC_hit: No
# Query_time: 2.472187  Lock_time: 0.000346  Rows_sent: 3  Rows_examined: 765668
SET timestamp=1630023533;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4734' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4734' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:18:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6213  Schema: my_database  QC_hit: No
# Query_time: 1.066278  Lock_time: 0.000281  Rows_sent: 3  Rows_examined: 428625
SET timestamp=1630023535;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22444' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22444' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:19:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6215  Schema: my_database  QC_hit: No
# Query_time: 2.433575  Lock_time: 0.000285  Rows_sent: 3  Rows_examined: 480200
SET timestamp=1630023540;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5821' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5821' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:19:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6231  Schema: my_database  QC_hit: No
# Query_time: 1.014084  Lock_time: 0.000365  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630023551;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  3:19:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6239  Schema: my_database  QC_hit: No
# Query_time: 1.137587  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630023557;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19802' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19802' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:19:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6249  Schema: my_database  QC_hit: No
# Query_time: 1.125856  Lock_time: 0.000329  Rows_sent: 3  Rows_examined: 360930
SET timestamp=1630023564;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17868' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17868' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:19:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6253  Schema: my_database  QC_hit: No
# Query_time: 1.389094  Lock_time: 0.000435  Rows_sent: 3  Rows_examined: 483525
SET timestamp=1630023587;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '979' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '979' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:20:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6259  Schema: my_database  QC_hit: No
# Query_time: 2.335470  Lock_time: 0.000377  Rows_sent: 3  Rows_examined: 609281
SET timestamp=1630023611;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9035' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9035' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:20:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6265  Schema: my_database  QC_hit: No
# Query_time: 1.205048  Lock_time: 0.000268  Rows_sent: 3  Rows_examined: 362397
SET timestamp=1630023615;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22237' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22237' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:20:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6269  Schema: my_database  QC_hit: No
# Query_time: 1.693421  Lock_time: 0.000294  Rows_sent: 3  Rows_examined: 475445
SET timestamp=1630023616;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17059' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17059' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:20:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6273  Schema: my_database  QC_hit: No
# Query_time: 2.110481  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 442229
SET timestamp=1630023620;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21707' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21707' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:20:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6283  Schema: my_database  QC_hit: No
# Query_time: 1.510156  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 434636
SET timestamp=1630023628;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21676' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21676' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:20:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6287  Schema: my_database  QC_hit: No
# Query_time: 1.012680  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 357936
SET timestamp=1630023630;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22373' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22373' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:20:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6293  Schema: my_database  QC_hit: No
# Query_time: 4.157027  Lock_time: 0.000521  Rows_sent: 3  Rows_examined: 1404046
SET timestamp=1630023649;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6843' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6843' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:20:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6297  Schema: my_database  QC_hit: No
# Query_time: 1.598811  Lock_time: 0.000381  Rows_sent: 3  Rows_examined: 436982
SET timestamp=1630023653;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17047' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17047' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:21:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6299  Schema: my_database  QC_hit: No
# Query_time: 1.413502  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 577826
SET timestamp=1630023660;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13340' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13340' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:21:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6303  Schema: my_database  QC_hit: No
# Query_time: 2.491508  Lock_time: 0.000448  Rows_sent: 3  Rows_examined: 840895
SET timestamp=1630023671;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6153' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6153' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:21:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6307  Schema: my_database  QC_hit: No
# Query_time: 3.345345  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 1181634
SET timestamp=1630023686;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21486' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21486' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:21:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6311  Schema: my_database  QC_hit: No
# Query_time: 1.501117  Lock_time: 0.000471  Rows_sent: 3  Rows_examined: 440571
SET timestamp=1630023693;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10199' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10199' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:22:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6321  Schema: my_database  QC_hit: No
# Query_time: 1.257271  Lock_time: 0.000471  Rows_sent: 3  Rows_examined: 365870
SET timestamp=1630023750;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2304' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2304' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:22:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6323  Schema: my_database  QC_hit: No
# Query_time: 2.170070  Lock_time: 0.000330  Rows_sent: 3  Rows_examined: 609045
SET timestamp=1630023758;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9026' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9026' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:22:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6325  Schema: my_database  QC_hit: No
# Query_time: 1.937489  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 609045
SET timestamp=1630023761;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9023' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9023' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:22:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6333  Schema: my_database  QC_hit: No
# Query_time: 1.525052  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 590399
SET timestamp=1630023767;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15301' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15301' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:22:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6335  Schema: my_database  QC_hit: No
# Query_time: 1.107456  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 210522
SET timestamp=1630023770;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18347' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18347' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:22:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6337  Schema: my_database  QC_hit: No
# Query_time: 2.100779  Lock_time: 0.000368  Rows_sent: 3  Rows_examined: 578372
SET timestamp=1630023771;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13488' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13488' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:22:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6341  Schema: my_database  QC_hit: No
# Query_time: 2.337501  Lock_time: 0.000265  Rows_sent: 3  Rows_examined: 578244
SET timestamp=1630023775;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13493' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13493' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:22:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6345  Schema: my_database  QC_hit: No
# Query_time: 2.100150  Lock_time: 0.000343  Rows_sent: 3  Rows_examined: 603048
SET timestamp=1630023779;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13491' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13491' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:23:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6349  Schema: my_database  QC_hit: No
# Query_time: 2.001509  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 587048
SET timestamp=1630023782;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15300' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15300' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:23:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6351  Schema: my_database  QC_hit: No
# Query_time: 1.678558  Lock_time: 0.000377  Rows_sent: 3  Rows_examined: 587048
SET timestamp=1630023785;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15300' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15300' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:23:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6353  Schema: my_database  QC_hit: No
# Query_time: 1.458682  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 579686
SET timestamp=1630023788;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13348' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13348' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:23:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6363  Schema: my_database  QC_hit: No
# Query_time: 1.054779  Lock_time: 0.000249  Rows_sent: 3  Rows_examined: 343600
SET timestamp=1630023808;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2219' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2219' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:24:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6379  Schema: my_database  QC_hit: No
# Query_time: 1.324166  Lock_time: 0.000499  Rows_sent: 3  Rows_examined: 479448
SET timestamp=1630023850;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22617' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22617' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:24:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6385  Schema: my_database  QC_hit: No
# Query_time: 1.709131  Lock_time: 0.000290  Rows_sent: 3  Rows_examined: 578438
SET timestamp=1630023861;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13470' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13470' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:24:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6389  Schema: my_database  QC_hit: No
# Query_time: 2.117375  Lock_time: 0.000365  Rows_sent: 3  Rows_examined: 530666
SET timestamp=1630023868;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11994' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11994' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:24:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6397  Schema: my_database  QC_hit: No
# Query_time: 1.094893  Lock_time: 0.000286  Rows_sent: 3  Rows_examined: 375481
SET timestamp=1630023872;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19169' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19169' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:24:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6401  Schema: my_database  QC_hit: No
# Query_time: 1.488590  Lock_time: 0.000282  Rows_sent: 3  Rows_examined: 500729
SET timestamp=1630023880;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14046' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14046' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:24:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6411  Schema: my_database  QC_hit: No
# Query_time: 1.477606  Lock_time: 0.000213  Rows_sent: 3  Rows_examined: 577788
SET timestamp=1630023897;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13487' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13487' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:25:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6419  Schema: my_database  QC_hit: No
# Query_time: 1.981086  Lock_time: 0.000453  Rows_sent: 3  Rows_examined: 579550
SET timestamp=1630023906;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13489' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13489' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:25:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6423  Schema: my_database  QC_hit: No
# Query_time: 2.380991  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 577856
SET timestamp=1630023913;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13233' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13233' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:25:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6445  Schema: my_database  QC_hit: No
# Query_time: 1.703015  Lock_time: 0.000404  Rows_sent: 3  Rows_examined: 602409
SET timestamp=1630023947;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19028' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19028' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:26:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6479  Schema: my_database  QC_hit: No
# Query_time: 1.468887  Lock_time: 0.000363  Rows_sent: 3  Rows_examined: 479350
SET timestamp=1630023991;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5350' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5350' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:26:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6499  Schema: my_database  QC_hit: No
# Query_time: 1.180708  Lock_time: 0.000633  Rows_sent: 3  Rows_examined: 427843
SET timestamp=1630024017;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20835' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20835' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:27:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6513  Schema: my_database  QC_hit: No
# Query_time: 1.571066  Lock_time: 0.000428  Rows_sent: 3  Rows_examined: 579506
SET timestamp=1630024037;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13492' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13492' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:27:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6515  Schema: my_database  QC_hit: No
# Query_time: 1.388241  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 579506
SET timestamp=1630024041;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13492' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13492' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:27:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6521  Schema: my_database  QC_hit: No
# Query_time: 1.661070  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 577788
SET timestamp=1630024052;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13515' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13515' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:27:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6553  Schema: my_database  QC_hit: No
# Query_time: 1.054787  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 374122
SET timestamp=1630024071;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15477' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15477' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:27:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6555  Schema: my_database  QC_hit: No
# Query_time: 1.316329  Lock_time: 0.000253  Rows_sent: 3  Rows_examined: 436229
SET timestamp=1630024073;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21323' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21323' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:27:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6557  Schema: my_database  QC_hit: No
# Query_time: 1.559884  Lock_time: 0.000302  Rows_sent: 3  Rows_examined: 577308
SET timestamp=1630024076;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13232' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13232' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:28:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6559  Schema: my_database  QC_hit: No
# Query_time: 2.028864  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 577308
SET timestamp=1630024082;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13232' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13232' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:28:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6571  Schema: my_database  QC_hit: No
# Query_time: 1.739831  Lock_time: 0.000286  Rows_sent: 3  Rows_examined: 594424
SET timestamp=1630024102;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13198' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13198' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:28:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6593  Schema: my_database  QC_hit: No
# Query_time: 1.749093  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 578134
SET timestamp=1630024120;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13275' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13275' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:28:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6597  Schema: my_database  QC_hit: No
# Query_time: 1.244931  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 420295
SET timestamp=1630024123;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22372' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22372' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:28:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6603  Schema: my_database  QC_hit: No
# Query_time: 1.092379  Lock_time: 0.000373  Rows_sent: 3  Rows_examined: 374391
SET timestamp=1630024139;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15486' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15486' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6605  Schema: my_database  QC_hit: No
# Query_time: 1.112738  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 374391
SET timestamp=1630024143;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15486' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15486' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6609  Schema: my_database  QC_hit: No
# Query_time: 1.789772  Lock_time: 0.000404  Rows_sent: 3  Rows_examined: 578515
SET timestamp=1630024147;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13272' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13272' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6611  Schema: my_database  QC_hit: No
# Query_time: 1.578444  Lock_time: 0.000252  Rows_sent: 3  Rows_examined: 599272
SET timestamp=1630024150;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22371' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22371' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6625  Schema: my_database  QC_hit: No
# Query_time: 1.051967  Lock_time: 0.000240  Rows_sent: 3  Rows_examined: 374122
SET timestamp=1630024170;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9835' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9835' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6627  Schema: my_database  QC_hit: No
# Query_time: 1.013150  Lock_time: 0.000215  Rows_sent: 3  Rows_examined: 374122
SET timestamp=1630024172;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9835' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9835' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6631  Schema: my_database  QC_hit: No
# Query_time: 1.451687  Lock_time: 0.000208  Rows_sent: 3  Rows_examined: 577788
SET timestamp=1630024175;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13519' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13519' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6633  Schema: my_database  QC_hit: No
# Query_time: 1.481801  Lock_time: 0.000205  Rows_sent: 3  Rows_examined: 609045
SET timestamp=1630024178;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9025' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9025' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6637  Schema: my_database  QC_hit: No
# Query_time: 1.754777  Lock_time: 0.000432  Rows_sent: 3  Rows_examined: 578372
SET timestamp=1630024184;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13525' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13525' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6639  Schema: my_database  QC_hit: No
# Query_time: 1.691741  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 577788
SET timestamp=1630024186;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13523' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13523' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6641  Schema: my_database  QC_hit: No
# Query_time: 1.666672  Lock_time: 0.000312  Rows_sent: 3  Rows_examined: 373217
SET timestamp=1630024190;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17954' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17954' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6645  Schema: my_database  QC_hit: No
# Query_time: 1.703430  Lock_time: 0.000214  Rows_sent: 3  Rows_examined: 607893
SET timestamp=1630024193;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19012' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19012' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6647  Schema: my_database  QC_hit: No
# Query_time: 2.304251  Lock_time: 0.000188  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630024196;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12560' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12560' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:29:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6651  Schema: my_database  QC_hit: No
# Query_time: 2.764094  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 577314
SET timestamp=1630024197;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13293' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13293' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6655  Schema: my_database  QC_hit: No
# Query_time: 1.607982  Lock_time: 0.000212  Rows_sent: 3  Rows_examined: 609045
SET timestamp=1630024200;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9023' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9023' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6657  Schema: my_database  QC_hit: No
# Query_time: 2.821261  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 375875
SET timestamp=1630024203;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6125' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6125' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6659  Schema: my_database  QC_hit: No
# Query_time: 3.688956  Lock_time: 0.000338  Rows_sent: 3  Rows_examined: 609045
SET timestamp=1630024205;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9023' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9023' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6663  Schema: my_database  QC_hit: No
# Query_time: 1.732295  Lock_time: 0.000239  Rows_sent: 3  Rows_examined: 475823
SET timestamp=1630024221;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17052' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17052' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6667  Schema: my_database  QC_hit: No
# Query_time: 1.674725  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 578328
SET timestamp=1630024224;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13521' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13521' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6673  Schema: my_database  QC_hit: No
# Query_time: 1.361358  Lock_time: 0.000365  Rows_sent: 3  Rows_examined: 496730
SET timestamp=1630024233;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3718' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3718' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6677  Schema: my_database  QC_hit: No
# Query_time: 1.593725  Lock_time: 0.000209  Rows_sent: 3  Rows_examined: 608987
SET timestamp=1630024238;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16373' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16373' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6683  Schema: my_database  QC_hit: No
# Query_time: 2.854840  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 830844
SET timestamp=1630024245;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17323' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17323' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:30:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6693  Schema: my_database  QC_hit: No
# Query_time: 1.344142  Lock_time: 0.000282  Rows_sent: 3  Rows_examined: 374122
SET timestamp=1630024255;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9840' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9840' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:31:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6703  Schema: my_database  QC_hit: No
# Query_time: 2.796006  Lock_time: 0.000543  Rows_sent: 3  Rows_examined: 891346
SET timestamp=1630024270;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20235' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20235' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:31:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6729  Schema: my_database  QC_hit: No
# Query_time: 1.300041  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 376812
SET timestamp=1630024301;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14252' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14252' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:32:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6741  Schema: my_database  QC_hit: No
# Query_time: 1.880367  Lock_time: 0.000346  Rows_sent: 3  Rows_examined: 366056
SET timestamp=1630024322;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14981' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14981' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:32:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6787  Schema: my_database  QC_hit: No
# Query_time: 1.306106  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 461353
SET timestamp=1630024368;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23115' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23115' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:33:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6801  Schema: my_database  QC_hit: No
# Query_time: 1.233442  Lock_time: 0.000404  Rows_sent: 3  Rows_examined: 344579
SET timestamp=1630024382;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22404' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22404' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:33:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6805  Schema: my_database  QC_hit: No
# Query_time: 1.099187  Lock_time: 0.000258  Rows_sent: 3  Rows_examined: 375875
SET timestamp=1630024385;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4119' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4119' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:34:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6831  Schema: my_database  QC_hit: No
# Query_time: 1.498609  Lock_time: 0.000310  Rows_sent: 3  Rows_examined: 345036
SET timestamp=1630024458;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20527' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20527' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:34:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6833  Schema: my_database  QC_hit: No
# Query_time: 3.242215  Lock_time: 0.000198  Rows_sent: 3  Rows_examined: 1271409
SET timestamp=1630024462;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20095' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20095' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:34:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6843  Schema: my_database  QC_hit: No
# Query_time: 1.310855  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 479423
SET timestamp=1630024495;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17756' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17756' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:35:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6847  Schema: my_database  QC_hit: No
# Query_time: 2.670230  Lock_time: 0.000371  Rows_sent: 3  Rows_examined: 765637
SET timestamp=1630024510;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15679' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15679' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:35:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6853  Schema: my_database  QC_hit: No
# Query_time: 2.558604  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 890411
SET timestamp=1630024532;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20124' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20124' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:35:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6859  Schema: my_database  QC_hit: No
# Query_time: 1.313497  Lock_time: 0.000211  Rows_sent: 3  Rows_examined: 500559
SET timestamp=1630024546;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14268' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14268' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:36:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6873  Schema: my_database  QC_hit: No
# Query_time: 1.834061  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 717323
SET timestamp=1630024570;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2146' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2146' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:36:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6885  Schema: my_database  QC_hit: No
# Query_time: 3.066587  Lock_time: 0.000323  Rows_sent: 3  Rows_examined: 1050843
SET timestamp=1630024583;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17975' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17975' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:37:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6905  Schema: my_database  QC_hit: No
# Query_time: 1.419809  Lock_time: 0.000376  Rows_sent: 3  Rows_examined: 500559
SET timestamp=1630024620;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14462' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14462' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:37:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6907  Schema: my_database  QC_hit: No
# Query_time: 1.639665  Lock_time: 0.000347  Rows_sent: 3  Rows_examined: 500729
SET timestamp=1630024622;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14288' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14288' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:37:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6915  Schema: my_database  QC_hit: No
# Query_time: 2.558881  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 830844
SET timestamp=1630024636;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19437' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19437' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:37:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6925  Schema: my_database  QC_hit: No
# Query_time: 1.406108  Lock_time: 0.000385  Rows_sent: 3  Rows_examined: 508752
SET timestamp=1630024676;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7446' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7446' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:38:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6929  Schema: my_database  QC_hit: No
# Query_time: 1.991940  Lock_time: 0.000289  Rows_sent: 3  Rows_examined: 840895
SET timestamp=1630024688;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2409' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2409' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:38:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6943  Schema: my_database  QC_hit: No
# Query_time: 1.632130  Lock_time: 0.000235  Rows_sent: 3  Rows_examined: 545968
SET timestamp=1630024726;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15285' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15285' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:39:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6957  Schema: my_database  QC_hit: No
# Query_time: 3.905579  Lock_time: 0.000255  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630024767;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20895' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20895' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:40:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6983  Schema: my_database  QC_hit: No
# Query_time: 1.405288  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 479423
SET timestamp=1630024827;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7760' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7760' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:40:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 6985  Schema: my_database  QC_hit: No
# Query_time: 2.411180  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 764971
SET timestamp=1630024834;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '183' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '183' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:41:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7005  Schema: my_database  QC_hit: No
# Query_time: 1.157749  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 428983
SET timestamp=1630024871;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20787' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20787' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:42:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7023  Schema: my_database  QC_hit: No
# Query_time: 1.132724  Lock_time: 0.000308  Rows_sent: 3  Rows_examined: 441225
SET timestamp=1630024931;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19777' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19777' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:43:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7049  Schema: my_database  QC_hit: No
# Query_time: 1.625297  Lock_time: 0.000267  Rows_sent: 3  Rows_examined: 602504
SET timestamp=1630025008;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15186' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15186' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:45:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7079  Schema: my_database  QC_hit: No
# Query_time: 4.264064  Lock_time: 0.000281  Rows_sent: 3  Rows_examined: 1272201
SET timestamp=1630025111;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20099' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20099' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:45:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7091  Schema: my_database  QC_hit: No
# Query_time: 3.856323  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 1360144
SET timestamp=1630025148;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7240' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7240' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:46:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7097  Schema: my_database  QC_hit: No
# Query_time: 2.998164  Lock_time: 0.000195  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630025168;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21358' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21358' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:46:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7111  Schema: my_database  QC_hit: No
# Query_time: 1.366447  Lock_time: 0.000324  Rows_sent: 3  Rows_examined: 509080
SET timestamp=1630025198;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3053' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3053' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:46:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7121  Schema: my_database  QC_hit: No
# Query_time: 1.380615  Lock_time: 0.000390  Rows_sent: 3  Rows_examined: 478650
SET timestamp=1630025219;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20760' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20760' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:47:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7127  Schema: my_database  QC_hit: No
# Query_time: 2.450891  Lock_time: 0.000523  Rows_sent: 3  Rows_examined: 830844
SET timestamp=1630025234;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17245' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17245' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:47:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7135  Schema: my_database  QC_hit: No
# Query_time: 3.041414  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 1064334
SET timestamp=1630025253;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7132' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7132' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:47:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7139  Schema: my_database  QC_hit: No
# Query_time: 1.245188  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 376642
SET timestamp=1630025275;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14346' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14346' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:48:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7151  Schema: my_database  QC_hit: No
# Query_time: 2.615699  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 830261
SET timestamp=1630025336;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20327' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20327' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:49:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7163  Schema: my_database  QC_hit: No
# Query_time: 1.097249  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 483898
SET timestamp=1630025354;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '988' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '988' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:49:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7175  Schema: my_database  QC_hit: No
# Query_time: 1.112243  Lock_time: 0.000291  Rows_sent: 3  Rows_examined: 440213
SET timestamp=1630025388;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21688' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21688' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:50:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7189  Schema: my_database  QC_hit: No
# Query_time: 3.033171  Lock_time: 0.000305  Rows_sent: 3  Rows_examined: 1203967
SET timestamp=1630025439;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7186' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7186' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:51:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7215  Schema: my_database  QC_hit: No
# Query_time: 1.886049  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 656609
SET timestamp=1630025491;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2150' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2150' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:52:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7269  Schema: my_database  QC_hit: No
# Query_time: 1.442297  Lock_time: 0.000221  Rows_sent: 3  Rows_examined: 604634
SET timestamp=1630025542;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3856' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3856' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:52:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7277  Schema: my_database  QC_hit: No
# Query_time: 2.030283  Lock_time: 0.000265  Rows_sent: 3  Rows_examined: 717875
SET timestamp=1630025556;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1542' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1542' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:52:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7287  Schema: my_database  QC_hit: No
# Query_time: 2.760581  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 553798
SET timestamp=1630025569;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23088' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23088' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:52:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7289  Schema: my_database  QC_hit: No
# Query_time: 2.434472  Lock_time: 0.000356  Rows_sent: 3  Rows_examined: 455367
SET timestamp=1630025570;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6796' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6796' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:52:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7301  Schema: my_database  QC_hit: No
# Query_time: 1.988943  Lock_time: 0.000307  Rows_sent: 3  Rows_examined: 717390
SET timestamp=1630025578;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15526' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15526' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:53:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7303  Schema: my_database  QC_hit: No
# Query_time: 1.067724  Lock_time: 0.000225  Rows_sent: 3  Rows_examined: 366746
SET timestamp=1630025582;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23012' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23012' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:53:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7307  Schema: my_database  QC_hit: No
# Query_time: 2.779396  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 1092139
SET timestamp=1630025591;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '816' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '816' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:53:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7313  Schema: my_database  QC_hit: No
# Query_time: 1.598485  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 554763
SET timestamp=1630025596;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22096' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22096' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:53:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7329  Schema: my_database  QC_hit: No
# Query_time: 1.092091  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 359255
SET timestamp=1630025610;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23172' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23172' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:53:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7331  Schema: my_database  QC_hit: No
# Query_time: 1.707188  Lock_time: 0.000371  Rows_sent: 3  Rows_examined: 500569
SET timestamp=1630025613;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14234' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14234' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:53:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7347  Schema: my_database  QC_hit: No
# Query_time: 2.205252  Lock_time: 0.000235  Rows_sent: 3  Rows_examined: 840895
SET timestamp=1630025629;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2406' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2406' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:54:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7357  Schema: my_database  QC_hit: No
# Query_time: 1.021744  Lock_time: 0.000467  Rows_sent: 3  Rows_examined: 363767
SET timestamp=1630025641;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22512' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22512' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:54:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7385  Schema: my_database  QC_hit: No
# Query_time: 1.088764  Lock_time: 0.000359  Rows_sent: 3  Rows_examined: 376639
SET timestamp=1630025673;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14042' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14042' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:54:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7389  Schema: my_database  QC_hit: No
# Query_time: 2.008312  Lock_time: 0.000379  Rows_sent: 3  Rows_examined: 608565
SET timestamp=1630025684;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6967' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6967' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:54:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7395  Schema: my_database  QC_hit: No
# Query_time: 1.345666  Lock_time: 0.000207  Rows_sent: 3  Rows_examined: 604574
SET timestamp=1630025689;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '133' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '133' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:55:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7423  Schema: my_database  QC_hit: No
# Query_time: 1.296965  Lock_time: 0.000378  Rows_sent: 3  Rows_examined: 480067
SET timestamp=1630025722;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20613' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20613' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:55:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7427  Schema: my_database  QC_hit: No
# Query_time: 1.073757  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 375208
SET timestamp=1630025724;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14035' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14035' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:55:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7435  Schema: my_database  QC_hit: No
# Query_time: 1.887765  Lock_time: 0.000405  Rows_sent: 3  Rows_examined: 608803
SET timestamp=1630025746;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16368' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16368' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:55:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7441  Schema: my_database  QC_hit: No
# Query_time: 2.572602  Lock_time: 0.000299  Rows_sent: 3  Rows_examined: 891213
SET timestamp=1630025753;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20226' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20226' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:56:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7453  Schema: my_database  QC_hit: No
# Query_time: 1.449313  Lock_time: 0.000271  Rows_sent: 3  Rows_examined: 361482
SET timestamp=1630025761;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23027' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23027' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:56:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7451  Schema: my_database  QC_hit: No
# Query_time: 2.295538  Lock_time: 0.000408  Rows_sent: 3  Rows_examined: 583583
SET timestamp=1630025762;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8964' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8964' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:56:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7479  Schema: my_database  QC_hit: No
# Query_time: 1.694394  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 479360
SET timestamp=1630025789;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17765' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17765' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:56:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7513  Schema: my_database  QC_hit: No
# Query_time: 1.043776  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 428621
SET timestamp=1630025816;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13395' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13395' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:57:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7517  Schema: my_database  QC_hit: No
# Query_time: 2.156261  Lock_time: 0.000301  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630025826;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11717' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11717' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:57:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7543  Schema: my_database  QC_hit: No
# Query_time: 1.032354  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 368817
SET timestamp=1630025866;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7396' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7396' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:58:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7569  Schema: my_database  QC_hit: No
# Query_time: 1.208469  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 479398
SET timestamp=1630025920;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5297' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5297' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:58:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7575  Schema: my_database  QC_hit: No
# Query_time: 1.286025  Lock_time: 0.000378  Rows_sent: 3  Rows_examined: 433725
SET timestamp=1630025931;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13958' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13958' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:58:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7577  Schema: my_database  QC_hit: No
# Query_time: 1.120492  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 441260
SET timestamp=1630025934;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19803' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19803' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  3:59:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7585  Schema: my_database  QC_hit: No
# Query_time: 1.698590  Lock_time: 0.000258  Rows_sent: 3  Rows_examined: 661488
SET timestamp=1630025950;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16026' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16026' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:00:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7611  Schema: my_database  QC_hit: No
# Query_time: 1.025764  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 365420
SET timestamp=1630026007;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8529' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8529' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:00:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7615  Schema: my_database  QC_hit: No
# Query_time: 1.315576  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 424139
SET timestamp=1630026011;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2175' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2175' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:00:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7623  Schema: my_database  QC_hit: No
# Query_time: 4.232131  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 826879
SET timestamp=1630026023;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14508' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14508' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:00:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7625  Schema: my_database  QC_hit: No
# Query_time: 5.561075  Lock_time: 0.000332  Rows_sent: 3  Rows_examined: 1358363
SET timestamp=1630026025;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7203' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7203' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:00:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7627  Schema: my_database  QC_hit: No
# Query_time: 1.651715  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 583347
SET timestamp=1630026037;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8955' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8955' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:02:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7655  Schema: my_database  QC_hit: No
# Query_time: 1.450498  Lock_time: 0.000390  Rows_sent: 3  Rows_examined: 480034
SET timestamp=1630026121;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17812' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17812' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:02:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7667  Schema: my_database  QC_hit: No
# Query_time: 1.085462  Lock_time: 0.000423  Rows_sent: 3  Rows_examined: 396345
SET timestamp=1630026152;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22324' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22324' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:03:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7707  Schema: my_database  QC_hit: No
# Query_time: 2.541064  Lock_time: 0.000281  Rows_sent: 3  Rows_examined: 890417
SET timestamp=1630026235;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20275' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20275' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:03:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7713  Schema: my_database  QC_hit: No
# Query_time: 2.217495  Lock_time: 0.000292  Rows_sent: 3  Rows_examined: 716820
SET timestamp=1630026239;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13139' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13139' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:04:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7727  Schema: my_database  QC_hit: No
# Query_time: 1.344313  Lock_time: 0.000425  Rows_sent: 3  Rows_examined: 366846
SET timestamp=1630026281;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9809' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9809' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:04:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7733  Schema: my_database  QC_hit: No
# Query_time: 5.886326  Lock_time: 0.000214  Rows_sent: 3  Rows_examined: 1147996
SET timestamp=1630026289;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17448' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17448' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:04:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7731  Schema: my_database  QC_hit: No
# Query_time: 5.819475  Lock_time: 0.000269  Rows_sent: 3  Rows_examined: 1181616
SET timestamp=1630026290;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21408' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21408' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:06:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7767  Schema: my_database  QC_hit: No
# Query_time: 1.761609  Lock_time: 0.000329  Rows_sent: 3  Rows_examined: 518981
SET timestamp=1630026365;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10025' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10025' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:06:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7789  Schema: my_database  QC_hit: No
# Query_time: 1.113949  Lock_time: 0.000200  Rows_sent: 3  Rows_examined: 375311
SET timestamp=1630026398;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14063' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14063' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:07:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7811  Schema: my_database  QC_hit: No
# Query_time: 3.050985  Lock_time: 0.000352  Rows_sent: 3  Rows_examined: 890411
SET timestamp=1630026437;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20141' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20141' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:08:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7859  Schema: my_database  QC_hit: No
# Query_time: 1.527748  Lock_time: 0.000217  Rows_sent: 3  Rows_examined: 316226
SET timestamp=1630026481;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19885' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19885' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:08:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7875  Schema: my_database  QC_hit: No
# Query_time: 2.490829  Lock_time: 0.000285  Rows_sent: 3  Rows_examined: 604617
SET timestamp=1630026499;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2443' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2443' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:08:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7887  Schema: my_database  QC_hit: No
# Query_time: 2.626845  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 744816
SET timestamp=1630026508;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18060' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18060' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:09:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7913  Schema: my_database  QC_hit: No
# Query_time: 2.459965  Lock_time: 0.000331  Rows_sent: 3  Rows_examined: 830101
SET timestamp=1630026576;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17580' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17580' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:10:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7929  Schema: my_database  QC_hit: No
# Query_time: 1.740195  Lock_time: 0.000285  Rows_sent: 3  Rows_examined: 427858
SET timestamp=1630026640;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20687' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20687' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:10:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7931  Schema: my_database  QC_hit: No
# Query_time: 1.069995  Lock_time: 0.000345  Rows_sent: 3  Rows_examined: 375061
SET timestamp=1630026642;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4620' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4620' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:11:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7951  Schema: my_database  QC_hit: No
# Query_time: 1.521509  Lock_time: 0.000282  Rows_sent: 3  Rows_examined: 480205
SET timestamp=1630026680;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20873' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20873' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:11:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7957  Schema: my_database  QC_hit: No
# Query_time: 1.596416  Lock_time: 0.000199  Rows_sent: 3  Rows_examined: 584625
SET timestamp=1630026695;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18118' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18118' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:12:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 7979  Schema: my_database  QC_hit: No
# Query_time: 1.026103  Lock_time: 0.000478  Rows_sent: 3  Rows_examined: 361628
SET timestamp=1630026764;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9483' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9483' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:14:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8029  Schema: my_database  QC_hit: No
# Query_time: 2.948000  Lock_time: 0.000317  Rows_sent: 3  Rows_examined: 830169
SET timestamp=1630026875;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20337' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20337' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:14:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8033  Schema: my_database  QC_hit: No
# Query_time: 3.738364  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 1397382
SET timestamp=1630026882;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2186' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2186' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:15:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8045  Schema: my_database  QC_hit: No
# Query_time: 1.632303  Lock_time: 0.000394  Rows_sent: 3  Rows_examined: 603022
SET timestamp=1630026924;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9911' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9911' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:15:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8055  Schema: my_database  QC_hit: No
# Query_time: 2.382880  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 826886
SET timestamp=1630026957;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14643' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14643' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:16:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8059  Schema: my_database  QC_hit: No
# Query_time: 1.022730  Lock_time: 0.000242  Rows_sent: 3  Rows_examined: 359609
SET timestamp=1630026970;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20485' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20485' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:16:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8063  Schema: my_database  QC_hit: No
# Query_time: 1.769804  Lock_time: 0.000402  Rows_sent: 3  Rows_examined: 619021
SET timestamp=1630026985;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13165' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13165' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:17:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8097  Schema: my_database  QC_hit: No
# Query_time: 1.227160  Lock_time: 0.000320  Rows_sent: 3  Rows_examined: 479355
SET timestamp=1630027073;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20357' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20357' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:18:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8123  Schema: my_database  QC_hit: No
# Query_time: 1.019803  Lock_time: 0.000332  Rows_sent: 3  Rows_examined: 278060
SET timestamp=1630027126;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21052' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21052' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:19:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8135  Schema: my_database  QC_hit: No
# Query_time: 1.044218  Lock_time: 0.000295  Rows_sent: 3  Rows_examined: 385558
SET timestamp=1630027158;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7267' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7267' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:19:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8137  Schema: my_database  QC_hit: No
# Query_time: 1.263275  Lock_time: 0.000356  Rows_sent: 3  Rows_examined: 478474
SET timestamp=1630027162;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20021' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20021' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:20:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8165  Schema: my_database  QC_hit: No
# Query_time: 1.055227  Lock_time: 0.000367  Rows_sent: 3  Rows_examined: 427953
SET timestamp=1630027245;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20830' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20830' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:20:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8167  Schema: my_database  QC_hit: No
# Query_time: 1.073029  Lock_time: 0.000322  Rows_sent: 3  Rows_examined: 372840
SET timestamp=1630027247;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15585' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15585' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:20:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8169  Schema: my_database  QC_hit: No
# Query_time: 1.304132  Lock_time: 0.000437  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027255;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16762' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16762' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:21:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8171  Schema: my_database  QC_hit: No
# Query_time: 1.115369  Lock_time: 0.000195  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630027261;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8173  Schema: my_database  QC_hit: No
# Query_time: 1.126820  Lock_time: 0.000473  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630027261;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  4:21:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8177  Schema: my_database  QC_hit: No
# Query_time: 1.291419  Lock_time: 0.000353  Rows_sent: 3  Rows_examined: 440209
SET timestamp=1630027263;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21694' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21694' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:21:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8179  Schema: my_database  QC_hit: No
# Query_time: 1.145658  Lock_time: 0.000451  Rows_sent: 3  Rows_examined: 366870
SET timestamp=1630027269;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16631' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16631' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:21:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8183  Schema: my_database  QC_hit: No
# Query_time: 1.558931  Lock_time: 0.000351  Rows_sent: 3  Rows_examined: 442200
SET timestamp=1630027276;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21717' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21717' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:22:10
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8213  Schema: my_database  QC_hit: No
# Query_time: 1.809835  Lock_time: 0.000371  Rows_sent: 3  Rows_examined: 530676
SET timestamp=1630027330;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12441' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12441' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:22:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8215  Schema: my_database  QC_hit: No
# Query_time: 1.401347  Lock_time: 0.000258  Rows_sent: 3  Rows_examined: 493081
SET timestamp=1630027332;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22377' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22377' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:22:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8233  Schema: my_database  QC_hit: No
# Query_time: 1.220456  Lock_time: 0.000234  Rows_sent: 3  Rows_examined: 479393
SET timestamp=1630027372;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20565' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20565' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:22:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8235  Schema: my_database  QC_hit: No
# Query_time: 1.106283  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027375;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16812' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16812' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:23:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8247  Schema: my_database  QC_hit: No
# Query_time: 1.808063  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 442229
SET timestamp=1630027385;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21725' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21725' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:23:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8251  Schema: my_database  QC_hit: No
# Query_time: 1.387292  Lock_time: 0.000270  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630027387;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7892' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7892' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:23:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8255  Schema: my_database  QC_hit: No
# Query_time: 1.111682  Lock_time: 0.000242  Rows_sent: 3  Rows_examined: 440208
SET timestamp=1630027389;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21718' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21718' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:23:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8263  Schema: my_database  QC_hit: No
# Query_time: 1.292634  Lock_time: 0.000298  Rows_sent: 3  Rows_examined: 440213
SET timestamp=1630027398;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21681' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21681' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:23:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8275  Schema: my_database  QC_hit: No
# Query_time: 1.079954  Lock_time: 0.000240  Rows_sent: 3  Rows_examined: 440209
SET timestamp=1630027412;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21726' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21726' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:23:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8279  Schema: my_database  QC_hit: No
# Query_time: 1.156452  Lock_time: 0.000291  Rows_sent: 3  Rows_examined: 341532
SET timestamp=1630027417;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16683' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16683' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:23:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8291  Schema: my_database  QC_hit: No
# Query_time: 1.147798  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 441858
SET timestamp=1630027434;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22965' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22965' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:23:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8299  Schema: my_database  QC_hit: No
# Query_time: 1.004791  Lock_time: 0.000335  Rows_sent: 3  Rows_examined: 363900
SET timestamp=1630027439;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2301' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2301' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8301  Schema: my_database  QC_hit: No
# Query_time: 1.896022  Lock_time: 0.000224  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630027442;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13997' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13997' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8303  Schema: my_database  QC_hit: No
# Query_time: 1.629332  Lock_time: 0.000435  Rows_sent: 3  Rows_examined: 366375
SET timestamp=1630027443;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17833' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17833' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8305  Schema: my_database  QC_hit: No
# Query_time: 1.105489  Lock_time: 0.000301  Rows_sent: 3  Rows_examined: 372840
SET timestamp=1630027445;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7520' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7520' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8313  Schema: my_database  QC_hit: No
# Query_time: 1.101388  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 442206
SET timestamp=1630027452;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21689' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21689' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8319  Schema: my_database  QC_hit: No
# Query_time: 1.243511  Lock_time: 0.000212  Rows_sent: 3  Rows_examined: 375305
SET timestamp=1630027455;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14008' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14008' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8327  Schema: my_database  QC_hit: No
# Query_time: 1.136825  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 406856
SET timestamp=1630027464;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16642' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16642' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8329  Schema: my_database  QC_hit: No
# Query_time: 1.270771  Lock_time: 0.000301  Rows_sent: 3  Rows_examined: 432234
SET timestamp=1630027468;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13969' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13969' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8335  Schema: my_database  QC_hit: No
# Query_time: 1.604594  Lock_time: 0.000243  Rows_sent: 3  Rows_examined: 575122
SET timestamp=1630027475;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13594' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13594' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8337  Schema: my_database  QC_hit: No
# Query_time: 1.329584  Lock_time: 0.000318  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027479;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16815' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16815' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8339  Schema: my_database  QC_hit: No
# Query_time: 1.434703  Lock_time: 0.000349  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027483;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16814' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16814' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:24:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8343  Schema: my_database  QC_hit: No
# Query_time: 1.138021  Lock_time: 0.000353  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027486;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16753' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16753' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:25:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8355  Schema: my_database  QC_hit: No
# Query_time: 2.599975  Lock_time: 0.000332  Rows_sent: 3  Rows_examined: 376208
SET timestamp=1630027503;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13923' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13923' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:25:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8357  Schema: my_database  QC_hit: No
# Query_time: 1.313382  Lock_time: 0.000420  Rows_sent: 3  Rows_examined: 372840
SET timestamp=1630027505;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7519' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7519' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:25:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8365  Schema: my_database  QC_hit: No
# Query_time: 1.348656  Lock_time: 0.000407  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630027509;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8367  Schema: my_database  QC_hit: No
# Query_time: 1.316903  Lock_time: 0.000317  Rows_sent: 5  Rows_examined: 71103
SET timestamp=1630027509;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1652' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  4:25:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8363  Schema: my_database  QC_hit: No
# Query_time: 3.654465  Lock_time: 0.000316  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027511;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16765' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16765' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8359  Schema: my_database  QC_hit: No
# Query_time: 4.430571  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630027511;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11617' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11617' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:25:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8375  Schema: my_database  QC_hit: No
# Query_time: 1.178917  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 440208
SET timestamp=1630027523;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21696' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21696' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:25:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8385  Schema: my_database  QC_hit: No
# Query_time: 1.353045  Lock_time: 0.000303  Rows_sent: 3  Rows_examined: 442234
SET timestamp=1630027542;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21687' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21687' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:25:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8389  Schema: my_database  QC_hit: No
# Query_time: 1.236099  Lock_time: 0.000276  Rows_sent: 3  Rows_examined: 406856
SET timestamp=1630027545;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16644' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16644' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:25:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8391  Schema: my_database  QC_hit: No
# Query_time: 1.120817  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 406660
SET timestamp=1630027548;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16757' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16757' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:26:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8401  Schema: my_database  QC_hit: No
# Query_time: 1.208454  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 440208
SET timestamp=1630027561;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21722' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21722' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:26:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8403  Schema: my_database  QC_hit: No
# Query_time: 2.245008  Lock_time: 0.000465  Rows_sent: 3  Rows_examined: 583285
SET timestamp=1630027565;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '10278' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '10278' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:26:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8407  Schema: my_database  QC_hit: No
# Query_time: 2.047874  Lock_time: 0.000249  Rows_sent: 3  Rows_examined: 480067
SET timestamp=1630027568;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21136' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21136' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:26:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8409  Schema: my_database  QC_hit: No
# Query_time: 1.208942  Lock_time: 0.000280  Rows_sent: 3  Rows_examined: 440208
SET timestamp=1630027574;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21716' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21716' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:26:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8415  Schema: my_database  QC_hit: No
# Query_time: 1.449677  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 578124
SET timestamp=1630027579;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13619' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13619' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:26:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8427  Schema: my_database  QC_hit: No
# Query_time: 1.935821  Lock_time: 0.000266  Rows_sent: 3  Rows_examined: 764831
SET timestamp=1630027601;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5095' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5095' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:26:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8429  Schema: my_database  QC_hit: No
# Query_time: 1.282704  Lock_time: 0.000429  Rows_sent: 3  Rows_examined: 479273
SET timestamp=1630027618;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6037' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6037' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:27:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8443  Schema: my_database  QC_hit: No
# Query_time: 2.243980  Lock_time: 0.000404  Rows_sent: 3  Rows_examined: 701644
SET timestamp=1630027651;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22440' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22440' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:27:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8451  Schema: my_database  QC_hit: No
# Query_time: 1.708984  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 595021
SET timestamp=1630027666;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18025' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18025' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:27:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8457  Schema: my_database  QC_hit: No
# Query_time: 1.193811  Lock_time: 0.000432  Rows_sent: 3  Rows_examined: 370199
SET timestamp=1630027671;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1981' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1981' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:27:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8461  Schema: my_database  QC_hit: No
# Query_time: 1.280957  Lock_time: 0.000274  Rows_sent: 3  Rows_examined: 369364
SET timestamp=1630027673;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2751' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2751' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:27:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8465  Schema: my_database  QC_hit: No
# Query_time: 1.042598  Lock_time: 0.000393  Rows_sent: 3  Rows_examined: 370870
SET timestamp=1630027675;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7509' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7509' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8475  Schema: my_database  QC_hit: No
# Query_time: 1.078258  Lock_time: 0.000200  Rows_sent: 3  Rows_examined: 440209
SET timestamp=1630027686;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21692' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21692' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:08
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8477  Schema: my_database  QC_hit: No
# Query_time: 1.096598  Lock_time: 0.000303  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027688;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16714' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16714' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8483  Schema: my_database  QC_hit: No
# Query_time: 1.962730  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027693;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16802' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16802' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8481  Schema: my_database  QC_hit: No
# Query_time: 2.019740  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 393942
SET timestamp=1630027693;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13878' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13878' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8485  Schema: my_database  QC_hit: No
# Query_time: 1.254188  Lock_time: 0.000382  Rows_sent: 3  Rows_examined: 341532
SET timestamp=1630027695;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16692' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16692' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8487  Schema: my_database  QC_hit: No
# Query_time: 2.079702  Lock_time: 0.000310  Rows_sent: 3  Rows_examined: 478650
SET timestamp=1630027698;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20757' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20757' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8489  Schema: my_database  QC_hit: No
# Query_time: 1.853767  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027698;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16715' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16715' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8491  Schema: my_database  QC_hit: No
# Query_time: 1.348118  Lock_time: 0.000322  Rows_sent: 3  Rows_examined: 442236
SET timestamp=1630027700;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21691' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21691' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8501  Schema: my_database  QC_hit: No
# Query_time: 1.082068  Lock_time: 0.000223  Rows_sent: 3  Rows_examined: 406660
SET timestamp=1630027711;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16707' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16707' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8503  Schema: my_database  QC_hit: No
# Query_time: 1.086222  Lock_time: 0.000318  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027714;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16756' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16756' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8507  Schema: my_database  QC_hit: No
# Query_time: 1.793514  Lock_time: 0.000297  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027720;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16801' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16801' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8513  Schema: my_database  QC_hit: No
# Query_time: 1.009078  Lock_time: 0.000271  Rows_sent: 3  Rows_examined: 341531
SET timestamp=1630027722;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16729' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16729' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:45
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8515  Schema: my_database  QC_hit: No
# Query_time: 1.046596  Lock_time: 0.000372  Rows_sent: 3  Rows_examined: 406846
SET timestamp=1630027725;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16712' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16712' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8523  Schema: my_database  QC_hit: No
# Query_time: 1.508196  Lock_time: 0.000361  Rows_sent: 3  Rows_examined: 369299
SET timestamp=1630027733;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2768' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2768' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8521  Schema: my_database  QC_hit: No
# Query_time: 2.601639  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 681791
SET timestamp=1630027734;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16434' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16434' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8525  Schema: my_database  QC_hit: No
# Query_time: 1.282824  Lock_time: 0.000276  Rows_sent: 3  Rows_examined: 328551
SET timestamp=1630027736;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16787' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16787' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:28:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8527  Schema: my_database  QC_hit: No
# Query_time: 1.481796  Lock_time: 0.000363  Rows_sent: 3  Rows_examined: 345152
SET timestamp=1630027738;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6748' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6748' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:29:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8547  Schema: my_database  QC_hit: No
# Query_time: 1.235627  Lock_time: 0.000364  Rows_sent: 3  Rows_examined: 344444
SET timestamp=1630027760;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15600' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15600' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:29:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8549  Schema: my_database  QC_hit: No
# Query_time: 1.214292  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 367645
SET timestamp=1630027762;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6333' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6333' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:29:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8551  Schema: my_database  QC_hit: No
# Query_time: 3.275419  Lock_time: 0.000448  Rows_sent: 3  Rows_examined: 858701
SET timestamp=1630027765;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13564' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13564' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:29:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8561  Schema: my_database  QC_hit: No
# Query_time: 1.785458  Lock_time: 0.000279  Rows_sent: 3  Rows_examined: 577674
SET timestamp=1630027776;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13639' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13639' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:29:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8569  Schema: my_database  QC_hit: No
# Query_time: 1.691234  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 442200
SET timestamp=1630027779;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21697' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21697' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:29:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8573  Schema: my_database  QC_hit: No
# Query_time: 4.337396  Lock_time: 0.000250  Rows_sent: 3  Rows_examined: 765875
SET timestamp=1630027786;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7299' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7299' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:29:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8585  Schema: my_database  QC_hit: No
# Query_time: 1.363147  Lock_time: 0.000271  Rows_sent: 3  Rows_examined: 479423
SET timestamp=1630027793;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21176' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21176' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:30:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8619  Schema: my_database  QC_hit: No
# Query_time: 2.130848  Lock_time: 0.000334  Rows_sent: 3  Rows_examined: 585334
SET timestamp=1630027823;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22039' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22039' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:30:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8647  Schema: my_database  QC_hit: No
# Query_time: 1.021156  Lock_time: 0.000349  Rows_sent: 3  Rows_examined: 370951
SET timestamp=1630027844;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2744' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2744' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:30:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8651  Schema: my_database  QC_hit: No
# Query_time: 1.363037  Lock_time: 0.000285  Rows_sent: 3  Rows_examined: 442235
SET timestamp=1630027847;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21703' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21703' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:30:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8655  Schema: my_database  QC_hit: No
# Query_time: 1.208639  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 440208
SET timestamp=1630027850;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21698' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21698' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:30:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8657  Schema: my_database  QC_hit: No
# Query_time: 1.305422  Lock_time: 0.000310  Rows_sent: 3  Rows_examined: 442206
SET timestamp=1630027853;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21701' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21701' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:30:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8663  Schema: my_database  QC_hit: No
# Query_time: 1.005385  Lock_time: 0.000296  Rows_sent: 3  Rows_examined: 371828
SET timestamp=1630027855;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4069' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4069' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:30:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8667  Schema: my_database  QC_hit: No
# Query_time: 1.343689  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 372840
SET timestamp=1630027858;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7514' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7514' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8677  Schema: my_database  QC_hit: No
# Query_time: 1.844612  Lock_time: 0.000358  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027864;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16705' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16705' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8675  Schema: my_database  QC_hit: No
# Query_time: 4.302323  Lock_time: 0.000225  Rows_sent: 3  Rows_examined: 1181420
SET timestamp=1630027866;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17794' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17794' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8683  Schema: my_database  QC_hit: No
# Query_time: 1.300469  Lock_time: 0.000286  Rows_sent: 3  Rows_examined: 343628
SET timestamp=1630027871;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15604' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15604' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8685  Schema: my_database  QC_hit: No
# Query_time: 2.966091  Lock_time: 0.000428  Rows_sent: 3  Rows_examined: 886307
SET timestamp=1630027872;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16976' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16976' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8689  Schema: my_database  QC_hit: No
# Query_time: 1.557812  Lock_time: 0.000249  Rows_sent: 3  Rows_examined: 555713
SET timestamp=1630027876;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23139' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23139' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8693  Schema: my_database  QC_hit: No
# Query_time: 1.279055  Lock_time: 0.000255  Rows_sent: 3  Rows_examined: 432234
SET timestamp=1630027878;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13966' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13966' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8701  Schema: my_database  QC_hit: No
# Query_time: 1.196760  Lock_time: 0.000267  Rows_sent: 3  Rows_examined: 442229
SET timestamp=1630027882;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21699' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21699' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8705  Schema: my_database  QC_hit: No
# Query_time: 1.178574  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 356441
SET timestamp=1630027884;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15841' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15841' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8709  Schema: my_database  QC_hit: No
# Query_time: 2.502866  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 764771
SET timestamp=1630027887;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5098' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5098' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8719  Schema: my_database  QC_hit: No
# Query_time: 1.715297  Lock_time: 0.000263  Rows_sent: 3  Rows_examined: 557317
SET timestamp=1630027893;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23142' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23142' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8721  Schema: my_database  QC_hit: No
# Query_time: 1.077692  Lock_time: 0.000295  Rows_sent: 3  Rows_examined: 341532
SET timestamp=1630027894;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16682' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16682' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8723  Schema: my_database  QC_hit: No
# Query_time: 1.718323  Lock_time: 0.000223  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630027897;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19783' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19783' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:31:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8729  Schema: my_database  QC_hit: No
# Query_time: 1.020557  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027902;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16716' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16716' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8736  Schema: my_database  QC_hit: No
# Query_time: 1.693436  Lock_time: 0.000349  Rows_sent: 3  Rows_examined: 530673
SET timestamp=1630027932;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11803' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11803' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8738  Schema: my_database  QC_hit: No
# Query_time: 1.329640  Lock_time: 0.000344  Rows_sent: 3  Rows_examined: 475555
SET timestamp=1630027938;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17053' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17053' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8748  Schema: my_database  QC_hit: No
# Query_time: 1.355730  Lock_time: 0.000255  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027950;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16809' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16809' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8750  Schema: my_database  QC_hit: No
# Query_time: 1.620918  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 364402
SET timestamp=1630027954;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16627' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16627' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8752  Schema: my_database  QC_hit: No
# Query_time: 1.659004  Lock_time: 0.000376  Rows_sent: 3  Rows_examined: 372006
SET timestamp=1630027954;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15483' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15483' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8754  Schema: my_database  QC_hit: No
# Query_time: 1.131869  Lock_time: 0.000363  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630027956;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16779' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16779' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8756  Schema: my_database  QC_hit: No
# Query_time: 1.051444  Lock_time: 0.000392  Rows_sent: 3  Rows_examined: 374391
SET timestamp=1630027957;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15486' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15486' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8760  Schema: my_database  QC_hit: No
# Query_time: 1.686818  Lock_time: 0.000434  Rows_sent: 3  Rows_examined: 371123
SET timestamp=1630027961;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15487' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15487' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8758  Schema: my_database  QC_hit: No
# Query_time: 2.528725  Lock_time: 0.000389  Rows_sent: 3  Rows_examined: 608450
SET timestamp=1630027961;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6939' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6939' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8762  Schema: my_database  QC_hit: No
# Query_time: 1.373345  Lock_time: 0.000216  Rows_sent: 3  Rows_examined: 369319
SET timestamp=1630027963;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22114' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22114' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8764  Schema: my_database  QC_hit: No
# Query_time: 1.263867  Lock_time: 0.000210  Rows_sent: 3  Rows_examined: 341532
SET timestamp=1630027963;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16677' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16677' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8766  Schema: my_database  QC_hit: No
# Query_time: 1.437261  Lock_time: 0.000209  Rows_sent: 3  Rows_examined: 575650
SET timestamp=1630027966;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13596' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13596' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8768  Schema: my_database  QC_hit: No
# Query_time: 1.065647  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 440208
SET timestamp=1630027968;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21712' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21712' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:32:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8770  Schema: my_database  QC_hit: No
# Query_time: 1.567228  Lock_time: 0.000292  Rows_sent: 3  Rows_examined: 365528
SET timestamp=1630027971;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6894' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6894' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8772  Schema: my_database  QC_hit: No
# Query_time: 1.503575  Lock_time: 0.000302  Rows_sent: 3  Rows_examined: 370886
SET timestamp=1630027971;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2771' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2771' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8778  Schema: my_database  QC_hit: No
# Query_time: 2.294049  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 577060
SET timestamp=1630027980;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13545' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13545' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8790  Schema: my_database  QC_hit: No
# Query_time: 1.103793  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 440208
SET timestamp=1630027991;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21710' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21710' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8792  Schema: my_database  QC_hit: No
# Query_time: 1.178574  Lock_time: 0.000450  Rows_sent: 3  Rows_examined: 359696
SET timestamp=1630027994;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8478' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8478' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8794  Schema: my_database  QC_hit: No
# Query_time: 3.586027  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 974921
SET timestamp=1630027998;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16397' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16397' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8798  Schema: my_database  QC_hit: No
# Query_time: 1.434579  Lock_time: 0.000495  Rows_sent: 3  Rows_examined: 479388
SET timestamp=1630028000;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7548' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7548' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8802  Schema: my_database  QC_hit: No
# Query_time: 1.234905  Lock_time: 0.000232  Rows_sent: 3  Rows_examined: 440208
SET timestamp=1630028002;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21714' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21714' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8812  Schema: my_database  QC_hit: No
# Query_time: 2.433484  Lock_time: 0.000242  Rows_sent: 3  Rows_examined: 910145
SET timestamp=1630028012;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13510' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13510' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8816  Schema: my_database  QC_hit: No
# Query_time: 1.081096  Lock_time: 0.000333  Rows_sent: 3  Rows_examined: 172812
SET timestamp=1630028014;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18295' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18295' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8818  Schema: my_database  QC_hit: No
# Query_time: 1.138001  Lock_time: 0.000363  Rows_sent: 3  Rows_examined: 172812
SET timestamp=1630028015;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18295' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18295' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8820  Schema: my_database  QC_hit: No
# Query_time: 1.030234  Lock_time: 0.000176  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630028019;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8822  Schema: my_database  QC_hit: No
# Query_time: 1.145426  Lock_time: 0.000215  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630028019;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  4:33:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8824  Schema: my_database  QC_hit: No
# Query_time: 1.479168  Lock_time: 0.000310  Rows_sent: 3  Rows_examined: 252354
SET timestamp=1630028021;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15238' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15238' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8828  Schema: my_database  QC_hit: No
# Query_time: 1.986921  Lock_time: 0.000280  Rows_sent: 3  Rows_examined: 568202
SET timestamp=1630028023;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15676' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15676' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8832  Schema: my_database  QC_hit: No
# Query_time: 1.442267  Lock_time: 0.000246  Rows_sent: 3  Rows_examined: 304250
SET timestamp=1630028026;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6016' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6016' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8834  Schema: my_database  QC_hit: No
# Query_time: 1.944879  Lock_time: 0.000304  Rows_sent: 3  Rows_examined: 530032
SET timestamp=1630028026;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1972' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1972' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:33:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8838  Schema: my_database  QC_hit: No
# Query_time: 1.025762  Lock_time: 0.000274  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028028;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16754' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16754' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:34:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8852  Schema: my_database  QC_hit: No
# Query_time: 2.242161  Lock_time: 0.000415  Rows_sent: 3  Rows_examined: 826172
SET timestamp=1630028051;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14498' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14498' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:34:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8860  Schema: my_database  QC_hit: No
# Query_time: 1.155810  Lock_time: 0.000267  Rows_sent: 3  Rows_examined: 427542
SET timestamp=1630028061;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20838' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20838' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:34:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8864  Schema: my_database  QC_hit: No
# Query_time: 2.797117  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 840883
SET timestamp=1630028072;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '720' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '720' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:34:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8878  Schema: my_database  QC_hit: No
# Query_time: 1.076380  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028086;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16810' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16810' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:34:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8884  Schema: my_database  QC_hit: No
# Query_time: 3.107076  Lock_time: 0.000325  Rows_sent: 3  Rows_examined: 1180035
SET timestamp=1630028095;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22634' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22634' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:34:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8886  Schema: my_database  QC_hit: No
# Query_time: 1.313331  Lock_time: 0.000191  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028097;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16777' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16777' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:34:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8890  Schema: my_database  QC_hit: No
# Query_time: 1.379951  Lock_time: 0.000240  Rows_sent: 3  Rows_examined: 428630
SET timestamp=1630028098;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18341' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18341' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:35:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8894  Schema: my_database  QC_hit: No
# Query_time: 2.291298  Lock_time: 0.000362  Rows_sent: 3  Rows_examined: 371926
SET timestamp=1630028103;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7511' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7511' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:35:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8896  Schema: my_database  QC_hit: No
# Query_time: 1.277185  Lock_time: 0.000396  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028106;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16702' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16702' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:35:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8904  Schema: my_database  QC_hit: No
# Query_time: 1.116464  Lock_time: 0.000351  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028124;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16711' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16711' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:35:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8908  Schema: my_database  QC_hit: No
# Query_time: 1.957354  Lock_time: 0.000248  Rows_sent: 3  Rows_examined: 371439
SET timestamp=1630028128;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4070' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4070' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8910  Schema: my_database  QC_hit: No
# Query_time: 1.910181  Lock_time: 0.000296  Rows_sent: 3  Rows_examined: 354614
SET timestamp=1630028128;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22140' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22140' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:35:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8914  Schema: my_database  QC_hit: No
# Query_time: 1.201247  Lock_time: 0.000248  Rows_sent: 3  Rows_examined: 417762
SET timestamp=1630028131;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6760' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6760' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:36:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8922  Schema: my_database  QC_hit: No
# Query_time: 1.011811  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 357192
SET timestamp=1630028161;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19725' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19725' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:36:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8928  Schema: my_database  QC_hit: No
# Query_time: 4.674783  Lock_time: 0.000348  Rows_sent: 3  Rows_examined: 1531407
SET timestamp=1630028192;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7730' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7730' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:36:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8936  Schema: my_database  QC_hit: No
# Query_time: 2.414895  Lock_time: 0.000407  Rows_sent: 3  Rows_examined: 767810
SET timestamp=1630028212;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15645' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15645' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:36:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8940  Schema: my_database  QC_hit: No
# Query_time: 1.175976  Lock_time: 0.000269  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028216;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16760' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16760' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:36:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8944  Schema: my_database  QC_hit: No
# Query_time: 1.136958  Lock_time: 0.000335  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028218;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16752' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16752' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:37:01
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8948  Schema: my_database  QC_hit: No
# Query_time: 1.007650  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 369250
SET timestamp=1630028221;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4067' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4067' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:37:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8962  Schema: my_database  QC_hit: No
# Query_time: 1.139177  Lock_time: 0.000197  Rows_sent: 3  Rows_examined: 371828
SET timestamp=1630028229;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2776' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2776' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:37:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8964  Schema: my_database  QC_hit: No
# Query_time: 1.638222  Lock_time: 0.000328  Rows_sent: 3  Rows_examined: 479414
SET timestamp=1630028231;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18909' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18909' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:37:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 8970  Schema: my_database  QC_hit: No
# Query_time: 1.173934  Lock_time: 0.000283  Rows_sent: 3  Rows_examined: 430022
SET timestamp=1630028238;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13834' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13834' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:37:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9006  Schema: my_database  QC_hit: No
# Query_time: 1.545239  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 530666
SET timestamp=1630028278;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12710' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12710' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:38:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9026  Schema: my_database  QC_hit: No
# Query_time: 1.031509  Lock_time: 0.000264  Rows_sent: 15  Rows_examined: 72057
SET timestamp=1630028295;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '2255' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  4:38:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9028  Schema: my_database  QC_hit: No
# Query_time: 2.084719  Lock_time: 0.000235  Rows_sent: 3  Rows_examined: 500559
SET timestamp=1630028299;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14441' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14441' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:38:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9042  Schema: my_database  QC_hit: No
# Query_time: 1.071835  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028319;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16817' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16817' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:38:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9048  Schema: my_database  QC_hit: No
# Query_time: 1.270781  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 478331
SET timestamp=1630028329;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17825' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17825' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:38:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9050  Schema: my_database  QC_hit: No
# Query_time: 1.080780  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 447287
SET timestamp=1630028331;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7839' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7839' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:39:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9056  Schema: my_database  QC_hit: No
# Query_time: 1.388820  Lock_time: 0.000372  Rows_sent: 3  Rows_examined: 408463
SET timestamp=1630028346;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16818' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16818' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:39:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9062  Schema: my_database  QC_hit: No
# Query_time: 1.087901  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 441730
SET timestamp=1630028351;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22953' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22953' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:39:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9066  Schema: my_database  QC_hit: No
# Query_time: 1.152810  Lock_time: 0.000251  Rows_sent: 3  Rows_examined: 428603
SET timestamp=1630028357;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21119' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21119' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:39:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9076  Schema: my_database  QC_hit: No
# Query_time: 1.183169  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 370749
SET timestamp=1630028365;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7506' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7506' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:39:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9080  Schema: my_database  QC_hit: No
# Query_time: 1.110241  Lock_time: 0.000305  Rows_sent: 3  Rows_examined: 406473
SET timestamp=1630028370;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16783' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16783' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:39:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9092  Schema: my_database  QC_hit: No
# Query_time: 1.298138  Lock_time: 0.000356  Rows_sent: 3  Rows_examined: 355467
SET timestamp=1630028381;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15603' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15603' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:39:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9096  Schema: my_database  QC_hit: No
# Query_time: 1.625427  Lock_time: 0.000277  Rows_sent: 3  Rows_examined: 579550
SET timestamp=1630028384;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13511' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13511' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:39:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9100  Schema: my_database  QC_hit: No
# Query_time: 1.598703  Lock_time: 0.000280  Rows_sent: 3  Rows_examined: 577668
SET timestamp=1630028387;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4894' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4894' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:40:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9124  Schema: my_database  QC_hit: No
# Query_time: 1.781107  Lock_time: 0.000341  Rows_sent: 3  Rows_examined: 567091
SET timestamp=1630028409;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23054' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23054' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:40:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9132  Schema: my_database  QC_hit: No
# Query_time: 1.209148  Lock_time: 0.000299  Rows_sent: 3  Rows_examined: 364962
SET timestamp=1630028423;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6895' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6895' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:40:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9134  Schema: my_database  QC_hit: No
# Query_time: 1.332963  Lock_time: 0.000258  Rows_sent: 3  Rows_examined: 495657
SET timestamp=1630028425;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2785' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2785' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:40:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9136  Schema: my_database  QC_hit: No
# Query_time: 1.239839  Lock_time: 0.000407  Rows_sent: 3  Rows_examined: 442205
SET timestamp=1630028428;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21678' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21678' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:40:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9144  Schema: my_database  QC_hit: No
# Query_time: 2.967676  Lock_time: 0.000309  Rows_sent: 3  Rows_examined: 1029235
SET timestamp=1630028448;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23163' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23163' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:40:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9148  Schema: my_database  QC_hit: No
# Query_time: 2.216405  Lock_time: 0.000331  Rows_sent: 3  Rows_examined: 428056
SET timestamp=1630028452;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18350' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18350' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:40:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9146  Schema: my_database  QC_hit: No
# Query_time: 3.562098  Lock_time: 0.000289  Rows_sent: 3  Rows_examined: 766373
SET timestamp=1630028453;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5136' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5136' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9170  Schema: my_database  QC_hit: No
# Query_time: 1.848025  Lock_time: 0.000250  Rows_sent: 3  Rows_examined: 500132
SET timestamp=1630028471;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3780' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3780' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9174  Schema: my_database  QC_hit: No
# Query_time: 1.362328  Lock_time: 0.000303  Rows_sent: 3  Rows_examined: 406253
SET timestamp=1630028474;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16770' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16770' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9180  Schema: my_database  QC_hit: No
# Query_time: 2.214052  Lock_time: 0.000191  Rows_sent: 3  Rows_examined: 499671
SET timestamp=1630028477;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3783' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3783' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9176  Schema: my_database  QC_hit: No
# Query_time: 2.962975  Lock_time: 0.000188  Rows_sent: 3  Rows_examined: 718590
SET timestamp=1630028477;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '517' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '517' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9188  Schema: my_database  QC_hit: No
# Query_time: 1.224488  Lock_time: 0.000248  Rows_sent: 3  Rows_examined: 427649
SET timestamp=1630028488;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20973' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20973' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9196  Schema: my_database  QC_hit: No
# Query_time: 2.538880  Lock_time: 0.000531  Rows_sent: 3  Rows_examined: 364757
SET timestamp=1630028496;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15597' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15597' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9192  Schema: my_database  QC_hit: No
# Query_time: 3.447822  Lock_time: 0.000215  Rows_sent: 3  Rows_examined: 556319
SET timestamp=1630028496;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23131' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23131' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9194  Schema: my_database  QC_hit: No
# Query_time: 4.220049  Lock_time: 0.000195  Rows_sent: 3  Rows_examined: 858713
SET timestamp=1630028497;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13568' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13568' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9204  Schema: my_database  QC_hit: No
# Query_time: 1.648664  Lock_time: 0.000181  Rows_sent: 3  Rows_examined: 586824
SET timestamp=1630028503;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19794' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19794' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9210  Schema: my_database  QC_hit: No
# Query_time: 1.924632  Lock_time: 0.000314  Rows_sent: 3  Rows_examined: 589377
SET timestamp=1630028507;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22789' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22789' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9214  Schema: my_database  QC_hit: No
# Query_time: 1.125895  Lock_time: 0.000250  Rows_sent: 3  Rows_examined: 406856
SET timestamp=1630028512;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16644' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16644' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9218  Schema: my_database  QC_hit: No
# Query_time: 1.526626  Lock_time: 0.000309  Rows_sent: 3  Rows_examined: 577712
SET timestamp=1630028515;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13212' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13212' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9220  Schema: my_database  QC_hit: No
# Query_time: 1.565200  Lock_time: 0.000211  Rows_sent: 3  Rows_examined: 403680
SET timestamp=1630028517;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19266' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19266' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:41:58
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9222  Schema: my_database  QC_hit: No
# Query_time: 1.391565  Lock_time: 0.000269  Rows_sent: 3  Rows_examined: 370951
SET timestamp=1630028518;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4064' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4064' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9230  Schema: my_database  QC_hit: No
# Query_time: 1.030479  Lock_time: 0.000330  Rows_sent: 3  Rows_examined: 357301
SET timestamp=1630028525;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4080' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4080' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:12
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9238  Schema: my_database  QC_hit: No
# Query_time: 1.016473  Lock_time: 0.000253  Rows_sent: 3  Rows_examined: 362078
SET timestamp=1630028532;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9431' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9431' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9240  Schema: my_database  QC_hit: No
# Query_time: 1.407729  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 442229
SET timestamp=1630028534;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21715' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21715' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9242  Schema: my_database  QC_hit: No
# Query_time: 1.520079  Lock_time: 0.000340  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028536;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16816' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16816' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9250  Schema: my_database  QC_hit: No
# Query_time: 2.225719  Lock_time: 0.000230  Rows_sent: 3  Rows_examined: 344444
SET timestamp=1630028541;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15606' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15606' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9246  Schema: my_database  QC_hit: No
# Query_time: 5.408243  Lock_time: 0.000190  Rows_sent: 3  Rows_examined: 1040171
SET timestamp=1630028543;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14599' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14599' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9248  Schema: my_database  QC_hit: No
# Query_time: 4.488361  Lock_time: 0.000306  Rows_sent: 3  Rows_examined: 840895
SET timestamp=1630028543;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2404' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2404' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9260  Schema: my_database  QC_hit: No
# Query_time: 1.547482  Lock_time: 0.000205  Rows_sent: 3  Rows_examined: 353610
SET timestamp=1630028547;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19531' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19531' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9262  Schema: my_database  QC_hit: No
# Query_time: 1.761191  Lock_time: 0.000265  Rows_sent: 3  Rows_examined: 442200
SET timestamp=1630028547;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21713' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21713' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9266  Schema: my_database  QC_hit: No
# Query_time: 1.076271  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 408463
SET timestamp=1630028552;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16719' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16719' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9268  Schema: my_database  QC_hit: No
# Query_time: 1.248122  Lock_time: 0.000384  Rows_sent: 3  Rows_examined: 478519
SET timestamp=1630028556;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2368' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2368' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9272  Schema: my_database  QC_hit: No
# Query_time: 1.363775  Lock_time: 0.000298  Rows_sent: 3  Rows_examined: 353610
SET timestamp=1630028558;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19531' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19531' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9274  Schema: my_database  QC_hit: No
# Query_time: 1.553380  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 440214
SET timestamp=1630028558;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21706' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21706' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:42:54
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9296  Schema: my_database  QC_hit: No
# Query_time: 1.366265  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 370870
SET timestamp=1630028574;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7509' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7509' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:43:00
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9302  Schema: my_database  QC_hit: No
# Query_time: 1.295582  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 555392
SET timestamp=1630028580;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1094' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1094' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:43:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9304  Schema: my_database  QC_hit: No
# Query_time: 1.261203  Lock_time: 0.000190  Rows_sent: 3  Rows_examined: 500132
SET timestamp=1630028583;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3779' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3779' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:43:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9326  Schema: my_database  QC_hit: No
# Query_time: 1.156938  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028596;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16709' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16709' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:43:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9332  Schema: my_database  QC_hit: No
# Query_time: 1.068276  Lock_time: 0.000307  Rows_sent: 3  Rows_examined: 406473
SET timestamp=1630028612;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16807' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16807' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:43:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9336  Schema: my_database  QC_hit: No
# Query_time: 1.311506  Lock_time: 0.000300  Rows_sent: 3  Rows_examined: 285703
SET timestamp=1630028617;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8708' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8708' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:43:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9360  Schema: my_database  QC_hit: No
# Query_time: 1.067661  Lock_time: 0.000287  Rows_sent: 3  Rows_examined: 406856
SET timestamp=1630028637;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16648' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16648' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:44:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9374  Schema: my_database  QC_hit: No
# Query_time: 1.106413  Lock_time: 0.000242  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028653;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16746' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16746' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:44:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9382  Schema: my_database  QC_hit: No
# Query_time: 1.017842  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 370267
SET timestamp=1630028661;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7458' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7458' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:44:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9400  Schema: my_database  QC_hit: No
# Query_time: 1.007568  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 359696
SET timestamp=1630028680;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4081' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4081' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:44:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9416  Schema: my_database  QC_hit: No
# Query_time: 2.436518  Lock_time: 0.000236  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028696;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16801' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16801' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:44:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9418  Schema: my_database  QC_hit: No
# Query_time: 3.318526  Lock_time: 0.000269  Rows_sent: 3  Rows_examined: 593403
SET timestamp=1630028697;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15637' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15637' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:45:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9426  Schema: my_database  QC_hit: No
# Query_time: 1.218469  Lock_time: 0.000290  Rows_sent: 3  Rows_examined: 406660
SET timestamp=1630028705;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16707' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16707' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:45:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9428  Schema: my_database  QC_hit: No
# Query_time: 1.027212  Lock_time: 0.000273  Rows_sent: 3  Rows_examined: 406660
SET timestamp=1630028707;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16707' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16707' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:45:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9430  Schema: my_database  QC_hit: No
# Query_time: 1.007896  Lock_time: 0.000284  Rows_sent: 3  Rows_examined: 406856
SET timestamp=1630028711;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16642' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16642' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:45:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9438  Schema: my_database  QC_hit: No
# Query_time: 1.129622  Lock_time: 0.000290  Rows_sent: 3  Rows_examined: 370372
SET timestamp=1630028716;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7502' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7502' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:45:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9436  Schema: my_database  QC_hit: No
# Query_time: 1.979530  Lock_time: 0.559241  Rows_sent: 3  Rows_examined: 678116
SET timestamp=1630028718;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21572' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21572' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:45:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9442  Schema: my_database  QC_hit: No
# Query_time: 1.432316  Lock_time: 0.000248  Rows_sent: 3  Rows_examined: 341531
SET timestamp=1630028720;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16733' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16733' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:45:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9440  Schema: my_database  QC_hit: No
# Query_time: 3.334562  Lock_time: 0.613005  Rows_sent: 3  Rows_examined: 608353
SET timestamp=1630028721;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19057' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19057' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:45:47
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9470  Schema: my_database  QC_hit: No
# Query_time: 1.097994  Lock_time: 0.000304  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028747;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16815' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16815' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9488  Schema: my_database  QC_hit: No
# Query_time: 3.843833  Lock_time: 0.000368  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630028762;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21479' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21479' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9490  Schema: my_database  QC_hit: No
# Query_time: 1.168677  Lock_time: 0.000410  Rows_sent: 3  Rows_examined: 364402
SET timestamp=1630028764;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16630' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16630' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9512  Schema: my_database  QC_hit: No
# Query_time: 1.023033  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 368852
SET timestamp=1630028781;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17497' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17497' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9518  Schema: my_database  QC_hit: No
# Query_time: 1.177057  Lock_time: 0.000354  Rows_sent: 3  Rows_examined: 406478
SET timestamp=1630028785;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16649' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16649' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9522  Schema: my_database  QC_hit: No
# Query_time: 1.647683  Lock_time: 0.000265  Rows_sent: 3  Rows_examined: 427672
SET timestamp=1630028788;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19571' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19571' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9526  Schema: my_database  QC_hit: No
# Query_time: 1.387124  Lock_time: 0.000188  Rows_sent: 3  Rows_examined: 355466
SET timestamp=1630028791;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15598' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15598' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9524  Schema: my_database  QC_hit: No
# Query_time: 1.765380  Lock_time: 0.000187  Rows_sent: 3  Rows_examined: 479520
SET timestamp=1630028791;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22594' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22594' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9530  Schema: my_database  QC_hit: No
# Query_time: 1.163814  Lock_time: 0.000350  Rows_sent: 3  Rows_examined: 370870
SET timestamp=1630028795;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7509' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7509' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:37
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9532  Schema: my_database  QC_hit: No
# Query_time: 1.433609  Lock_time: 0.000249  Rows_sent: 3  Rows_examined: 373046
SET timestamp=1630028797;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19362' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19362' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9534  Schema: my_database  QC_hit: No
# Query_time: 1.334763  Lock_time: 0.000332  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630028799;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19371' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19371' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:46:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9536  Schema: my_database  QC_hit: No
# Query_time: 2.452669  Lock_time: 0.000430  Rows_sent: 3  Rows_examined: 829227
SET timestamp=1630028803;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20339' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20339' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:47:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9584  Schema: my_database  QC_hit: No
# Query_time: 1.617639  Lock_time: 0.000189  Rows_sent: 3  Rows_examined: 564581
SET timestamp=1630028840;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13270' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13270' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:47:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9590  Schema: my_database  QC_hit: No
# Query_time: 1.112890  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 406851
SET timestamp=1630028844;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16705' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16705' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:47:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9592  Schema: my_database  QC_hit: No
# Query_time: 1.950559  Lock_time: 0.000241  Rows_sent: 3  Rows_examined: 372838
SET timestamp=1630028847;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7456' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7456' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:47:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9594  Schema: my_database  QC_hit: No
# Query_time: 2.312136  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 547288
SET timestamp=1630028848;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4597' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4597' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:47:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9598  Schema: my_database  QC_hit: No
# Query_time: 1.452569  Lock_time: 0.000360  Rows_sent: 3  Rows_examined: 341531
SET timestamp=1630028851;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16720' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16720' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9596  Schema: my_database  QC_hit: No
# Query_time: 2.226459  Lock_time: 0.000225  Rows_sent: 3  Rows_examined: 479312
SET timestamp=1630028851;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17822' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17822' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:48:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9694  Schema: my_database  QC_hit: No
# Query_time: 1.747458  Lock_time: 0.000294  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630028908;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13976' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13976' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:48:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9696  Schema: my_database  QC_hit: No
# Query_time: 2.847764  Lock_time: 0.000401  Rows_sent: 3  Rows_examined: 764976
SET timestamp=1630028909;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1417' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1417' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:48:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9702  Schema: my_database  QC_hit: No
# Query_time: 1.125321  Lock_time: 0.000302  Rows_sent: 3  Rows_examined: 370269
SET timestamp=1630028913;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7503' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7503' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:48:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9708  Schema: my_database  QC_hit: No
# Query_time: 1.521704  Lock_time: 0.000309  Rows_sent: 3  Rows_examined: 347449
SET timestamp=1630028918;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17558' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17558' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:49:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9732  Schema: my_database  QC_hit: No
# Query_time: 1.842674  Lock_time: 0.000235  Rows_sent: 3  Rows_examined: 499134
SET timestamp=1630028944;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14056' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14056' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:49:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9752  Schema: my_database  QC_hit: No
# Query_time: 1.050773  Lock_time: 0.000278  Rows_sent: 3  Rows_examined: 358514
SET timestamp=1630028954;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15221' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15221' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:49:27
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9760  Schema: my_database  QC_hit: No
# Query_time: 1.219963  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 436983
SET timestamp=1630028967;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21347' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21347' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:49:32
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9762  Schema: my_database  QC_hit: No
# Query_time: 4.824540  Lock_time: 0.000213  Rows_sent: 3  Rows_examined: 1181509
SET timestamp=1630028972;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21366' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21366' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:49:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9770  Schema: my_database  QC_hit: No
# Query_time: 1.218493  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 406286
SET timestamp=1630028975;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16771' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16771' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:50:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9810  Schema: my_database  QC_hit: No
# Query_time: 1.021237  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 366746
SET timestamp=1630029025;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23012' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23012' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:50:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9812  Schema: my_database  QC_hit: No
# Query_time: 1.044614  Lock_time: 0.000228  Rows_sent: 3  Rows_examined: 677364
SET timestamp=1630029026;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21539' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21539' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:50:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9820  Schema: my_database  QC_hit: No
# Query_time: 1.612188  Lock_time: 0.000306  Rows_sent: 3  Rows_examined: 577698
SET timestamp=1630029039;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5479' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5479' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:50:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9830  Schema: my_database  QC_hit: No
# Query_time: 1.248315  Lock_time: 0.000211  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630029044;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14084' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14084' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:50:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9836  Schema: my_database  QC_hit: No
# Query_time: 2.238515  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 752572
SET timestamp=1630029057;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8793' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8793' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:51:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9840  Schema: my_database  QC_hit: No
# Query_time: 1.503487  Lock_time: 0.000317  Rows_sent: 3  Rows_examined: 442549
SET timestamp=1630029065;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15162' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15162' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:51:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9858  Schema: my_database  QC_hit: No
# Query_time: 2.241027  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 765401
SET timestamp=1630029085;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4260' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4260' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:51:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9870  Schema: my_database  QC_hit: No
# Query_time: 1.746112  Lock_time: 0.000241  Rows_sent: 3  Rows_examined: 578796
SET timestamp=1630029098;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19506' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19506' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:51:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9878  Schema: my_database  QC_hit: No
# Query_time: 1.953203  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 840895
SET timestamp=1630029115;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4246' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4246' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:52:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9888  Schema: my_database  QC_hit: No
# Query_time: 1.947955  Lock_time: 0.000318  Rows_sent: 3  Rows_examined: 638170
SET timestamp=1630029126;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22027' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22027' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:52:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9890  Schema: my_database  QC_hit: No
# Query_time: 1.700943  Lock_time: 0.000271  Rows_sent: 3  Rows_examined: 593403
SET timestamp=1630029129;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15635' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15635' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:52:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9904  Schema: my_database  QC_hit: No
# Query_time: 1.465454  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 517074
SET timestamp=1630029160;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16600' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16600' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9922  Schema: my_database  QC_hit: No
# Query_time: 3.646296  Lock_time: 0.000331  Rows_sent: 3  Rows_examined: 451371
SET timestamp=1630029194;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20990' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20990' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9920  Schema: my_database  QC_hit: No
# Query_time: 5.129712  Lock_time: 0.000366  Rows_sent: 3  Rows_examined: 830226
SET timestamp=1630029196;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20433' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20433' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:18
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9930  Schema: my_database  QC_hit: No
# Query_time: 1.288255  Lock_time: 0.000189  Rows_sent: 3  Rows_examined: 493774
SET timestamp=1630029198;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22383' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22383' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9936  Schema: my_database  QC_hit: No
# Query_time: 1.205049  Lock_time: 0.000209  Rows_sent: 3  Rows_examined: 441260
SET timestamp=1630029208;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19822' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19822' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:34
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9944  Schema: my_database  QC_hit: No
# Query_time: 2.421667  Lock_time: 0.000267  Rows_sent: 3  Rows_examined: 830849
SET timestamp=1630029214;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16961' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16961' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9946  Schema: my_database  QC_hit: No
# Query_time: 1.073580  Lock_time: 0.000216  Rows_sent: 3  Rows_examined: 441220
SET timestamp=1630029219;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19815' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19815' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9952  Schema: my_database  QC_hit: No
# Query_time: 1.202863  Lock_time: 0.000268  Rows_sent: 3  Rows_examined: 375061
SET timestamp=1630029226;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4620' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4620' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9956  Schema: my_database  QC_hit: No
# Query_time: 2.436031  Lock_time: 0.000321  Rows_sent: 3  Rows_examined: 830798
SET timestamp=1630029230;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16966' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16966' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:53:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9962  Schema: my_database  QC_hit: No
# Query_time: 2.190488  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 441260
SET timestamp=1630029237;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19800' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19800' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9958  Schema: my_database  QC_hit: No
# Query_time: 4.015629  Lock_time: 0.123897  Rows_sent: 3  Rows_examined: 765665
SET timestamp=1630029237;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5085' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5085' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:55:19
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 9998  Schema: my_database  QC_hit: No
# Query_time: 2.293573  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 763544
SET timestamp=1630029319;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9985' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9985' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:55:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10004  Schema: my_database  QC_hit: No
# Query_time: 1.006498  Lock_time: 0.000617  Rows_sent: 3  Rows_examined: 369319
SET timestamp=1630029340;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22090' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22090' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:57:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10034  Schema: my_database  QC_hit: No
# Query_time: 1.894943  Lock_time: 0.000304  Rows_sent: 3  Rows_examined: 637340
SET timestamp=1630029426;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22029' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22029' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:57:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10044  Schema: my_database  QC_hit: No
# Query_time: 1.860765  Lock_time: 0.000191  Rows_sent: 3  Rows_examined: 717871
SET timestamp=1630029455;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15554' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15554' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:58:02
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10048  Schema: my_database  QC_hit: No
# Query_time: 1.252571  Lock_time: 0.000291  Rows_sent: 3  Rows_examined: 362180
SET timestamp=1630029482;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15003' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15003' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:58:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10064  Schema: my_database  QC_hit: No
# Query_time: 2.119499  Lock_time: 0.000274  Rows_sent: 3  Rows_examined: 840895
SET timestamp=1630029532;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6288' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6288' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:59:04
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10076  Schema: my_database  QC_hit: No
# Query_time: 1.386327  Lock_time: 0.000287  Rows_sent: 3  Rows_examined: 500559
SET timestamp=1630029544;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14449' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14449' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:59:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10082  Schema: my_database  QC_hit: No
# Query_time: 2.183747  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 765691
SET timestamp=1630029582;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4230' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4230' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  4:59:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10088  Schema: my_database  QC_hit: No
# Query_time: 1.554410  Lock_time: 0.000252  Rows_sent: 3  Rows_examined: 530676
SET timestamp=1630029591;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12597' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12597' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:00:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10092  Schema: my_database  QC_hit: No
# Query_time: 1.817406  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 717192
SET timestamp=1630029621;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1535' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1535' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:00:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10100  Schema: my_database  QC_hit: No
# Query_time: 2.211067  Lock_time: 0.000248  Rows_sent: 3  Rows_examined: 766373
SET timestamp=1630029641;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5136' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5136' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:00:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10108  Schema: my_database  QC_hit: No
# Query_time: 1.347867  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 480079
SET timestamp=1630029649;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21248' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21248' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:01:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10120  Schema: my_database  QC_hit: No
# Query_time: 2.298461  Lock_time: 0.000276  Rows_sent: 3  Rows_examined: 765604
SET timestamp=1630029677;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7288' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7288' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:01:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10122  Schema: my_database  QC_hit: No
# Query_time: 1.394125  Lock_time: 0.000229  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630029681;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11480' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11480' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:02:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10138  Schema: my_database  QC_hit: No
# Query_time: 1.606510  Lock_time: 0.000355  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630029733;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5342' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5342' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:02:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10142  Schema: my_database  QC_hit: No
# Query_time: 1.626169  Lock_time: 0.000320  Rows_sent: 3  Rows_examined: 577432
SET timestamp=1630029736;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13271' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13271' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:02:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10144  Schema: my_database  QC_hit: No
# Query_time: 3.555418  Lock_time: 0.000436  Rows_sent: 3  Rows_examined: 1180775
SET timestamp=1630029740;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22635' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22635' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:02:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10152  Schema: my_database  QC_hit: No
# Query_time: 1.142352  Lock_time: 0.000358  Rows_sent: 3  Rows_examined: 334501
SET timestamp=1630029755;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22797' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22797' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:03:28
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10174  Schema: my_database  QC_hit: No
# Query_time: 1.409350  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 479350
SET timestamp=1630029808;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21131' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21131' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:04:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10196  Schema: my_database  QC_hit: No
# Query_time: 1.685040  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 570350
SET timestamp=1630029871;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3088' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3088' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:05:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10208  Schema: my_database  QC_hit: No
# Query_time: 1.428494  Lock_time: 0.000344  Rows_sent: 3  Rows_examined: 483734
SET timestamp=1630029909;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1027' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1027' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:06:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10224  Schema: my_database  QC_hit: No
# Query_time: 1.001653  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 373770
SET timestamp=1630029993;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14965' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14965' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:06:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10236  Schema: my_database  QC_hit: No
# Query_time: 1.728472  Lock_time: 0.000315  Rows_sent: 3  Rows_examined: 583753
SET timestamp=1630030011;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19710' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19710' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:06:59
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10240  Schema: my_database  QC_hit: No
# Query_time: 2.199234  Lock_time: 0.000312  Rows_sent: 3  Rows_examined: 530673
SET timestamp=1630030019;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '11978' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '11978' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:09:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10280  Schema: my_database  QC_hit: No
# Query_time: 1.588939  Lock_time: 0.000311  Rows_sent: 3  Rows_examined: 604573
SET timestamp=1630030165;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '737' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '737' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:10:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10292  Schema: my_database  QC_hit: No
# Query_time: 1.603956  Lock_time: 0.000258  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630030220;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12173' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12173' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:10:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10308  Schema: my_database  QC_hit: No
# Query_time: 1.006618  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 346569
SET timestamp=1630030253;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22868' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22868' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:10:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10312  Schema: my_database  QC_hit: No
# Query_time: 1.766736  Lock_time: 0.000186  Rows_sent: 3  Rows_examined: 404142
SET timestamp=1630030255;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17743' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17743' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10314  Schema: my_database  QC_hit: No
# Query_time: 2.046414  Lock_time: 0.000230  Rows_sent: 3  Rows_examined: 528222
SET timestamp=1630030255;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3114' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3114' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:10:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10316  Schema: my_database  QC_hit: No
# Query_time: 1.062738  Lock_time: 0.000222  Rows_sent: 3  Rows_examined: 451924
SET timestamp=1630030257;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20992' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20992' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:11:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10330  Schema: my_database  QC_hit: No
# Query_time: 1.594990  Lock_time: 0.000323  Rows_sent: 3  Rows_examined: 547288
SET timestamp=1630030309;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4594' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4594' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:14:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10358  Schema: my_database  QC_hit: No
# Query_time: 1.120251  Lock_time: 0.000215  Rows_sent: 3  Rows_examined: 676616
SET timestamp=1630030451;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21554' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21554' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:15:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10372  Schema: my_database  QC_hit: No
# Query_time: 2.020155  Lock_time: 0.003681  Rows_sent: 3  Rows_examined: 583452
SET timestamp=1630030506;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19703' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19703' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:16:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10388  Schema: my_database  QC_hit: No
# Query_time: 1.032091  Lock_time: 0.000287  Rows_sent: 3  Rows_examined: 375308
SET timestamp=1630030585;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14017' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14017' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:17:39
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10412  Schema: my_database  QC_hit: No
# Query_time: 1.543906  Lock_time: 0.000233  Rows_sent: 3  Rows_examined: 608529
SET timestamp=1630030659;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19071' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19071' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:17:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10416  Schema: my_database  QC_hit: No
# Query_time: 1.530102  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 369810
SET timestamp=1630030673;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7996' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7996' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:17:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10422  Schema: my_database  QC_hit: No
# Query_time: 1.068681  Lock_time: 0.000269  Rows_sent: 3  Rows_examined: 376642
SET timestamp=1630030676;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14373' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14373' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:20:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10476  Schema: my_database  QC_hit: No
# Query_time: 1.389057  Lock_time: 0.000407  Rows_sent: 3  Rows_examined: 479392
SET timestamp=1630030857;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20459' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20459' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:21:11
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10486  Schema: my_database  QC_hit: No
# Query_time: 1.133376  Lock_time: 0.000203  Rows_sent: 3  Rows_examined: 704215
SET timestamp=1630030871;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21528' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21528' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:21:36
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10494  Schema: my_database  QC_hit: No
# Query_time: 1.428980  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 530614
SET timestamp=1630030896;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12496' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12496' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:21:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10500  Schema: my_database  QC_hit: No
# Query_time: 1.077542  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 677364
SET timestamp=1630030906;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21537' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21537' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:22:46
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10516  Schema: my_database  QC_hit: No
# Query_time: 1.552137  Lock_time: 0.000272  Rows_sent: 3  Rows_examined: 555385
SET timestamp=1630030966;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7356' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7356' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:23:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10530  Schema: my_database  QC_hit: No
# Query_time: 1.131958  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 474072
SET timestamp=1630031013;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17041' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17041' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:24:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10566  Schema: my_database  QC_hit: No
# Query_time: 2.079657  Lock_time: 0.000360  Rows_sent: 3  Rows_examined: 717097
SET timestamp=1630031089;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1545' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1545' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:25:56
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10590  Schema: my_database  QC_hit: No
# Query_time: 2.139059  Lock_time: 0.000323  Rows_sent: 3  Rows_examined: 748841
SET timestamp=1630031156;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13140' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13140' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:26:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10604  Schema: my_database  QC_hit: No
# Query_time: 1.823220  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 711843
SET timestamp=1630031176;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4527' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4527' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:26:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10610  Schema: my_database  QC_hit: No
# Query_time: 1.213784  Lock_time: 0.000225  Rows_sent: 3  Rows_examined: 500569
SET timestamp=1630031184;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14312' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14312' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:27:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10628  Schema: my_database  QC_hit: No
# Query_time: 1.618141  Lock_time: 0.000286  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630031236;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20548' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20548' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:27:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10638  Schema: my_database  QC_hit: No
# Query_time: 1.407131  Lock_time: 0.000231  Rows_sent: 3  Rows_examined: 553953
SET timestamp=1630031262;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '178' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '178' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:27:50
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10648  Schema: my_database  QC_hit: No
# Query_time: 2.684068  Lock_time: 0.000212  Rows_sent: 3  Rows_examined: 1050843
SET timestamp=1630031270;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17975' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17975' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:27:55
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10652  Schema: my_database  QC_hit: No
# Query_time: 1.133631  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 360353
SET timestamp=1630031275;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14912' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14912' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:28:06
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10656  Schema: my_database  QC_hit: No
# Query_time: 1.084944  Lock_time: 0.000254  Rows_sent: 3  Rows_examined: 443910
SET timestamp=1630031286;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15163' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15163' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:28:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10668  Schema: my_database  QC_hit: No
# Query_time: 1.055483  Lock_time: 0.000220  Rows_sent: 3  Rows_examined: 373263
SET timestamp=1630031309;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22153' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22153' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:28:52
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10686  Schema: my_database  QC_hit: No
# Query_time: 3.174519  Lock_time: 0.000259  Rows_sent: 3  Rows_examined: 1180850
SET timestamp=1630031332;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22622' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22622' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:29:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10716  Schema: my_database  QC_hit: No
# Query_time: 1.029164  Lock_time: 0.000317  Rows_sent: 3  Rows_examined: 484423
SET timestamp=1630031363;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '22539' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '22539' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:29:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10718  Schema: my_database  QC_hit: No
# Query_time: 2.737377  Lock_time: 0.000299  Rows_sent: 3  Rows_examined: 1067687
SET timestamp=1630031371;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4587' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4587' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:29:33
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10720  Schema: my_database  QC_hit: No
# Query_time: 1.191907  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 479355
SET timestamp=1630031373;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20352' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20352' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:29:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10722  Schema: my_database  QC_hit: No
# Query_time: 3.026130  Lock_time: 0.000294  Rows_sent: 3  Rows_examined: 718534
SET timestamp=1630031378;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '1481' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '1481' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:29:44
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10729  Schema: my_database  QC_hit: No
# Query_time: 3.052411  Lock_time: 0.000261  Rows_sent: 3  Rows_examined: 717876
SET timestamp=1630031384;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2147' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2147' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:30:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10758  Schema: my_database  QC_hit: No
# Query_time: 1.290079  Lock_time: 0.000247  Rows_sent: 3  Rows_examined: 376066
SET timestamp=1630031425;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4178' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4178' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:31:03
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10786  Schema: my_database  QC_hit: No
# Query_time: 1.848682  Lock_time: 0.000258  Rows_sent: 3  Rows_examined: 547288
SET timestamp=1630031463;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '4597' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '4597' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:31:51
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10814  Schema: my_database  QC_hit: No
# Query_time: 1.287276  Lock_time: 0.000316  Rows_sent: 3  Rows_examined: 439774
SET timestamp=1630031511;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '13943' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '13943' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:31:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10816  Schema: my_database  QC_hit: No
# Query_time: 1.145191  Lock_time: 0.000221  Rows_sent: 3  Rows_examined: 480098
SET timestamp=1630031517;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '5342' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '5342' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:32:05
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10820  Schema: my_database  QC_hit: No
# Query_time: 1.241585  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 375311
SET timestamp=1630031525;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14014' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14014' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:32:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10832  Schema: my_database  QC_hit: No
# Query_time: 1.669509  Lock_time: 0.000264  Rows_sent: 3  Rows_examined: 566877
SET timestamp=1630031545;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16993' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16993' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:33:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10878  Schema: my_database  QC_hit: No
# Query_time: 1.305812  Lock_time: 0.000268  Rows_sent: 3  Rows_examined: 427644
SET timestamp=1630031615;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20974' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20974' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:33:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10884  Schema: my_database  QC_hit: No
# Query_time: 2.234599  Lock_time: 0.000260  Rows_sent: 3  Rows_examined: 840895
SET timestamp=1630031618;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6458' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6458' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:34:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10910  Schema: my_database  QC_hit: No
# Query_time: 3.394220  Lock_time: 0.000256  Rows_sent: 3  Rows_examined: 830818
SET timestamp=1630031655;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '16963' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '16963' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:34:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10926  Schema: my_database  QC_hit: No
# Query_time: 1.008180  Lock_time: 0.000200  Rows_sent: 3  Rows_examined: 365528
SET timestamp=1630031678;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6899' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6899' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:35:07
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10944  Schema: my_database  QC_hit: No
# Query_time: 1.225584  Lock_time: 0.000257  Rows_sent: 3  Rows_examined: 289668
SET timestamp=1630031707;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '6005' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '6005' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10946  Schema: my_database  QC_hit: No
# Query_time: 1.372065  Lock_time: 0.000339  Rows_sent: 3  Rows_examined: 346222
SET timestamp=1630031707;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17572' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17572' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:35:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10950  Schema: my_database  QC_hit: No
# Query_time: 1.937709  Lock_time: 0.000376  Rows_sent: 3  Rows_examined: 428057
SET timestamp=1630031720;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '18326' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '18326' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:35:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10952  Schema: my_database  QC_hit: No
# Query_time: 1.220307  Lock_time: 0.000312  Rows_sent: 3  Rows_examined: 445058
SET timestamp=1630031722;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17015' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17015' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:36:09
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10968  Schema: my_database  QC_hit: No
# Query_time: 1.557188  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 596224
SET timestamp=1630031769;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14708' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14708' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:36:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10970  Schema: my_database  QC_hit: No
# Query_time: 2.052521  Lock_time: 0.000416  Rows_sent: 3  Rows_examined: 717449
SET timestamp=1630031776;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '3867' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '3867' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:36:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10982  Schema: my_database  QC_hit: No
# Query_time: 3.070861  Lock_time: 0.000218  Rows_sent: 3  Rows_examined: 1180804
SET timestamp=1630031817;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21481' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21481' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:37:48
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 10990  Schema: my_database  QC_hit: No
# Query_time: 1.633838  Lock_time: 0.000357  Rows_sent: 3  Rows_examined: 530661
SET timestamp=1630031868;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12155' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12155' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:38:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11010  Schema: my_database  QC_hit: No
# Query_time: 1.699250  Lock_time: 0.000336  Rows_sent: 3  Rows_examined: 478519
SET timestamp=1630031933;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '2369' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '2369' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:39:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11026  Schema: my_database  QC_hit: No
# Query_time: 1.651099  Lock_time: 0.000339  Rows_sent: 3  Rows_examined: 566214
SET timestamp=1630031989;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '8519' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '8519' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:40:43
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11044  Schema: my_database  QC_hit: No
# Query_time: 1.052578  Lock_time: 0.000262  Rows_sent: 3  Rows_examined: 376639
SET timestamp=1630032043;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '14119' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '14119' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:41:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11056  Schema: my_database  QC_hit: No
# Query_time: 1.529877  Lock_time: 0.000245  Rows_sent: 3  Rows_examined: 530676
SET timestamp=1630032081;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '12240' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '12240' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:43:35
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11084  Schema: my_database  QC_hit: No
# Query_time: 1.199766  Lock_time: 0.000241  Rows_sent: 3  Rows_examined: 427644
SET timestamp=1630032215;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '20974' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '20974' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:45:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11108  Schema: my_database  QC_hit: No
# Query_time: 2.411512  Lock_time: 0.000237  Rows_sent: 3  Rows_examined: 763657
SET timestamp=1630032313;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '9984' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '9984' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:46:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11134  Schema: my_database  QC_hit: No
# Query_time: 1.052833  Lock_time: 0.000310  Rows_sent: 3  Rows_examined: 477189
SET timestamp=1630032376;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23212' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23212' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:46:41
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11152  Schema: my_database  QC_hit: No
# Query_time: 1.688625  Lock_time: 0.000218  Rows_sent: 3  Rows_examined: 555954
SET timestamp=1630032401;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23130' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23130' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:46:49
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11162  Schema: my_database  QC_hit: No
# Query_time: 1.407320  Lock_time: 0.000214  Rows_sent: 3  Rows_examined: 555954
SET timestamp=1630032409;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23130' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23130' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:47:25
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11174  Schema: my_database  QC_hit: No
# Query_time: 3.299900  Lock_time: 0.000244  Rows_sent: 3  Rows_examined: 1147996
SET timestamp=1630032445;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '17446' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '17446' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:47:38
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11180  Schema: my_database  QC_hit: No
# Query_time: 3.900070  Lock_time: 0.000226  Rows_sent: 3  Rows_examined: 1204790
SET timestamp=1630032458;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '7181' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '7181' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:47:40
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11186  Schema: my_database  QC_hit: No
# Query_time: 1.443081  Lock_time: 0.000275  Rows_sent: 3  Rows_examined: 360415
SET timestamp=1630032460;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23133' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23133' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:47:42
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11188  Schema: my_database  QC_hit: No
# Query_time: 1.236235  Lock_time: 0.000342  Rows_sent: 3  Rows_examined: 434636
SET timestamp=1630032462;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '21676' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '21676' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:48:13
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11195  Schema: my_database  QC_hit: No
# Query_time: 1.028810  Lock_time: 0.000101  Rows_sent: 1  Rows_examined: 71244
SET timestamp=1630032493;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '44';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11196  Schema: my_database  QC_hit: No
# Query_time: 1.130622  Lock_time: 0.000084  Rows_sent: 1  Rows_examined: 71129
SET timestamp=1630032493;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '12';
# Time: 210827  5:48:14
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11206  Schema: my_database  QC_hit: No
# Query_time: 1.067417  Lock_time: 0.000299  Rows_sent: 1  Rows_examined: 71118
SET timestamp=1630032494;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '181';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11195  Schema: my_database  QC_hit: No
# Query_time: 1.359078  Lock_time: 0.000318  Rows_sent: 15  Rows_examined: 71413
SET timestamp=1630032494;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '44' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11202  Schema: my_database  QC_hit: No
# Query_time: 1.107446  Lock_time: 0.000176  Rows_sent: 1  Rows_examined: 55427
SET timestamp=1630032494;
SELECT MIN(p.price) AS `min`, MAX(p.price) AS `max` FROM my_table p LEFT JOIN my_table_to_category p2c ON (p.product_id = p2c.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND p.price > '0' AND p2s.store_id = '0' AND p.date_available <= '2021-08-27' AND cp.path_id = '247';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11203  Schema: my_database  QC_hit: No
# Query_time: 1.033504  Lock_time: 0.000165  Rows_sent: 1  Rows_examined: 55341
SET timestamp=1630032494;
SELECT MIN(p.price) AS `min`, MAX(p.price) AS `max` FROM my_table p LEFT JOIN my_table_to_category p2c ON (p.product_id = p2c.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND p.price > '0' AND p2s.store_id = '0' AND p.date_available <= '2021-08-27' AND cp.path_id = '1325';
# Time: 210827  5:48:15
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11196  Schema: my_database  QC_hit: No
# Query_time: 1.078380  Lock_time: 0.000210  Rows_sent: 15  Rows_examined: 71185
SET timestamp=1630032495;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '12' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11206  Schema: my_database  QC_hit: No
# Query_time: 1.347816  Lock_time: 0.000198  Rows_sent: 15  Rows_examined: 71172
SET timestamp=1630032495;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '181' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  5:48:16
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11204  Schema: my_database  QC_hit: No
# Query_time: 1.028556  Lock_time: 0.000097  Rows_sent: 1  Rows_examined: 71094
SET timestamp=1630032496;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1740';
# Time: 210827  5:48:17
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11204  Schema: my_database  QC_hit: No
# Query_time: 1.206670  Lock_time: 0.000196  Rows_sent: 6  Rows_examined: 71106
SET timestamp=1630032497;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1740' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11202  Schema: my_database  QC_hit: No
# Query_time: 1.257673  Lock_time: 0.000169  Rows_sent: 15  Rows_examined: 71285
SET timestamp=1630032497;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '247' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11203  Schema: my_database  QC_hit: No
# Query_time: 1.215882  Lock_time: 0.000160  Rows_sent: 5  Rows_examined: 71103
SET timestamp=1630032497;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1325' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  5:48:20
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11208  Schema: my_database  QC_hit: No
# Query_time: 1.045538  Lock_time: 0.000067  Rows_sent: 1  Rows_examined: 55365
SET timestamp=1630032500;
SELECT MIN(p.price) AS `min`, MAX(p.price) AS `max` FROM my_table p LEFT JOIN my_table_to_category p2c ON (p.product_id = p2c.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN my_cat_path cp ON (p2c.category_id = cp.category_id) WHERE p.status = '1' AND p.price > '0' AND p2s.store_id = '0' AND p.date_available <= '2021-08-27' AND cp.path_id = '265';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11206  Schema: my_database  QC_hit: No
# Query_time: 1.704032  Lock_time: 0.000164  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032500;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  5:48:21
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11196  Schema: my_database  QC_hit: No
# Query_time: 2.091174  Lock_time: 0.000224  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032501;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11195  Schema: my_database  QC_hit: No
# Query_time: 2.147704  Lock_time: 0.000202  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032501;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  5:48:22
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11211  Schema: my_database  QC_hit: No
# Query_time: 1.289977  Lock_time: 0.000099  Rows_sent: 1  Rows_examined: 71129
SET timestamp=1630032502;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '12';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11212  Schema: my_database  QC_hit: No
# Query_time: 1.488207  Lock_time: 0.000102  Rows_sent: 1  Rows_examined: 71244
SET timestamp=1630032502;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '44';
# Time: 210827  5:48:23
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11217  Schema: my_database  QC_hit: No
# Query_time: 1.744351  Lock_time: 0.000208  Rows_sent: 1  Rows_examined: 71179
SET timestamp=1630032503;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '247';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11218  Schema: my_database  QC_hit: No
# Query_time: 1.854296  Lock_time: 0.000092  Rows_sent: 1  Rows_examined: 71093
SET timestamp=1630032503;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1325';
# Time: 210827  5:48:24
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11220  Schema: my_database  QC_hit: No
# Query_time: 1.837849  Lock_time: 0.000229  Rows_sent: 1  Rows_examined: 71094
SET timestamp=1630032504;
SELECT COUNT(DISTINCT p.product_id) AS total FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1740';
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11211  Schema: my_database  QC_hit: No
# Query_time: 2.279438  Lock_time: 0.000254  Rows_sent: 15  Rows_examined: 71185
SET timestamp=1630032504;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '12' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11212  Schema: my_database  QC_hit: No
# Query_time: 2.127720  Lock_time: 0.000356  Rows_sent: 15  Rows_examined: 71413
SET timestamp=1630032504;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '44' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11202  Schema: my_database  QC_hit: No
# Query_time: 2.628240  Lock_time: 0.000197  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032504;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11203  Schema: my_database  QC_hit: No
# Query_time: 2.820542  Lock_time: 0.000171  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032504;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11204  Schema: my_database  QC_hit: No
# Query_time: 2.769505  Lock_time: 0.000173  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032504;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  5:48:26
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11218  Schema: my_database  QC_hit: No
# Query_time: 2.357841  Lock_time: 0.708750  Rows_sent: 5  Rows_examined: 71103
SET timestamp=1630032506;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1325' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11220  Schema: my_database  QC_hit: No
# Query_time: 2.482471  Lock_time: 0.694608  Rows_sent: 6  Rows_examined: 71106
SET timestamp=1630032506;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '1740' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11217  Schema: my_database  QC_hit: No
# Query_time: 2.670329  Lock_time: 0.778820  Rows_sent: 15  Rows_examined: 71285
SET timestamp=1630032506;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_cat_path cp LEFT JOIN my_table_to_category p2c ON (cp.category_id = p2c.category_id) LEFT JOIN my_table p ON (p2c.product_id = p.product_id) LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' AND cp.path_id = '247' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15;
# Time: 210827  5:48:29
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11211  Schema: my_database  QC_hit: No
# Query_time: 1.203656  Lock_time: 0.000222  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032509;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  5:48:30
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11212  Schema: my_database  QC_hit: No
# Query_time: 1.451059  Lock_time: 0.000186  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032510;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11217  Schema: my_database  QC_hit: No
# Query_time: 1.089871  Lock_time: 0.000204  Rows_sent: 5  Rows_examined: 64120
SET timestamp=1630032510;
SELECT p.product_id, (SELECT AVG(rating) AS total FROM my_rev r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM my_table_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '1' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM my_table_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '1' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM my_table p LEFT JOIN my_table_description pd ON (p.product_id = pd.product_id) LEFT JOIN my_table_to_store p2s ON (p.product_id = p2s.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '0' GROUP BY p.product_id ORDER BY p.date_added DESC, LCASE(pd.name) DESC LIMIT 0,5;
# Time: 210827  5:49:31
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11248  Schema: my_database  QC_hit: No
# Query_time: 1.320593  Lock_time: 0.000238  Rows_sent: 3  Rows_examined: 446340
SET timestamp=1630032571;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '19590' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '19590' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:49:53
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11256  Schema: my_database  QC_hit: No
# Query_time: 1.177320  Lock_time: 0.000223  Rows_sent: 3  Rows_examined: 461353
SET timestamp=1630032593;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '23113' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '23113' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
# Time: 210827  5:49:57
# User@Host: my_database[my_database] @ localhost []
# Thread_id: 11258  Schema: my_database  QC_hit: No
# Query_time: 1.147226  Lock_time: 0.000227  Rows_sent: 3  Rows_examined: 442549
SET timestamp=1630032597;
SELECT IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),min(t1.rnd),t1.product_id,name,text,t2.attribute_id FROM (SELECT RAND() as rnd,pa2.product_id,pr.price,cpr.price as cprice,count(pa2.attribute_id) as quan FROM my_table_attribute pa1 INNER JOIN my_table_attribute pa2 ON (pa1.attribute_id = pa2.attribute_id and pa1.text = pa2.text and pa2.product_id <> pa1.product_id and pa1.language_id = pa2.language_id) INNER JOIN my_table pr ON (pa2.product_id = pr.product_id and pr.status = 1) LEFT JOIN my_table cpr ON (pa1.product_id = cpr.product_id) 
			INNER JOIN my_table_to_category cat_source on(pa1.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat on(pa2.product_id = cat.product_id) WHERE pa1.product_id = '15162' AND pa1.language_id = '1' GROUP BY cpr.product_id,pr.price,cpr.price UNION ALL SELECT  RAND() as rnd,cpr.product_id,cpr.price,pr.price as cprice, 1 as quan FROM my_table pr LEFT JOIN my_table cpr ON (pr.product_id <> cpr.product_id and cpr.status = 1) 
				INNER JOIN my_table_to_category cat_source ON (pr.product_id = cat_source.product_id) INNER JOIN my_table_to_category cat ON (cpr.product_id = cat.product_id) WHERE pr.product_id = '15162' GROUP BY cpr.product_id,pr.price,cpr.price order by quan desc) t1 INNER JOIN my_table_to_category cat on(t1.product_id = cat.product_id) LEFT JOIN (select '' as name, '' as text, 0 as attribute_id) as t2 on (0=0) WHERE 0=0 GROUP BY IF(t1.cprice>t1.price,1,-1)*(t1.cprice-t1.price),product_id,name,text,attribute_id ORDER BY t1.rnd, t1.product_id LIMIT 3;
